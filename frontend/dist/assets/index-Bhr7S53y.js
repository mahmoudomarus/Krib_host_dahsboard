import{j as e,S as t,P as s,R as r,C as n,a,X as o,T as i,D as l,b as c,O as d,c as u,d as h,u as p,e as m,f as g,g as f,A as v,h as x,i as b,k as y,l as w,m as j,n as k,o as N,Z as S,p as _,q as C,r as E,s as P,t as L,I as O,M as T,L as M,E as R,v as A,w as I,U as D,H as U,B as $,x as z,y as B,z as F,F as W,G as H,J as V,K as G,N as q,Q as K,V as Z,W as J,Y,_ as X,$ as Q,a0 as ee,a1 as te,a2 as se,a3 as re,a4 as ne,a5 as ae,a6 as oe,a7 as ie,a8 as le,a9 as ce,aa as de,ab as ue,ac as he,ad as pe,ae as me,af as ge,ag as fe,ah as ve,ai as xe,aj as be,ak as ye,al as we,am as je,an as ke,ao as Ne,ap as Se,aq as _e,ar as Ce,as as Ee,at as Pe,au as Le,av as Oe,aw as Te,ax as Me,ay as Re,az as Ae,aA as Ie,aB as De,aC as Ue,aD as $e,aE as ze,aF as Be,aG as Fe,aH as We,aI as He,aJ as Ve}from"./ui-DTwi2n3d.js";import{a as Ge,r as qe,R as Ke,d as Ze,c as Je,b as Ye,v as Xe}from"./vendor-BKjmSbiz.js";import{c as Qe,R as et,L as tt,C as st,X as rt,Y as nt,T as at,a as ot,A as it,b as lt,P as ct,d as dt,e as ut}from"./charts-DyXe_cX1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ht,pt,mt={},gt=Ge;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ft.apply(this,arguments)}mt.createRoot=gt.createRoot,mt.hydrateRoot=gt.hydrateRoot,(pt=ht||(ht={})).Pop="POP",pt.Push="PUSH",pt.Replace="REPLACE";const vt="popstate";function xt(e){return void 0===e&&(e={}),function(e,t,s,r){void 0===r&&(r={});let{window:n=document.defaultView,v5Compat:a=!1}=r,o=n.history,i=ht.Pop,l=null,c=d();null==c&&(c=0,o.replaceState(ft({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){i=ht.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:i,location:g.location,delta:t})}function h(e,t){i=ht.Push;let s=jt(g.location,e,t);c=d()+1;let r=wt(s,c),u=g.createHref(s);try{o.pushState(r,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;n.location.assign(u)}a&&l&&l({action:i,location:g.location,delta:1})}function p(e,t){i=ht.Replace;let s=jt(g.location,e,t);c=d();let r=wt(s,c),n=g.createHref(s);o.replaceState(r,"",n),a&&l&&l({action:i,location:g.location,delta:0})}function m(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,s="string"==typeof e?e:kt(e);return s=s.replace(/ $/,"%20"),bt(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}let g={get action(){return i},get location(){return e(n,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(vt,u),l=e,()=>{n.removeEventListener(vt,u),l=null}},createHref:e=>t(n,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>o.go(e)};return g}(function(e,t){let{pathname:s,search:r,hash:n}=e.location;return jt("",{pathname:s,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:kt(t)},0,e)}function bt(e,t){if(!1===e||null==e)throw new Error(t)}function yt(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function wt(e,t){return{usr:e.state,key:e.key,idx:t}}function jt(e,t,s,r){return void 0===s&&(s=null),ft({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Nt(t):t,{state:s,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function kt(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Nt(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var St,_t;function Ct(e,t,s){return void 0===s&&(s="/"),function(e,t,s){let r="string"==typeof t?Nt(t):t,n=Bt(r.pathname||"/",s);if(null==n)return null;let a=Et(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let i=0;null==o&&i<a.length;++i){let e=zt(n);o=Ut(a[i],e)}return o}(e,t,s)}function Et(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===r&&(r="");let n=(e,n,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};o.relativePath.startsWith("/")&&(bt(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let i=Ht([r,o.relativePath]),l=s.concat(o);e.children&&e.children.length>0&&(bt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),Et(e.children,t,l,i)),(null!=e.path||e.index)&&t.push({path:i,score:Dt(i,e.index),routesMeta:l})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let r of Pt(e.path))n(e,t,r);else n(e,t)}),t}function Pt(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,n=s.endsWith("?"),a=s.replace(/\?$/,"");if(0===r.length)return n?[a,""]:[a];let o=Pt(r.join("/")),i=[];return i.push(...o.map(e=>""===e?a:[a,e].join("/"))),n&&i.push(...o),i.map(t=>e.startsWith("/")&&""===t?"/":t)}(_t=St||(St={})).data="data",_t.deferred="deferred",_t.redirect="redirect",_t.error="error";const Lt=/^:[\w-]+$/,Ot=3,Tt=2,Mt=1,Rt=10,At=-2,It=e=>"*"===e;function Dt(e,t){let s=e.split("/"),r=s.length;return s.some(It)&&(r+=At),t&&(r+=Tt),s.filter(e=>!It(e)).reduce((e,t)=>e+(Lt.test(t)?Ot:""===t?Mt:Rt),r)}function Ut(e,t,s){let{routesMeta:r}=e,n={},a="/",o=[];for(let i=0;i<r.length;++i){let e=r[i],s=i===r.length-1,l="/"===a?t:t.slice(a.length)||"/",c=$t({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l),d=e.route;if(!c)return null;Object.assign(n,c.params),o.push({params:n,pathname:Ht([a,c.pathname]),pathnameBase:Vt(Ht([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=Ht([a,c.pathnameBase]))}return o}function $t(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);yt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let a=n[0],o=a.replace(/(.)\/+$/,"$1"),i=n.slice(1);return{params:r.reduce((e,t,s)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=i[s]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[s];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:o,pattern:e}}function zt(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return yt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Bt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function Ft(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Wt(e,t,s,r){let n;void 0===r&&(r=!1),"string"==typeof e?n=Nt(e):(n=ft({},e),bt(!n.pathname||!n.pathname.includes("?"),Ft("?","pathname","search",n)),bt(!n.pathname||!n.pathname.includes("#"),Ft("#","pathname","hash",n)),bt(!n.search||!n.search.includes("#"),Ft("#","search","hash",n)));let a,o=""===e||""===n.pathname,i=o?"/":n.pathname;if(null==i)a=s;else{let e=t.length-1;if(!r&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:s,search:r="",hash:n=""}="string"==typeof e?Nt(e):e,a=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:a,search:Gt(r),hash:qt(n)}}(n,a),c=i&&"/"!==i&&i.endsWith("/"),d=(o||"."===i)&&s.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const Ht=e=>e.join("/").replace(/\/\/+/g,"/"),Vt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",qt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const Kt=["post","put","patch","delete"];new Set(Kt);const Zt=["get",...Kt];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Jt.apply(this,arguments)}new Set(Zt);const Yt=qe.createContext(null),Xt=qe.createContext(null),Qt=qe.createContext(null),es=qe.createContext(null),ts=qe.createContext({outlet:null,matches:[],isDataRoute:!1}),ss=qe.createContext(null);function rs(){return null!=qe.useContext(es)}function ns(){return rs()||bt(!1),qe.useContext(es).location}function as(e){qe.useContext(Qt).static||qe.useLayoutEffect(e)}function os(){let{isDataRoute:e}=qe.useContext(ts);return e?function(){let{router:e}=function(){let e=qe.useContext(Yt);return e||bt(!1),e}(hs.UseNavigateStable),t=ms(ps.UseNavigateStable),s=qe.useRef(!1);return as(()=>{s.current=!0}),qe.useCallback(function(r,n){void 0===n&&(n={}),s.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Jt({fromRouteId:t},n)))},[e,t])}():function(){rs()||bt(!1);let e=qe.useContext(Yt),{basename:t,future:s,navigator:r}=qe.useContext(Qt),{matches:n}=qe.useContext(ts),{pathname:a}=ns(),o=JSON.stringify(function(e,t){let s=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}(n,s.v7_relativeSplatPath)),i=qe.useRef(!1);return as(()=>{i.current=!0}),qe.useCallback(function(s,n){if(void 0===n&&(n={}),!i.current)return;if("number"==typeof s)return void r.go(s);let l=Wt(s,JSON.parse(o),a,"path"===n.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ht([t,l.pathname])),(n.replace?r.replace:r.push)(l,n.state,n)},[t,r,o,a,e])}()}function is(e,t){return function(e,t,s,r){rs()||bt(!1);let{navigator:n}=qe.useContext(Qt),{matches:a}=qe.useContext(ts),o=a[a.length-1],i=o?o.params:{};!o||o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c,d=ns();if(t){var u;let e="string"==typeof t?Nt(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||bt(!1),c=e}else c=d;let h=c.pathname||"/",p=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Ct(e,{pathname:p}),g=function(e,t,s,r){var n;void 0===t&&(t=[]);void 0===s&&(s=null);void 0===r&&(r=null);if(null==e){var a;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let o=e,i=null==(n=s)?void 0:n.errors;if(null!=i){let e=o.findIndex(e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id]));e>=0||bt(!1),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,c=-1;if(s&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let e=o[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:r}=s,n=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){l=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight((e,r,n)=>{let a,d=!1,u=null,h=null;var p;s&&(a=i&&r.route.id?i[r.route.id]:void 0,u=r.route.errorElement||cs,l&&(c<0&&0===n?(gs[p="route-fallback"]||(gs[p]=!0),d=!0,h=null):c===n&&(d=!0,h=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,n+1)),g=()=>{let t;return t=a?u:d?h:r.route.Component?qe.createElement(r.route.Component,null):r.route.element?r.route.element:e,qe.createElement(us,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=s},children:t})};return s&&(r.route.ErrorBoundary||r.route.errorElement||0===n)?qe.createElement(ds,{location:s.location,revalidation:s.revalidation,component:u,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}(m&&m.map(e=>Object.assign({},e,{params:Object.assign({},i,e.params),pathname:Ht([l,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Ht([l,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,s,r);if(t&&g)return qe.createElement(es.Provider,{value:{location:Jt({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ht.Pop}},g);return g}(e,t)}function ls(){let e=function(){var e;let t=qe.useContext(ss),s=function(){let e=qe.useContext(Xt);return e||bt(!1),e}(),r=ms();if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return qe.createElement(qe.Fragment,null,qe.createElement("h2",null,"Unexpected Application Error!"),qe.createElement("h3",{style:{fontStyle:"italic"}},t),s?qe.createElement("pre",{style:r},s):null,null)}const cs=qe.createElement(ls,null);class ds extends qe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?qe.createElement(ts.Provider,{value:this.props.routeContext},qe.createElement(ss.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function us(e){let{routeContext:t,match:s,children:r}=e,n=qe.useContext(Yt);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),qe.createElement(ts.Provider,{value:t},r)}var hs=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hs||{}),ps=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ps||{});function ms(e){let t=function(){let e=qe.useContext(ts);return e||bt(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||bt(!1),s.route.id}const gs={};function fs(e){bt(!1)}function vs(e){let{basename:t="/",children:s=null,location:r,navigationType:n=ht.Pop,navigator:a,static:o=!1,future:i}=e;rs()&&bt(!1);let l=t.replace(/^\/*/,"/"),c=qe.useMemo(()=>({basename:l,navigator:a,static:o,future:Jt({v7_relativeSplatPath:!1},i)}),[l,i,a,o]);"string"==typeof r&&(r=Nt(r));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:m="default"}=r,g=qe.useMemo(()=>{let e=Bt(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:p,key:m},navigationType:n}},[l,d,u,h,p,m,n]);return null==g?null:qe.createElement(Qt.Provider,{value:c},qe.createElement(es.Provider,{children:s,value:g}))}function xs(e){let{children:t,location:s}=e;return is(bs(t),s)}function bs(e,t){void 0===t&&(t=[]);let s=[];return qe.Children.forEach(e,(e,r)=>{if(!qe.isValidElement(e))return;let n=[...t,r];if(e.type===qe.Fragment)return void s.push.apply(s,bs(e.props.children,n));e.type!==fs&&bt(!1),e.props.index&&e.props.children&&bt(!1);let a={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=bs(e.props.children,n)),s.push(a)}),s}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */new Promise(()=>{});try{window.__reactRouterVersion="6"}catch(px){}const ys=Ke.startTransition;function ws(e){let{basename:t,children:s,future:r,window:n}=e,a=qe.useRef();null==a.current&&(a.current=xt({window:n,v5Compat:!0}));let o=a.current,[i,l]=qe.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=qe.useCallback(e=>{c&&ys?ys(()=>l(e)):l(e)},[l,c]);return qe.useLayoutEffect(()=>o.listen(d),[o,d]),qe.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),qe.createElement(vs,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:o,future:r})}var js,ks,Ns,Ss;(ks=js||(js={})).UseScrollRestoration="useScrollRestoration",ks.UseSubmit="useSubmit",ks.UseSubmitFetcher="useSubmitFetcher",ks.UseFetcher="useFetcher",ks.useViewTransitionState="useViewTransitionState",(Ss=Ns||(Ns={})).UseFetcher="useFetcher",Ss.UseFetchers="useFetchers",Ss.UseScrollRestoration="useScrollRestoration";const _s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Cs=Qe,Es=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return Cs(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:n,defaultVariants:a}=t,o=Object.keys(n).map(e=>{const t=null==s?void 0:s[e],r=null==a?void 0:a[e];if(null===t)return null;const o=_s(t)||_s(r);return n[e][o]}),i=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...a,...i}[t]):{...a,...i}[t]===s})?[...e,s,r]:e},[]);return Cs(e,o,l,null==s?void 0:s.class,null==s?void 0:s.className)};const Ps=e=>{const t=Ms(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),Ls(s,t)||Ts(e)},getConflictingClassGroupIds:(e,t)=>{const n=s[e]||[];return t&&r[e]?[...n,...r[e]]:n}}},Ls=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Ls(e.slice(1),n):void 0;if(a)return a;if(0===t.validators.length)return;const o=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(o)))?void 0:s.classGroupId},Os=/^\[(.+)\]$/,Ts=e=>{if(Os.test(e)){const t=Os.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Ms=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return Ds(Object.entries(e.classGroups),s).forEach(([e,s])=>{Rs(s,r,e,t)}),r},Rs=(e,t,s,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:As(t,e)).classGroupId=s)}if("function"==typeof e)return Is(e)?void Rs(e(r),t,s,r):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,n])=>{Rs(n,As(t,e),s,r)})})},As=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Is=e=>e.isThemeGetter,Ds=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Us=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const n=(n,a)=>{s.set(n,a),t++,t>e&&(t=0,r=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(n(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):n(e,t)}}},$s=e=>{const{separator:t,experimentalParseClassName:s}=e,r=1===t.length,n=t[0],a=t.length,o=e=>{const s=[];let o,i=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===i){if(c===n&&(r||e.slice(u,u+a)===t)){s.push(e.slice(l,u)),l=u+a;continue}if("/"===c){o=u;continue}}"["===c?i++:"]"===c&&i--}const c=0===s.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:o&&o>l?o-l:void 0}};return s?e=>s({className:e,parseClassName:o}):o},zs=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},Bs=/\s+/;function Fs(){let e,t,s=0,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Ws(e))&&(r&&(r+=" "),r+=t);return r}const Ws=e=>{if("string"==typeof e)return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=Ws(e[r]))&&(s&&(s+=" "),s+=t);return s};function Hs(e,...t){let s,r,n,a=function(i){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Us(e.cacheSize),parseClassName:$s(e),...Ps(e)}))(l),r=s.cache.get,n=s.cache.set,a=o,o(i)};function o(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n}=t,a=[],o=e.trim().split(Bs);let i="";for(let l=o.length-1;l>=0;l-=1){const e=o[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let h=Boolean(u),p=r(h?d.substring(0,u):d);if(!p){if(!h){i=e+(i.length>0?" "+i:i);continue}if(p=r(d),!p){i=e+(i.length>0?" "+i:i);continue}h=!1}const m=zs(t).join(":"),g=c?m+"!":m,f=g+p;if(a.includes(f))continue;a.push(f);const v=n(p,h);for(let s=0;s<v.length;++s){const e=v[s];a.push(g+e)}i=e+(i.length>0?" "+i:i)}return i})(e,s);return n(e,a),a}return function(){return a(Fs.apply(null,arguments))}}const Vs=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Gs=/^\[(?:([a-z-]+):)?(.+)\]$/i,qs=/^\d+\/\d+$/,Ks=new Set(["px","full","screen"]),Zs=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Js=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ys=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xs=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Qs=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,er=e=>sr(e)||Ks.has(e)||qs.test(e),tr=e=>gr(e,"length",fr),sr=e=>Boolean(e)&&!Number.isNaN(Number(e)),rr=e=>gr(e,"number",sr),nr=e=>Boolean(e)&&Number.isInteger(Number(e)),ar=e=>e.endsWith("%")&&sr(e.slice(0,-1)),or=e=>Gs.test(e),ir=e=>Zs.test(e),lr=new Set(["length","size","percentage"]),cr=e=>gr(e,lr,vr),dr=e=>gr(e,"position",vr),ur=new Set(["image","url"]),hr=e=>gr(e,ur,br),pr=e=>gr(e,"",xr),mr=()=>!0,gr=(e,t,s)=>{const r=Gs.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):s(r[2]))},fr=e=>Js.test(e)&&!Ys.test(e),vr=()=>!1,xr=e=>Xs.test(e),br=e=>Qs.test(e),yr=Hs(()=>{const e=Vs("colors"),t=Vs("spacing"),s=Vs("blur"),r=Vs("brightness"),n=Vs("borderColor"),a=Vs("borderRadius"),o=Vs("borderSpacing"),i=Vs("borderWidth"),l=Vs("contrast"),c=Vs("grayscale"),d=Vs("hueRotate"),u=Vs("invert"),h=Vs("gap"),p=Vs("gradientColorStops"),m=Vs("gradientColorStopPositions"),g=Vs("inset"),f=Vs("margin"),v=Vs("opacity"),x=Vs("padding"),b=Vs("saturate"),y=Vs("scale"),w=Vs("sepia"),j=Vs("skew"),k=Vs("space"),N=Vs("translate"),S=()=>["auto",or,t],_=()=>[or,t],C=()=>["",er,tr],E=()=>["auto",sr,or],P=()=>["","0",or],L=()=>[sr,or];return{cacheSize:500,separator:":",theme:{colors:[mr],spacing:[er,tr],blur:["none","",ir,or],brightness:L(),borderColor:[e],borderRadius:["none","","full",ir,or],borderSpacing:_(),borderWidth:C(),contrast:L(),grayscale:P(),hueRotate:L(),invert:P(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[ar,tr],inset:S(),margin:S(),opacity:L(),padding:_(),saturate:L(),scale:L(),sepia:P(),skew:L(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",or]}],container:["container"],columns:[{columns:[ir]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",or]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nr,or]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",or]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",nr,or]}],"grid-cols":[{"grid-cols":[mr]}],"col-start-end":[{col:["auto",{span:["full",nr,or]},or]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[mr]}],"row-start-end":[{row:["auto",{span:[nr,or]},or]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",or]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",or]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[f]}],mx:[{mx:[f]}],my:[{my:[f]}],ms:[{ms:[f]}],me:[{me:[f]}],mt:[{mt:[f]}],mr:[{mr:[f]}],mb:[{mb:[f]}],ml:[{ml:[f]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",or,t]}],"min-w":[{"min-w":[or,t,"min","max","fit"]}],"max-w":[{"max-w":[or,t,"none","full","min","max","fit","prose",{screen:[ir]},ir]}],h:[{h:[or,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[or,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[or,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[or,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ir,tr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rr]}],"font-family":[{font:[mr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",or]}],"line-clamp":[{"line-clamp":["none",sr,rr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",er,or]}],"list-image":[{"list-image":["none",or]}],"list-style-type":[{list:["none","disc","decimal",or]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",er,tr]}],"underline-offset":[{"underline-offset":["auto",er,or]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",or]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",or]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",dr]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cr]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hr]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[er,or]}],"outline-w":[{outline:[er,tr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[er,tr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ir,pr]}],"shadow-color":[{shadow:[mr]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ir,or]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",or]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",or]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",or]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[nr,or]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",or]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",or]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",or]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[er,tr,rr]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function wr(...e){return yr(Qe(e))}const jr=Es("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-white shadow-sm hover:bg-destructive/90 hover:shadow-md focus-visible:ring-destructive dark:bg-destructive/80",outline:"border-2 border-input bg-background text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-accent-foreground/20 dark:bg-background/50 dark:border-input dark:hover:bg-accent/50",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80"},size:{default:"h-10 px-5 py-2.5 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-3 text-xs has-[>svg]:px-2.5",lg:"h-12 rounded-lg px-8 text-base has-[>svg]:px-6",icon:"size-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}});function kr({className:s,variant:r,size:n,asChild:a=!1,...o}){const i=a?t:"button";return e.jsx(i,{"data-slot":"button",className:wr(jr({variant:r,size:n,className:s})),...o})}function Nr({className:t,type:s,...r}){return e.jsx("input",{type:s,"data-slot":"input",className:wr("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var Sr="horizontal",_r=["horizontal","vertical"],Cr=qe.forwardRef((t,r)=>{const{decorative:n,orientation:a=Sr,...o}=t,i=function(e){return _r.includes(e)}(a)?a:Sr,l=n?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"};return e.jsx(s.div,{"data-orientation":i,...l,...o,ref:r})});Cr.displayName="Separator";var Er=Cr;function Pr({className:t,orientation:s="horizontal",decorative:r=!0,...n}){return e.jsx(Er,{"data-slot":"separator-root",decorative:r,orientation:s,className:wr("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}function Lr({...t}){return e.jsx(r,{"data-slot":"sheet",...t})}function Or({...t}){return e.jsx(c,{"data-slot":"sheet-portal",...t})}function Tr({className:t,...s}){return e.jsx(d,{"data-slot":"sheet-overlay",className:wr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Mr({className:t,children:s,side:r="right",...i}){return e.jsxs(Or,{children:[e.jsx(Tr,{}),e.jsxs(n,{"data-slot":"sheet-content",className:wr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...i,children:[s,e.jsxs(a,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(o,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Rr({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:wr("flex flex-col gap-1.5 p-4",t),...s})}function Ar({className:t,...s}){return e.jsx(i,{"data-slot":"sheet-title",className:wr("text-foreground font-semibold",t),...s})}function Ir({className:t,...s}){return e.jsx(l,{"data-slot":"sheet-description",className:wr("text-muted-foreground text-sm",t),...s})}var Dr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ur=qe.forwardRef((t,r)=>e.jsx(s.span,{...t,ref:r,style:{...Dr,...t.style}}));Ur.displayName="VisuallyHidden";var $r=Ur,[zr,Br]=u("Tooltip",[h]),Fr=h(),Wr="TooltipProvider",Hr=700,Vr="tooltip.open",[Gr,qr]=zr(Wr),Kr=t=>{const{__scopeTooltip:s,delayDuration:r=Hr,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,i=qe.useRef(!0),l=qe.useRef(!1),c=qe.useRef(0);return qe.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),e.jsx(Gr,{scope:s,isOpenDelayedRef:i,delayDuration:r,onOpen:qe.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:qe.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:qe.useCallback(e=>{l.current=e},[]),disableHoverableContent:a,children:o})};Kr.displayName=Wr;var Zr="Tooltip",[Jr,Yr]=zr(Zr),Xr=t=>{const{__scopeTooltip:s,children:r,open:n,defaultOpen:a,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=t,c=qr(Zr,t.__scopeTooltip),d=Fr(s),[u,h]=qe.useState(null),f=p(),v=qe.useRef(0),x=i??c.disableHoverableContent,b=l??c.delayDuration,y=qe.useRef(!1),[w,j]=m({prop:n,defaultProp:a??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(Vr))):c.onClose(),null==o||o(e)},caller:Zr}),k=qe.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),N=qe.useCallback(()=>{window.clearTimeout(v.current),v.current=0,y.current=!1,j(!0)},[j]),S=qe.useCallback(()=>{window.clearTimeout(v.current),v.current=0,j(!1)},[j]),_=qe.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{y.current=!0,j(!0),v.current=0},b)},[b,j]);return qe.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),e.jsx(g,{...d,children:e.jsx(Jr,{scope:s,contentId:f,open:w,stateAttribute:k,trigger:u,onTriggerChange:h,onTriggerEnter:qe.useCallback(()=>{c.isOpenDelayedRef.current?_():N()},[c.isOpenDelayedRef,_,N]),onTriggerLeave:qe.useCallback(()=>{x?S():(window.clearTimeout(v.current),v.current=0)},[S,x]),onOpen:N,onClose:S,disableHoverableContent:x,children:r})})};Xr.displayName=Zr;var Qr="TooltipTrigger",en=qe.forwardRef((t,r)=>{const{__scopeTooltip:n,...a}=t,o=Yr(Qr,n),i=qr(Qr,n),l=Fr(n),c=qe.useRef(null),d=f(r,c,o.onTriggerChange),u=qe.useRef(!1),h=qe.useRef(!1),p=qe.useCallback(()=>u.current=!1,[]);return qe.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(v,{asChild:!0,...l,children:e.jsx(s.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:d,onPointerMove:x(t.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||i.isPointerInTransitRef.current||(o.onTriggerEnter(),h.current=!0))}),onPointerLeave:x(t.onPointerLeave,()=>{o.onTriggerLeave(),h.current=!1}),onPointerDown:x(t.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:x(t.onFocus,()=>{u.current||o.onOpen()}),onBlur:x(t.onBlur,o.onClose),onClick:x(t.onClick,o.onClose)})})});en.displayName=Qr;var tn="TooltipPortal",[sn,rn]=zr(tn,{forceMount:void 0}),nn=t=>{const{__scopeTooltip:s,forceMount:r,children:n,container:a}=t,o=Yr(tn,s);return e.jsx(sn,{scope:s,forceMount:r,children:e.jsx(b,{present:r||o.open,children:e.jsx(y,{asChild:!0,container:a,children:n})})})};nn.displayName=tn;var an="TooltipContent",on=qe.forwardRef((t,s)=>{const r=rn(an,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,i=Yr(an,t.__scopeTooltip);return e.jsx(b,{present:n||i.open,children:i.disableHoverableContent?e.jsx(hn,{side:a,...o,ref:s}):e.jsx(ln,{side:a,...o,ref:s})})}),ln=qe.forwardRef((t,s)=>{const r=Yr(an,t.__scopeTooltip),n=qr(an,t.__scopeTooltip),a=qe.useRef(null),o=f(s,a),[i,l]=qe.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:h}=n,p=qe.useCallback(()=>{l(null),h(!1)},[h]),m=qe.useCallback((e,t)=>{const s=e.currentTarget,r={x:e.clientX,y:e.clientY},n=function(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s})}return r}(r,function(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,r,n,a)){case a:return"left";case n:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,s.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(s.y-r.y)>=(e.y-r.y)*(s.x-r.x)))break;t.pop()}t.push(s)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;s.length>=2;){const e=s[s.length-1],r=s[s.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;s.pop()}s.push(t)}return s.pop(),1===t.length&&1===s.length&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}(t)}([...n,...function(e){const{top:t,right:s,bottom:r,left:n}=e;return[{x:n,y:t},{x:s,y:t},{x:s,y:r},{x:n,y:r}]}(t.getBoundingClientRect())]);l(a),h(!0)},[h]);return qe.useEffect(()=>()=>p(),[p]),qe.useEffect(()=>{if(c&&u){const e=e=>m(e,u),t=e=>m(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,m,p]),qe.useEffect(()=>{if(i){const e=e=>{const t=e.target,s={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),n=!function(e,t){const{x:s,y:r}=e;let n=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const e=t[a],i=t[o],l=e.x,c=e.y,d=i.x,u=i.y;c>r!=u>r&&s<(d-l)*(r-c)/(u-c)+l&&(n=!n)}return n}(s,i);r?p():n&&(p(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,i,d,p]),e.jsx(hn,{...t,ref:o})}),[cn,dn]=zr(Zr,{isInside:!1}),un=N("TooltipContent"),hn=qe.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=t,c=Yr(an,r),d=Fr(r),{onClose:u}=c;return qe.useEffect(()=>(document.addEventListener(Vr,u),()=>document.removeEventListener(Vr,u)),[u]),qe.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),e.jsx(j,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:e.jsxs(k,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(un,{children:n}),e.jsx(cn,{scope:r,isInside:!0,children:e.jsx($r,{id:c.contentId,role:"tooltip",children:a||n})})]})})});on.displayName=an;var pn="TooltipArrow",mn=qe.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Fr(r);return dn(pn,r).isInside?null:e.jsx(w,{...a,...n,ref:s})});mn.displayName=pn;var gn=Kr,fn=Xr,vn=en,xn=nn,bn=on,yn=mn;function wn({delayDuration:t=0,...s}){return e.jsx(gn,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function jn({...t}){return e.jsx(wn,{children:e.jsx(fn,{"data-slot":"tooltip",...t})})}function kn({...t}){return e.jsx(vn,{"data-slot":"tooltip-trigger",...t})}function Nn({className:t,sideOffset:s=0,children:r,...n}){return e.jsx(xn,{children:e.jsxs(bn,{"data-slot":"tooltip-content",sideOffset:s,className:wr("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,e.jsx(yn,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Sn=qe.createContext(null);function _n(){const e=qe.useContext(Sn);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function Cn({defaultOpen:t=!0,open:s,onOpenChange:r,className:n,style:a,children:o,...i}){const l=function(){const[e,t]=qe.useState(void 0);return qe.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),s=()=>{t(window.innerWidth<768)};return e.addEventListener("change",s),t(window.innerWidth<768),()=>e.removeEventListener("change",s)},[]),!!e}(),[c,d]=qe.useState(!1),[u,h]=qe.useState(t),p=s??u,m=qe.useCallback(e=>{const t="function"==typeof e?e(p):e;r?r(t):h(t),document.cookie=`sidebar_state=${t}; path=/; max-age=604800`},[r,p]),g=qe.useCallback(()=>l?d(e=>!e):m(e=>!e),[l,m,d]);qe.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),g())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[g]);const f=p?"expanded":"collapsed",v=qe.useMemo(()=>({state:f,open:p,setOpen:m,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:g}),[f,p,m,l,c,d,g]);return e.jsx(Sn.Provider,{value:v,children:e.jsx(wn,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...a},className:wr("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",n),...i,children:o})})})}function En({side:t="left",variant:s="sidebar",collapsible:r="offcanvas",className:n,children:a,...o}){const{isMobile:i,state:l,openMobile:c,setOpenMobile:d}=_n();return"none"===r?e.jsx("div",{"data-slot":"sidebar",className:wr("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",n),...o,children:a}):i?e.jsx(Lr,{open:c,onOpenChange:d,...o,children:e.jsxs(Mr,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:t,children:[e.jsxs(Rr,{className:"sr-only",children:[e.jsx(Ar,{children:"Sidebar"}),e.jsx(Ir,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:a})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":"collapsed"===l?r:"","data-variant":s,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:wr("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===s||"inset"===s?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{"data-slot":"sidebar-container",className:wr("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===s||"inset"===s?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:a})})]})}function Pn({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:wr("flex flex-col gap-2 p-2",t),...s})}function Ln({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:wr("flex flex-col gap-2 p-2",t),...s})}function On({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:wr("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s})}function Tn({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:wr("relative flex w-full min-w-0 flex-col p-2",t),...s})}function Mn({className:s,asChild:r=!1,...n}){const a=r?t:"div";return e.jsx(a,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:wr("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...n})}function Rn({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:wr("w-full text-sm",t),...s})}function An({className:t,...s}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:wr("flex w-full min-w-0 flex-col gap-1",t),...s})}function In({className:t,...s}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:wr("group/menu-item relative",t),...s})}const Dn=Es("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Un({asChild:s=!1,isActive:r=!1,variant:n="default",size:a="default",tooltip:o,className:i,...l}){const c=s?t:"button",{isMobile:d,state:u}=_n(),h=e.jsx(c,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":a,"data-active":r,className:wr(Dn({variant:n,size:a}),i),...l});return o?("string"==typeof o&&(o={children:o}),e.jsxs(jn,{children:[e.jsx(kn,{asChild:!0,children:h}),e.jsx(Nn,{side:"right",align:"center",hidden:"collapsed"!==u||d,...o})]})):h}const $n={},zn=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in $n)return;$n[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,s&&n.setAttribute("nonce",s),document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};class Bn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Fn extends Bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wn extends Bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hn extends Bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vn,Gn;(Gn=Vn||(Vn={})).Any="any",Gn.ApNortheast1="ap-northeast-1",Gn.ApNortheast2="ap-northeast-2",Gn.ApSouth1="ap-south-1",Gn.ApSoutheast1="ap-southeast-1",Gn.ApSoutheast2="ap-southeast-2",Gn.CaCentral1="ca-central-1",Gn.EuCentral1="eu-central-1",Gn.EuWest1="eu-west-1",Gn.EuWest2="eu-west-2",Gn.EuWest3="eu-west-3",Gn.SaEast1="sa-east-1",Gn.UsEast1="us-east-1",Gn.UsWest1="us-west-1",Gn.UsWest2="us-west-2";var qn=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};class Kn{constructor(e,{headers:t={},customFetch:s,region:r=Vn.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zn(async()=>{const{default:e}=await Promise.resolve().then(()=>ia);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return qn(this,void 0,void 0,function*(){try{const{headers:r,method:n,body:a}=t;let o={},{region:i}=t;i||(i=this.region);const l=new URL(`${this.url}/${e}`);let c;i&&"any"!==i&&(o["x-region"]=i,l.searchParams.set("forceFunctionRegion",i)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):"string"==typeof a?(o["Content-Type"]="text/plain",c=a):"undefined"!=typeof FormData&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:c}).catch(e=>{throw new Fn(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Wn(d);if(!d.ok)throw new Hn(d);let h,p=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===p?yield d.json():"application/octet-stream"===p?yield d.blob():"text/event-stream"===p?d:"multipart/form-data"===p?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Hn||r instanceof Wn?r.context:void 0}}})}}var Zn={},Jn={},Yn={},Xn={},Qn={},ea={},ta=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const sa=ta.fetch,ra=ta.fetch.bind(ta),na=ta.Headers,aa=ta.Request,oa=ta.Response,ia=Object.freeze(Object.defineProperty({__proto__:null,Headers:na,Request:aa,Response:oa,default:ra,fetch:sa},Symbol.toStringTag,{value:"Module"})),la=Ze(ia);var ca={};Object.defineProperty(ca,"__esModule",{value:!0});let da=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ca.default=da;var ua=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ea,"__esModule",{value:!0});const ha=ua(la),pa=ua(ca);ea.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=ha.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r;let n=null,a=null,o=null,i=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&c&&c.length>1&&(o=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(n={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,i=406,l="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{n=JSON.parse(t),Array.isArray(n)&&404===e.status&&(a=[],n=null,i=200,l="OK")}catch(c){404===e.status&&""===t?(i=204,l="No Content"):n={message:t}}if(n&&this.isMaybeSingle&&(null===(r=null==n?void 0:n.details)||void 0===r?void 0:r.includes("0 rows"))&&(n=null,i=200,l="OK"),n&&this.shouldThrowOnError)throw new pa.default(n)}return{error:n,data:a,count:o,status:i,statusText:l}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var ma=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qn,"__esModule",{value:!0});const ga=ma(ea);let fa=class extends ga.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const n=void 0===r?"offset":`${r}.offset`,a=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:a="text"}={}){var o;const i=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${i};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Qn.default=fa;var va=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xn,"__esModule",{value:!0});const xa=va(Qn);let ba=class extends xa.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let n="";"plain"===r?n="pl":"phrase"===r?n="ph":"websearch"===r&&(n="w");const a=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Xn.default=ba;var ya=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yn,"__esModule",{value:!0});const wa=ya(Xn);Yn.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let n=!1;const a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new wa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new wa.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){const a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new wa.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new wa.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new wa.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var ja={},ka={};Object.defineProperty(ka,"__esModule",{value:!0}),ka.version=void 0,ka.version="0.0.0-automated",Object.defineProperty(ja,"__esModule",{value:!0}),ja.DEFAULT_HEADERS=void 0;const Na=ka;ja.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Na.version}`};var Sa=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jn,"__esModule",{value:!0});const _a=Sa(Yn),Ca=Sa(Xn),Ea=ja;Jn.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ea.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new _a.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:n}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let i;s||r?(a=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(a="POST",i=t);const l=Object.assign({},this.headers);return n&&(l.Prefer=`count=${n}`),new Ca.default({method:a,url:o,headers:l,schema:this.schemaName,body:i,fetch:this.fetch,allowEmpty:!1})}};var Pa=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.PostgrestError=Zn.PostgrestBuilder=Zn.PostgrestTransformBuilder=Zn.PostgrestFilterBuilder=Zn.PostgrestQueryBuilder=Zn.PostgrestClient=void 0;const La=Pa(Jn);Zn.PostgrestClient=La.default;const Oa=Pa(Yn);Zn.PostgrestQueryBuilder=Oa.default;const Ta=Pa(Xn);Zn.PostgrestFilterBuilder=Ta.default;const Ma=Pa(Qn);Zn.PostgrestTransformBuilder=Ma.default;const Ra=Pa(ea);Zn.PostgrestBuilder=Ra.default;const Aa=Pa(ca);Zn.PostgrestError=Aa.default;var Ia=Zn.default={PostgrestClient:La.default,PostgrestQueryBuilder:Oa.default,PostgrestFilterBuilder:Ta.default,PostgrestTransformBuilder:Ma.default,PostgrestBuilder:Ra.default,PostgrestError:Aa.default};const{PostgrestClient:Da,PostgrestQueryBuilder:Ua,PostgrestFilterBuilder:$a,PostgrestTransformBuilder:za,PostgrestBuilder:Ba,PostgrestError:Fa}=Ia;class Wa{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Ha=1e4;var Va,Ga,qa,Ka,Za,Ja,Ya,Xa,Qa,eo,to;(Ga=Va||(Va={}))[Ga.connecting=0]="connecting",Ga[Ga.open=1]="open",Ga[Ga.closing=2]="closing",Ga[Ga.closed=3]="closed",(Ka=qa||(qa={})).closed="closed",Ka.errored="errored",Ka.joined="joined",Ka.joining="joining",Ka.leaving="leaving",(Ja=Za||(Za={})).close="phx_close",Ja.error="phx_error",Ja.join="phx_join",Ja.reply="phx_reply",Ja.leave="phx_leave",Ja.access_token="access_token",(Ya||(Ya={})).websocket="websocket",(Qa=Xa||(Xa={})).Connecting="connecting",Qa.Open="open",Qa.Closing="closing",Qa.Closed="closed";class so{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+r));a+=r;const i=s.decode(e.slice(a,a+n));a+=n;return{ref:null,topic:o,event:i,payload:JSON.parse(s.decode(e.slice(a,e.byteLength)))}}}class ro{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(to=eo||(eo={})).abstime="abstime",to.bool="bool",to.date="date",to.daterange="daterange",to.float4="float4",to.float8="float8",to.int2="int2",to.int4="int4",to.int4range="int4range",to.int8="int8",to.int8range="int8range",to.json="json",to.jsonb="jsonb",to.money="money",to.numeric="numeric",to.oid="oid",to.reltime="reltime",to.text="text",to.time="time",to.timestamp="timestamp",to.timestamptz="timestamptz",to.timetz="timetz",to.tsrange="tsrange",to.tstzrange="tstzrange";const no=(e,t,s={})=>{var r;const n=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=ao(r,e,t,n),s),{})},ao=(e,t,s,r)=>{const n=t.find(t=>t.name===e),a=null==n?void 0:n.type,o=s[e];return a&&!r.includes(a)?oo(a,o):io(o)},oo=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return ho(t,s)}switch(e){case eo.bool:return lo(t);case eo.float4:case eo.float8:case eo.int2:case eo.int4:case eo.int8:case eo.numeric:case eo.oid:return co(t);case eo.json:case eo.jsonb:return uo(t);case eo.timestamp:return po(t);case eo.abstime:case eo.date:case eo.daterange:case eo.int4range:case eo.int8range:case eo.money:case eo.reltime:case eo.text:case eo.time:case eo.timestamptz:case eo.timetz:case eo.tsrange:case eo.tstzrange:default:return io(t)}},io=e=>e,lo=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},co=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uo=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ho=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,s);try{r=JSON.parse("["+a+"]")}catch(n){r=a?a.split(","):[]}return r.map(e=>oo(t,e))}return e},po=e=>"string"==typeof e?e.replace(" ","T"):e,mo=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class go{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fo,vo,xo,bo,yo,wo,jo,ko;(vo=fo||(fo={})).SYNC="sync",vo.JOIN="join",vo.LEAVE="leave";class No{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=No.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=No.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=No.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const n=this.cloneDeep(e),a=this.transformState(t),o={},i={};return this.map(n,(e,t)=>{a[e]||(i[e]=t)}),this.map(a,(e,t)=>{const s=n[e];if(s){const r=t.map(e=>e.presence_ref),n=s.map(e=>e.presence_ref),a=t.filter(e=>n.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(o[e]=a),l.length>0&&(i[e]=l)}else o[e]=t}),this.syncDiff(n,{joins:o,leaves:i},s,r)}static syncDiff(e,t,s,r){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(n,(t,r)=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(r),a.length>0){const s=e[t].map(e=>e.presence_ref),r=a.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,a,r)}),this.map(a,(t,s)=>{let n=e[t];if(!n)return;const a=s.map(e=>e.presence_ref);n=n.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=n,r(t,n,s),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(bo=xo||(xo={})).ALL="*",bo.INSERT="INSERT",bo.UPDATE="UPDATE",bo.DELETE="DELETE",(wo=yo||(yo={})).BROADCAST="broadcast",wo.PRESENCE="presence",wo.POSTGRES_CHANGES="postgres_changes",wo.SYSTEM="system",(ko=jo||(jo={})).SUBSCRIBED="SUBSCRIBED",ko.TIMED_OUT="TIMED_OUT",ko.CLOSED="CLOSED",ko.CHANNEL_ERROR="CHANNEL_ERROR";class So{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=qa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new go(this,Za.join,this.params,this.timeout),this.rejoinTimer=new ro(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qa.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=qa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=qa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Za.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new No(this),this.broadcastEndpointURL=mo(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==qa.closed){const{config:{broadcast:n,presence:a,private:o}}=this.params,i=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[yo.PRESENCE]&&this.bindings[yo.PRESENCE].length>0,c={},d={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:i,private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(jo.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(jo.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,n=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,a=[];for(let s=0;s<n;s++){const n=r[s],{filter:{event:o,schema:i,table:l,filter:c}}=n,d=t&&t[s];if(!d||d.event!==o||d.schema!==i||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=qa.errored,void(null==e||e(jo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(jo.SUBSCRIBED))}null==e||e(jo.SUBSCRIBED)}).receive("error",t=>{this.state=qa.errored,null==e||e(jo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(jo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===qa.joined&&e===yo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,n,a;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(n=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.ack)||s("ok"),o.receive("ok",()=>s("ok")),o.receive("error",()=>s("error")),o.receive("timeout",()=>s("timed out"))});{const{event:a,payload:o}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qa.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Za.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new go(this,Za.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qa.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,n=setTimeout(()=>r.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(n),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new go(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,n;const a=e.toLocaleLowerCase(),{close:o,error:i,leave:l,join:c}=Za;if(s&&[o,i,l,c].indexOf(a)>=0&&s!==this._joinRef())return;let d=this._onMessage(a,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,s)):null===(n=this.bindings[a])||void 0===n||n.filter(e=>{var s,r,n,o,i,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const s=null===(i=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:n,errors:a}=e,o={schema:t,table:s,commit_timestamp:r,eventType:n,new:{},old:{},errors:a};d=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===qa.closed}_isJoined(){return this.state===qa.joined}_isJoining(){return this.state===qa.joining}_isLeaving(){return this.state===qa.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),n={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(n):this.bindings[r]=[n],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&So.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Za.close,{},e)}_onError(e){this._on(Za.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qa.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=no(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=no(e.columns,e.old_record)),t}}const _o=()=>{},Co=25e3,Eo=10,Po=100,Lo=[1e3,2e3,5e3,1e4];class Oo{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ha,this.transport=null,this.heartbeatIntervalMs=Co,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_o,this.ref=0,this.reconnectTimer=null,this.logger=_o,this.conn=null,this.sendBuffer=[],this.serializer=new so,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zn(async()=>{const{default:e}=await Promise.resolve().then(()=>ia);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ya.websocket}`,this.httpEndpoint=mo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Wa.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Va.connecting:return Xa.Connecting;case Va.open:return Xa.Open;case Va.closing:return Xa.Closing;default:return Xa.Closed}}isConnected(){return this.connectionState()===Xa.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new So(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${n})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Po);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:n}=e,a=n?`(${n})`:"",o=r.status||"";this.log("receive",`${o} ${t} ${s} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Za.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(Za.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(px){this.log("error",`error in ${e} callback`,px)}})}catch(px){this.log("error",`error triggering ${e} callbacks`,px)}}_setupReconnectionTimer(){this.reconnectTimer=new ro(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Eo)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,n,a,o,i,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:Ha,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:Co,this.worker=null!==(n=null==e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Lo[e-1]||1e4,this.encode=null!==(i=null==e?void 0:e.encode)&&void 0!==i?i:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class To extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mo(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ro extends To{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ao extends To{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Io=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};const Do=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zn(async()=>{const{default:e}=await Promise.resolve().then(()=>ia);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Uo=e=>{if(Array.isArray(e))return e.map(e=>Uo(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Uo(s)}),t};var $o=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};const zo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bo=(e,t,s)=>$o(void 0,void 0,void 0,function*(){const r=yield Io(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield zn(()=>Promise.resolve().then(()=>ia),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,n=(null==s?void 0:s.statusCode)||r+"";t(new Ro(zo(s),r,n))}).catch(e=>{t(new Ao(zo(e),e))}):t(new Ao(zo(e),e))}),Fo=(e,t,s,r)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(n.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n.body=JSON.stringify(r)):n.body=r,(null==t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s)):n};function Wo(e,t,s,r,n,a){return $o(this,void 0,void 0,function*(){return new Promise((o,i)=>{e(s,Fo(t,r,n,a)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Bo(e,i,r))})})}function Ho(e,t,s,r){return $o(this,void 0,void 0,function*(){return Wo(e,"GET",t,s,r)})}function Vo(e,t,s,r,n){return $o(this,void 0,void 0,function*(){return Wo(e,"POST",t,r,n,s)})}function Go(e,t,s,r,n){return $o(this,void 0,void 0,function*(){return Wo(e,"PUT",t,r,n,s)})}function qo(e,t,s,r,n){return $o(this,void 0,void 0,function*(){return Wo(e,"DELETE",t,r,n,s)})}var Ko=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};const Zo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yo{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Do(r)}uploadOrUpdate(e,t,s,r){return Ko(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},Jo),r);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const i=a.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),i&&n.append("metadata",this.encodeMetadata(i)),n.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(n=s,n.append("cacheControl",a.cacheControl),i&&n.append("metadata",this.encodeMetadata(i))):(n=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,i&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null==r?void 0:r.headers)&&(o=Object.assign(Object.assign({},o),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?Go:Vo)(this.fetch,`${this.url}/object/${c}`,n,Object.assign({headers:o},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(Mo(n))return{data:null,error:n};throw n}})}upload(e,t,s){return Ko(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Ko(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Jo.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield Go(this.fetch,o.toString(),e,{headers:a})).Key},error:null}}catch(i){if(Mo(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,t){return Ko(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const n=yield Vo(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new To("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(Mo(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ko(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ko(this,void 0,void 0,function*(){try{return{data:yield Vo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Mo(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Ko(this,void 0,void 0,function*(){try{return{data:{path:(yield Vo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Mo(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Ko(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=yield Vo(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(r){if(Mo(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Ko(this,void 0,void 0,function*(){try{const r=yield Vo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(r){if(Mo(r))return{data:null,error:r};throw r}})}download(e,t){return Ko(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),n=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Ho(this.fetch,`${this.url}/${s}/${t}${n}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(Mo(a))return{data:null,error:a};throw a}})}info(e){return Ko(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ho(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Uo(e),error:null}}catch(s){if(Mo(s))return{data:null,error:s};throw s}})}exists(e){return Ko(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return $o(this,void 0,void 0,function*(){return Wo(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Mo(s)&&s instanceof Ao){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],n=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&r.push(n);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&r.push(o);let i=r.join("&");return""!==i&&(i=`?${i}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${i}`)}}}remove(e){return Ko(this,void 0,void 0,function*(){try{return{data:yield qo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Mo(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ko(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Zo),t),{prefix:e||""});return{data:yield Vo(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Mo(r))return{data:null,error:r};throw r}})}listV2(e,t){return Ko(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Vo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(Mo(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Xo={"X-Client-Info":"storage-js/2.11.0"};var Qo=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};class ei{constructor(e,t={},s,r){const n=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},Xo),t),this.fetch=Do(s)}listBuckets(){return Qo(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Mo(e))return{data:null,error:e};throw e}})}getBucket(e){return Qo(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Mo(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qo(this,void 0,void 0,function*(){try{return{data:yield Vo(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Mo(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Qo(this,void 0,void 0,function*(){try{return{data:yield Go(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Mo(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Qo(this,void 0,void 0,function*(){try{return{data:yield Vo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Mo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qo(this,void 0,void 0,function*(){try{return{data:yield qo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Mo(t))return{data:null,error:t};throw t}})}}class ti extends ei{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Yo(this.url,this.headers,e,this.fetch)}}let si="";si="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ri={headers:{"X-Client-Info":`supabase-js-${si}/2.55.0`}},ni={schema:"public"},ai={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oi={};var ii=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};const li=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?ra:fetch),(...e)=>t(...e)})(s),n="undefined"==typeof Headers?na:Headers;return(s,a)=>ii(void 0,void 0,void 0,function*(){var o;const i=null!==(o=yield t())&&void 0!==o?o:e;let l=new n(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${i}`),r(s,Object.assign(Object.assign({},a),{headers:l}))})};var ci=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};const di="2.71.1",ui=3e4,hi=9e4,pi={"X-Client-Info":`gotrue-js/${di}`},mi="X-Supabase-Api-Version",gi={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},fi=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class vi extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function xi(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class bi extends vi{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class yi extends vi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wi extends vi{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class ji extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ki extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ni extends wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Si extends wi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _i extends wi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ci extends wi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ei(e){return xi(e)&&"AuthRetryableFetchError"===e.name}class Pi extends wi{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Li extends wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ti=" \t\n\r=".split(""),Mi=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ti.length;t+=1)e[Ti[t].charCodeAt(0)]=-2;for(let t=0;t<Oi.length;t+=1)e[Oi[t].charCodeAt(0)]=t;return e})();function Ri(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Oi[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Oi[e]),t.queuedBits-=6}}function Ai(e,t,s){const r=Mi[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ii(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let o=0;o<e.length;o+=1)Ai(e.charCodeAt(o),n,a);return t.join("")}function Di(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Ui(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)Ai(e.charCodeAt(n),s,r);return new Uint8Array(t)}function $i(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Di(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function zi(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Ri(e,s,r)),Ri(null,s,r),t.join("")}const Bi=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Fi={tested:!1,writable:!1},Wi=()=>{if(!Bi())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(px){return!1}if(Fi.tested)return Fi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fi.tested=!0,Fi.writable=!0}catch(px){Fi.tested=!0,Fi.writable=!1}return Fi.writable};const Hi=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zn(async()=>{const{default:e}=await Promise.resolve().then(()=>ia);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Vi=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Gi=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},qi=async(e,t)=>{await e.removeItem(t)};class Ki{constructor(){this.promise=new Ki.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Zi(e){const t=e.split(".");if(3!==t.length)throw new Li("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!fi.test(t[s]))throw new Li("JWT not in base64url format");return{header:JSON.parse(Ii(t[0])),payload:JSON.parse(Ii(t[1])),signature:Ui(t[2]),raw:{header:t[0],payload:t[1]}}}function Ji(e){return("0"+e.toString(16)).substr(-2)}async function Yi(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xi(e,t,s=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Ji).join("")}();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Vi(e,`${t}-code-verifier`,n);const a=await Yi(r);return[a,r===a?"plain":"s256"]}Ki.promiseConstructor=Promise;const Qi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const el=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tl(e){if(!el.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sl(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rl(e){return JSON.parse(JSON.stringify(e))}const nl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),al=[502,503,504];async function ol(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Ci(nl(e),0);if(al.includes(e.status))throw new Ci(nl(e),e.status);let r,n;try{r=await e.json()}catch(px){throw new yi(nl(px),px)}const a=function(e){const t=e.headers.get(mi);if(!t)return null;if(!t.match(Qi))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(px){return null}}(e);if(a&&a.getTime()>=gi.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?n=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new Pi(nl(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new ji}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Pi(nl(r),e.status,r.weak_password.reasons);throw new bi(nl(r),e.status||500,n)}async function il(e,t,s,r){var n;const a=Object.assign({},null==r?void 0:r.headers);a[mi]||(a[mi]=gi.name),(null==r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const o=null!==(n=null==r?void 0:r.query)&&void 0!==n?n:{};(null==r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const i=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,s,r,n,a){const o=((e,t,s,r)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))})(t,r,n,a);let i;try{i=await e(s,Object.assign({},o))}catch(px){throw console.error(px),new Ci(nl(px),0)}i.ok||await ol(i);if(null==r?void 0:r.noResolveJson)return i;try{return await i.json()}catch(px){await ol(px)}}(e,t,s+i,{headers:a,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function ll(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function cl(e){const t=ll(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function dl(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ul(e){return{data:e,error:null}}function hl(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a}=e,o=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a},user:Object.assign({},o)},error:null}}function pl(e){return e}const ml=["global","local","others"];class gl{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Hi(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ml[0]){if(ml.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ml.join(", ")}`);try{return await il(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(xi(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await il(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:dl})}catch(s){if(xi(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await il(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:hl,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(xi(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await il(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:dl})}catch(t){if(xi(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,n,a,o,i;try{const l={nextPage:null,lastPage:0,total:0},c=await il(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(n=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==n?n:""},xform:pl});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(i=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(xi(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){tl(e);try{return await il(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:dl})}catch(t){if(xi(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){tl(e);try{return await il(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:dl})}catch(s){if(xi(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){tl(e);try{return await il(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:dl})}catch(s){if(xi(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){tl(e.userId);try{const{data:t,error:s}=await il(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(xi(t))return{data:null,error:t};throw t}}async _deleteFactor(e){tl(e.userId),tl(e.id);try{return{data:await il(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xi(t))return{data:null,error:t};throw t}}}function fl(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const vl=!!(globalThis&&Wi()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class xl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class bl extends xl{}async function yl(e,t,s){vl&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),vl&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw vl&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new bl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vl)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(px){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",px)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}vl&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{vl&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(px){"undefined"!=typeof self&&(self.globalThis=self)}}();const wl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function jl(e,t,s){return await s()}const kl={};class Nl{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Nl.nextInstanceID,Nl.nextInstanceID+=1,this.instanceID>0&&Bi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},wl),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new gl({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Hi(r.fetch),this.lock=r.lock||jl,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Bi()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=yl:this.lock=jl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Wi()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fl(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=fl(this.memoryStorage)),Bi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(px){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",px)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=kl[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){kl[this.storageKey]=Object.assign(Object.assign({},kl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=kl[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){kl[this.storageKey]=Object.assign(Object.assign({},kl[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${di}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(px){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Bi()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:n}=await this._getSessionFromURL(t,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return xi(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xi(t)?{error:t}:{error:new yi("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const n=await il(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ll}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const i=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(n){if(xi(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,s,r;try{let n;if("email"in e){const{email:s,password:r,options:a}=e;let o=null,i=null;"pkce"===this.flowType&&([o,i]=await Xi(this.storage,this.storageKey)),n=await il(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:o,code_challenge_method:i},xform:ll})}else{if(!("phone"in e))throw new Ni("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:o}=e;n=await il(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(r=null==o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:ll})}}const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const i=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(n){if(xi(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:n}=e;t=await il(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:cl})}else{if(!("phone"in e))throw new Ni("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:n}=e;t=await il(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:cl})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new ki}}catch(t){if(xi(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,n,a,o,i,l,c,d,u,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:u,wallet:h,statement:g,options:f}=e;let v;if(Bi())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const x=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==f?void 0:f.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(r=null===(s=null==f?void 0:f.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(n=null==f?void 0:f.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(a=null==f?void 0:f.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(o=null==f?void 0:f.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(i=null==f?void 0:f.signInWithSolana)||void 0===i?void 0:i.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null==f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:s}=await il(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:zi(m)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ll});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new ki}}catch(g){if(xi(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await Gi(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:n}=await il(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ll});if(await qi(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new ki}}catch(n){if(xi(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:n,nonce:a}=e,o=await il(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ll}),{data:i,error:l}=o;return l?{data:{user:null,session:null},error:l}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:l}):{data:{user:null,session:null},error:new ki}}catch(t){if(xi(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,n,a;try{if("email"in e){const{email:r,options:n}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Xi(this.storage,this.storageKey));const{error:i}=await il(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:i}=await il(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(a=null==s?void 0:s.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:i}}throw new Ni("You must provide either an email or phone number.")}catch(o){if(xi(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let r,n;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:a,error:o}=await il(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:r,xform:ll});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const i=a.session,l=a.user;return(null==i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(r){if(xi(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let n=null,a=null;return"pkce"===this.flowType&&([n,a]=await Xi(this.storage,this.storageKey)),await il(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:ul})}catch(n){if(xi(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ji;const{error:r}=await il(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(xi(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:n}=e,{error:a}=await il(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:s,type:r,options:n}=e,{data:a,error:o}=await il(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new Ni("You must provide either an email or phone number and a type")}catch(t){if(xi(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(px){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(px){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Gi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<hi;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await Gi(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=sl()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await il(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dl}):await this._useSession(async e=>{var t,s,r;const{data:n,error:a}=e;if(a)throw a;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await il(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:dl}):{data:{user:null},error:new ji}})}catch(t){if(xi(t))return function(e){return xi(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await qi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:n}=s;if(n)throw n;if(!r.session)throw new ji;const a=r.session;let o=null,i=null;"pkce"===this.flowType&&null!=e.email&&([o,i]=await Xi(this.storage,this.storageKey));const{data:l,error:c}=await il(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:i}),jwt:a.access_token,xform:dl});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(xi(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ji;const t=Date.now()/1e3;let s=t,r=!0,n=null;const{payload:a}=Zi(e.access_token);if(a.exp&&(s=a.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(xi(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:n}=t;if(n)throw n;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new ji;const{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(xi(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Bi())throw new Si("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Si(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new _i("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Si("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _i("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:n,refresh_token:a,expires_in:o,expires_at:i,token_type:l}=e;if(!(n&&o&&a&&l))throw new Si("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let u=c+d;i&&(u=parseInt(i));const h=u-c;1e3*h<=ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:m,error:g}=await this._getUser(n);if(g)throw g;const f={provider_token:s,provider_refresh_token:r,access_token:n,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(s){if(xi(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Gi(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:n}=t;if(n)return{error:n};const a=null===(s=r.session)||void 0===s?void 0:s.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return xi(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await qi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:n}=t;if(n)throw n;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(n){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=await Xi(this.storage,this.storageKey,!0));try{return await il(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(xi(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(xi(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,n,a,o;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await il(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(a=i.session)||void 0===a?void 0:a.access_token)&&void 0!==o?o:void 0})});if(r)throw r;return Bi()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(xi(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:n,error:a}=t;if(a)throw a;return await il(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(t){if(xi(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await il(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ll})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ei(t)&&Date.now()+s-n<ui},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await s(n);if(!r(n,null,t))return void e(t)}catch(px){if(!r(n,px))return void t(px)}})()}))}catch(n){if(this._debug(t,"error",n),xi(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Bi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Gi(this.storage,this.storageKey);if(n&&this.userStorage){let t=await Gi(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await Vi(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:sl()}else if(n&&!n.user&&!n.user){const e=await Gi(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(n.user=e.user,await qi(this.storage,this.storageKey+"-user"),await Vi(this.storage,this.storageKey,n)):n.user=sl()}if(this._debug(s,"session from storage",n),!this._isValidSession(n))return this._debug(s,"session is not valid"),void(null!==n&&await this._removeSession());const a=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<hi;if(this._debug(s,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ei(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null==e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(s,"error",n),void console.error(n)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ji;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ki;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new ji;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(n){if(this._debug(r,"error",n),xi(n)){const e={session:null,error:n};return Ei(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],n=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(px){r.push(px)}});if(await Promise.all(n),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await Vi(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=rl(e);await Vi(this.storage,this.storageKey,r)}else{const e=rl(t);await Vi(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await qi(this.storage,this.storageKey),await qi(this.storage,this.storageKey+"-code-verifier"),await qi(this.storage,this.storageKey+"-user"),this.userStorage&&await qi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bi()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(px){console.error("removing visibilitychange callback failed",px)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ui);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-e)/ui);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(px){console.error("Auto refresh tick failed with error. This is likely a transient error.",px)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(px){if(!(px.isAcquireTimeout||px instanceof xl))throw px;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bi()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await Xi(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;return n?{data:null,error:n}:await il(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(xi(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:i,error:l}=await il(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==i?void 0:i.totp)||void 0===r?void 0:r.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})})}catch(t){if(xi(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:o}=await il(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(xi(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:n}=t;return n?{data:null,error:n}:await il(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(xi(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:n}=e;if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Zi(r.access_token);let o=null;a.aal&&(o=a.aal);let i=o;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(i="aal2");return{data:{currentLevel:o,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:n,error:a}=await il(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,s=n.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:n,signature:a,raw:{header:o,payload:i}}=Zi(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:n,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,a,$i(`${o}.${i}`))))throw new Li("Invalid JWT signature");return{data:{claims:n,header:r,signature:a},error:null}}catch(s){if(xi(s))return{data:null,error:s};throw s}}}Nl.nextInstanceID=0;const Sl=Nl;class _l extends Sl{constructor(e){super(e)}}var Cl=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(px){a(px)}}function i(e){try{l(r.throw(e))}catch(px){a(px)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,i)}l((r=r.apply(e,t||[])).next())})};class El{constructor(e,t,s){var r,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=(i=e).endsWith("/")?i:i+"/";var i;const l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:n,auth:a,realtime:o,global:i}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},u),i),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==i?void 0:i.headers)&&void 0!==r?r:{})}),accessToken:()=>ci(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:ni,realtime:oi,auth:Object.assign(Object.assign({},ai),{storageKey:c}),global:ri});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(n=d.global.headers)&&void 0!==n?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=li(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Da(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ti(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Kn(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Cl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:n,flowType:a,lock:o,debug:i},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _l({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:a,lock:o,debug:i,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Oo(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pl=new El("https://bpomacnqaqzgeuahhlka.supabase.co","",Ll);var Ll;const Ol=(()=>{if("undefined"==typeof window)return"https://api.host.krib.ae/api";return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:8000/api":"https://api.host.krib.ae/api"})(),Tl=qe.createContext(null);class Ml extends Error{constructor(e,t){super(t),this.status=e,this.name="APIError"}}async function Rl(e,t={}){const{data:{session:s}}=await Pl.auth.getSession(),r=null==s?void 0:s.access_token,n={...t,headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers}},a=`${Ol}${e}`,o=await fetch(a,n);if(!o.ok){const e=await o.json().catch(()=>({message:"Unknown error"}));throw new Ml(o.status,e.message||`HTTP ${o.status}`)}return o.json()}function Al({children:t}){const[s,r]=qe.useState(null),[n,a]=qe.useState(!0),[o,i]=qe.useState([]),[l,c]=qe.useState([]),[d,u]=qe.useState(null);async function h(){var e;try{const{data:{session:s}}=await Pl.auth.getSession();if(null==s?void 0:s.user){r({id:s.user.id,email:s.user.email||"",name:(null==(e=s.user.user_metadata)?void 0:e.full_name)||s.user.email||"User",created_at:s.user.created_at}),console.log("User authenticated with Supabase:",s.user);try{await Promise.all([p(),m()]),console.log("User data loaded successfully")}catch(t){console.error("Error loading user data:",t)}}else console.log("No Supabase session found")}catch(s){console.error("Get current user error:",s),localStorage.removeItem("auth_token")}}async function p(){try{const e=await Rl("/properties");i(e)}catch(e){console.error("Load properties error:",e)}}async function m(){try{const e=await Rl("/bookings");c(e)}catch(e){console.error("Load bookings error:",e)}}qe.useEffect(()=>{!async function(){try{const{data:{session:e}}=await Pl.auth.getSession();(null==e?void 0:e.access_token)&&(localStorage.setItem("auth_token",e.access_token),await h())}catch(e){console.error("Auth initialization error:",e)}finally{a(!1)}Pl.auth.onAuthStateChange(async(e,t)=>{"SIGNED_IN"===e&&(null==t?void 0:t.access_token)?(localStorage.setItem("auth_token",t.access_token),await h()):"SIGNED_OUT"===e&&(localStorage.removeItem("auth_token"),r(null),i([]),c([]),u(null))})}()},[]);const g={user:s,isLoading:n,properties:o,bookings:l,analytics:d,signIn:async function(e,t){var s;try{a(!0);const{data:r,error:n}=await Pl.auth.signInWithPassword({email:e,password:t});if(n)throw n;(null==(s=r.session)?void 0:s.access_token)&&(localStorage.setItem("auth_token",r.session.access_token),await h())}catch(r){throw new Error(r.message||"Failed to sign in")}finally{a(!1)}},signUp:async function(e,t,s){var r;try{a(!0);const{data:n,error:o}=await Pl.auth.signUp({email:e,password:t,options:{data:{name:s}}});if(o)throw o;(null==(r=n.session)?void 0:r.access_token)&&(localStorage.setItem("auth_token",n.session.access_token),await Rl("/auth/signup",{method:"POST",body:JSON.stringify({name:s,email:e})}),await h())}catch(n){throw new Error(n.message||"Failed to sign up")}finally{a(!1)}},signInWithGoogle:async function(){try{console.log("Starting Google OAuth..."),a(!0);const{data:e,error:t}=await Pl.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(console.log("Google OAuth response:",{data:e,error:t}),t)throw console.error("Google OAuth error:",t),t;console.log("Google OAuth initiated successfully")}catch(e){throw console.error("Google sign-in error:",e),a(!1),new Error(e.message||"Failed to sign in with Google")}},signOut:async function(){try{await Pl.auth.signOut(),localStorage.removeItem("auth_token"),r(null),i([]),c([]),u(null),window.location.href="/auth"}catch(e){throw console.error("Sign out error:",e),e}},apiCall:async function(e,t="GET",s){return Rl(e,{method:t,...s&&{body:JSON.stringify(s)}})},createProperty:async function(e){const t=await Rl("/properties",{method:"POST",body:JSON.stringify(e)});return i(e=>[t,...e]),t},updateProperty:async function(e,t){const s=await Rl(`/properties/${e}`,{method:"PUT",body:JSON.stringify(t)});return i(t=>t.map(t=>t.id===e?s:t)),s},deleteProperty:async function(e){await Rl(`/properties/${e}`,{method:"DELETE"}),i(t=>t.filter(t=>t.id!==e))},loadProperties:p,generateAIDescription:async function(e){const t={property_data:e,use_anthropic:!1};console.log("Sending AI description request:",t);const s=await Rl("/properties/ai/generate-description",{method:"POST",body:JSON.stringify(t)});return console.log("AI description response:",s),s.description},loadBookings:m,updateBooking:async function(e,t){const s=await Rl(`/bookings/${e}`,{method:"PUT",body:JSON.stringify(t)});return c(t=>t.map(t=>t.id===e?s:t)),s},getAnalytics:async function(){try{const e=await Rl("/analytics");return u(e),e}catch(e){throw console.error("Get analytics error:",e),e}},getFinancialSummary:async function(e="30days"){try{return await Rl(`/financials/summary?period=${e}`)}catch(t){throw console.error("Get financial summary error:",t),t}},getBankAccounts:async function(){try{return await Rl("/financials/bank-accounts")}catch(e){throw console.error("Get bank accounts error:",e),e}},addBankAccount:async function(e){try{return await Rl("/financials/bank-accounts",{method:"POST",body:JSON.stringify(e)})}catch(t){throw console.error("Add bank account error:",t),t}},requestPayout:async function(e){try{return await Rl("/financials/payouts/request",{method:"POST",body:JSON.stringify({amount:e})})}catch(t){throw console.error("Request payout error:",t),t}},getTransactions:async function(e=50){try{return await Rl(`/financials/transactions?limit=${e}`)}catch(t){throw console.error("Get transactions error:",t),t}},updatePayoutSettings:async function(e){try{return await Rl("/financials/payout-settings",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update payout settings error:",t),t}},getUserProfile:async function(){try{return await Rl("/users/profile")}catch(e){throw console.error("Get user profile error:",e),e}},updateUserProfile:async function(e){try{const t=await Rl("/users/profile",{method:"PUT",body:JSON.stringify(e)});return r(t),t}catch(t){throw console.error("Update user profile error:",t),t}},updateUserSettings:async function(e){try{await Rl("/users/settings",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update user settings error:",t),t}},changePassword:async function(e,t,s){try{await Rl("/users/change-password",{method:"POST",body:JSON.stringify({current_password:e,new_password:t,confirm_password:s})})}catch(r){throw console.error("Change password error:",r),r}},getUserNotifications:async function(){try{return await Rl("/users/notifications")}catch(e){throw console.error("Get user notifications error:",e),e}},updateUserNotifications:async function(e){try{await Rl("/users/notifications",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update user notifications error:",t),t}},getUAEEmirates:async function(){try{return await Rl("/locations/emirates")}catch(e){throw console.error("Get UAE emirates error:",e),e}},getEmirateAreas:async function(e){try{return await Rl(`/locations/emirates/${e}/areas`)}catch(t){throw console.error("Get emirate areas error:",t),t}},getPopularLocations:async function(){try{return await Rl("/locations/popular")}catch(e){throw console.error("Get popular locations error:",e),e}},searchLocations:async function(e){try{return await Rl(`/locations/search?q=${encodeURIComponent(e)}`)}catch(t){throw console.error("Search locations error:",t),t}},validateLocation:async function(e,t){try{const s=new URLSearchParams({emirate:e});return t&&s.append("area",t),await Rl(`/locations/validate?${s.toString()}`)}catch(s){throw console.error("Validate location error:",s),s}},getUAEAmenities:async function(){try{return await Rl("/locations/amenities")}catch(e){throw console.error("Get UAE amenities error:",e),e}},getUAEPropertyTypes:async function(){try{return await Rl("/locations/property-types")}catch(e){throw console.error("Get UAE property types error:",e),e}},createStripeAccount:async function(){try{return(await Rl("/v1/stripe/host/create-account",{method:"POST",body:JSON.stringify({country:"AE",email:(null==s?void 0:s.email)||"",business_type:"company"})})).data}catch(e){throw console.error("Create Stripe account error:",e),e}},getStripeOnboardingLink:async function(){try{return(await Rl("/v1/stripe/host/onboarding-link",{method:"POST"})).data}catch(e){throw console.error("Get Stripe onboarding link error:",e),e}},getStripeAccountStatus:async function(){try{return(await Rl("/v1/stripe/host/account-status")).data}catch(e){throw console.error("Get Stripe account status error:",e),e}},getStripeDashboardLink:async function(){try{return(await Rl("/v1/stripe/host/dashboard-link",{method:"POST"})).data}catch(e){throw console.error("Get Stripe dashboard link error:",e),e}},getHostPayouts:async function(){try{return(await Rl("/v1/payouts/host-payouts")).data}catch(e){throw console.error("Get host payouts error:",e),e}},checkSuperhostEligibility:async function(){try{return await Rl("/superhost/eligibility")}catch(e){throw console.error("Check superhost eligibility error:",e),e}},getSuperhostStatus:async function(){try{return await Rl("/superhost/status")}catch(e){throw console.error("Get superhost status error:",e),e}},requestSuperhostVerification:async function(e){try{return await Rl("/superhost/request",{method:"POST",body:JSON.stringify({request_message:e})})}catch(t){throw console.error("Request superhost verification error:",t),t}}};return e.jsx(Tl.Provider,{value:g,children:t})}function Il(){const e=qe.useContext(Tl);if(!e)throw new Error("useApp must be used within an AppProvider");return e}function Dl({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:wr("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function Ul({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:wr("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function $l({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:wr("leading-none",t),...s})}function zl({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:wr("text-muted-foreground",t),...s})}function Bl({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:wr("px-6 [&:last-child]:pb-6",t),...s})}const Fl="/assets/krib-logo-BqldiSXI.svg";function Wl(){const t=os();return e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:"url(/assets/dubai-hero-bg-CsHj2d9q.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#f8f9fa"},children:e.jsx("div",{className:"absolute inset-0 bg-black/20"})}),e.jsxs("nav",{className:"relative z-30 flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:Fl,alt:"Krib AI Logo",className:"h-10 w-auto filter drop-shadow-lg"}),e.jsxs("span",{className:"ml-3 text-2xl font-bold text-white drop-shadow-lg",children:["Krib ",e.jsx("span",{className:"text-krib-lime",children:"AI"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(kr,{variant:"ghost",onClick:()=>t("/auth"),className:"text-white hover:bg-white/20 hover:text-white border border-white/30 backdrop-blur-sm",children:"Sign In"}),e.jsx(kr,{onClick:()=>t("/auth"),className:"bg-krib-lime hover:bg-krib-lime-dark text-krib-black font-semibold px-6 shadow-lg",children:"Get Started"})]})]}),e.jsx("div",{className:"relative z-20 flex items-center justify-center min-h-[calc(100vh-120px)]",children:e.jsx("div",{className:"container mx-auto px-6 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 hero-text-shadow",children:["Smart Real Estate",e.jsx("br",{}),e.jsx("span",{className:"text-krib-lime hero-text-shadow",children:"Powered by AI"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-8 hero-text-shadow",children:"Revolutionizing property management with intelligent automation"}),e.jsx("p",{className:"text-lg text-white/80 mb-12 leading-relaxed hero-text-shadow max-w-3xl mx-auto",children:"From smart pricing to automated tenant screening, Krib AI transforms how you manage properties in the UAE market."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[e.jsx(kr,{size:"lg",onClick:()=>t("/auth"),className:"bg-krib-lime hover:bg-krib-lime-dark text-krib-black font-semibold text-lg px-8 py-4 shadow-xl",children:"Start Free Trial"}),e.jsx(kr,{variant:"outline",size:"lg",onClick:()=>t("/auth"),className:"border-white text-white hover:bg-white hover:text-krib-black text-lg px-8 py-4 backdrop-blur-sm",children:"Watch Demo"})]})]})})}),e.jsx("div",{className:"relative z-20 py-16 bg-white/10 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4 hero-text-shadow",children:"Why Choose Krib AI?"}),e.jsx("p",{className:"text-lg text-white/80 max-w-2xl mx-auto hero-text-shadow",children:"Experience the future of property management with our cutting-edge AI technology"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[e.jsxs(Dl,{className:"p-8 text-center bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-krib-lime rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(S,{className:"w-8 h-8 text-krib-black"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Smart Automation"}),e.jsx("p",{className:"text-white/80",children:"Automate repetitive tasks and focus on growing your portfolio"})]}),e.jsxs(Dl,{className:"p-8 text-center bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-krib-lime rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"w-8 h-8 text-krib-black"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"UAE Market Expert"}),e.jsx("p",{className:"text-white/80",children:"Built specifically for the UAE real estate market dynamics"})]}),e.jsxs(Dl,{className:"p-8 text-center bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-krib-lime rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(C,{className:"w-8 h-8 text-krib-black"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Save Time"}),e.jsx("p",{className:"text-white/80",children:"Reduce property management time by up to 70% with AI"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4 hero-text-shadow",children:"Ready to Transform Your Property Business?"}),e.jsx(kr,{size:"lg",onClick:()=>t("/auth"),className:"bg-krib-lime hover:bg-krib-lime-dark text-krib-black font-semibold text-lg px-8 py-4 shadow-xl",children:"Get Started Today"})]})]})})]})}var Hl="Tabs",[Vl,Gl]=u(Hl,[P]),ql=P(),[Kl,Zl]=Vl(Hl),Jl=qe.forwardRef((t,r)=>{const{__scopeTabs:n,value:a,onValueChange:o,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=t,h=E(c),[g,f]=m({prop:a,onChange:o,defaultProp:i??"",caller:Hl});return e.jsx(Kl,{scope:n,baseId:p(),value:g,onValueChange:f,orientation:l,dir:h,activationMode:d,children:e.jsx(s.div,{dir:h,"data-orientation":l,...u,ref:r})})});Jl.displayName=Hl;var Yl="TabsList",Xl=qe.forwardRef((t,r)=>{const{__scopeTabs:n,loop:a=!0,...o}=t,i=Zl(Yl,n),l=ql(n);return e.jsx(L,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:e.jsx(s.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:r})})});Xl.displayName=Yl;var Ql="TabsTrigger",ec=qe.forwardRef((t,r)=>{const{__scopeTabs:n,value:a,disabled:o=!1,...i}=t,l=Zl(Ql,n),c=ql(n),d=rc(l.baseId,a),u=nc(l.baseId,a),h=a===l.value;return e.jsx(O,{asChild:!0,...c,focusable:!o,active:h,children:e.jsx(s.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...i,ref:r,onMouseDown:x(t.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:x(t.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:x(t.onFocus,()=>{const e="manual"!==l.activationMode;h||o||!e||l.onValueChange(a)})})})});ec.displayName=Ql;var tc="TabsContent",sc=qe.forwardRef((t,r)=>{const{__scopeTabs:n,value:a,forceMount:o,children:i,...l}=t,c=Zl(tc,n),d=rc(c.baseId,a),u=nc(c.baseId,a),h=a===c.value,p=qe.useRef(h);return qe.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),e.jsx(b,{present:o||h,children:({present:n})=>e.jsx(s.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!n,id:u,tabIndex:0,...l,ref:r,style:{...t.style,animationDuration:p.current?"0s":void 0},children:n&&i})})});function rc(e,t){return`${e}-trigger-${t}`}function nc(e,t){return`${e}-content-${t}`}sc.displayName=tc;var ac=Jl,oc=Xl,ic=ec,lc=sc;function cc({className:t,...s}){return e.jsx(ac,{"data-slot":"tabs",className:wr("flex flex-col gap-2",t),...s})}function dc({className:t,...s}){return e.jsx(oc,{"data-slot":"tabs-list",className:wr("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function uc({className:t,...s}){return e.jsx(ic,{"data-slot":"tabs-trigger",className:wr("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-4 py-2 text-sm font-semibold whitespace-nowrap transition-all focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","text-muted-foreground hover:text-foreground hover:bg-accent/50","data-[state=active]:bg-card data-[state=active]:text-foreground data-[state=active]:shadow-sm data-[state=active]:border-border","dark:data-[state=active]:bg-card dark:data-[state=active]:text-foreground dark:data-[state=active]:border-border",t),...s})}function hc({className:t,...s}){return e.jsx(lc,{"data-slot":"tabs-content",className:wr("flex-1 outline-none",t),...s})}function pc(){const{signIn:t,signUp:s,signInWithGoogle:r,isLoading:n}=Il(),[a,o]=qe.useState(!1),[i,l]=qe.useState(!1),[c,d]=qe.useState(""),[u,h]=qe.useState("signin"),[p,m]=qe.useState({email:"",password:""}),[g,f]=qe.useState({name:"",email:"",password:"",confirmPassword:""});return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})}):e.jsxs("div",{className:"min-h-screen bauhaus-auth-background flex",children:[e.jsx("div",{className:"bauhaus-grid-overlay"}),e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 xl:w-3/5 relative bauhaus-left-panel",children:[e.jsx("div",{className:"bauhaus-red-square"}),e.jsxs("div",{className:"bauhaus-text-block",children:[e.jsx("div",{className:"bauhaus-title",children:"KRIB"}),e.jsx("div",{className:"bauhaus-subtitle",children:"AI PROPERTY MANAGEMENT"}),e.jsx("div",{className:"bauhaus-line"}),e.jsxs("div",{className:"bauhaus-tagline",children:["FORM FOLLOWS",e.jsx("br",{}),"FUNCTION"]})]}),e.jsx("div",{className:"bauhaus-circle"}),e.jsx("div",{className:"bauhaus-triangle"}),e.jsx("div",{className:"bauhaus-small-square"}),e.jsxs("div",{className:"bauhaus-grid-numbers",children:[e.jsx("span",{className:"bauhaus-number",children:"01"}),e.jsx("span",{className:"bauhaus-number",children:"02"}),e.jsx("span",{className:"bauhaus-number",children:"03"})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 xl:w-2/5 flex items-center justify-center p-8 bauhaus-form-area",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"bauhaus-form-header",children:[e.jsxs("div",{className:"bauhaus-logo-section",children:[e.jsx("div",{className:"bauhaus-logo-square",children:e.jsx("img",{src:Fl,alt:"Krib",className:"h-8 w-8"})}),e.jsx("div",{className:"bauhaus-system-text",children:"SYSTEM"})]}),e.jsx("h1",{className:"bauhaus-main-title",children:"ACCESS"}),e.jsx("div",{className:"bauhaus-red-line"})]}),e.jsxs("div",{className:"bauhaus-mode-selector",children:[e.jsxs("div",{className:"bauhaus-tabs",children:[e.jsx("button",{onClick:()=>h("signin"),className:"bauhaus-tab "+("signin"===u?"bauhaus-tab-active":""),children:"SIGN IN"}),e.jsx("button",{onClick:()=>h("signup"),className:"bauhaus-tab "+("signup"===u?"bauhaus-tab-active":""),children:"REGISTER"})]}),e.jsx("div",{className:"bauhaus-tab-indicator"})]}),c&&e.jsxs("div",{className:"bauhaus-error",children:[e.jsx("div",{className:"bauhaus-error-symbol",children:"!"}),e.jsx("div",{className:"bauhaus-error-text",children:c})]}),e.jsxs(cc,{value:u,onValueChange:h,className:"bauhaus-form-container",children:[e.jsxs("div",{className:"bauhaus-separator",children:[e.jsx("div",{className:"bauhaus-separator-line"}),e.jsx("div",{className:"bauhaus-separator-text",children:"AUTHENTICATION"}),e.jsx("div",{className:"bauhaus-separator-line"})]}),e.jsx(hc,{value:"signin",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),d("");try{await t(p.email,p.password)}catch(s){d("An error occurred during sign in. Please try again.")}finally{o(!1)}},className:"bauhaus-form",children:[e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"01"}),e.jsx("span",{children:"EMAIL"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(T,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signin-email",type:"email",placeholder:"your.email@domain.com",className:"bauhaus-input",value:p.email,onChange:e=>m(t=>({...t,email:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"02"}),e.jsx("span",{children:"PASSWORD"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(M,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signin-password",type:i?"text":"password",placeholder:"",className:"bauhaus-input",value:p.password,onChange:e=>m(t=>({...t,password:e.target.value})),required:!0}),e.jsx("button",{type:"button",className:"bauhaus-input-toggle",onClick:()=>l(!i),children:i?e.jsx(R,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsx("div",{className:"bauhaus-action-section",children:e.jsxs("button",{type:"submit",className:"bauhaus-primary-button",disabled:a,children:[e.jsx("span",{className:"bauhaus-button-text",children:a?"AUTHENTICATING":"ACCESS SYSTEM"}),e.jsx(I,{className:"bauhaus-button-icon"}),e.jsx("div",{className:"bauhaus-button-bg"})]})})]})}),e.jsx(hc,{value:"signup",children:e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o(!0),d(""),g.password!==g.confirmPassword)return d("Passwords do not match."),void o(!1);if(g.password.length<6)return d("Password must be at least 6 characters long."),void o(!1);try{await s(g.email,g.password,g.name)}catch(t){d("An error occurred during sign up. Please try again.")}finally{o(!1)}},className:"bauhaus-form",children:[e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"01"}),e.jsx("span",{children:"FULL NAME"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(D,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-name",type:"text",placeholder:"john.doe",className:"bauhaus-input",value:g.name,onChange:e=>f(t=>({...t,name:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"02"}),e.jsx("span",{children:"EMAIL"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(T,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-email",type:"email",placeholder:"john.doe@company.com",className:"bauhaus-input",value:g.email,onChange:e=>f(t=>({...t,email:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"03"}),e.jsx("span",{children:"PASSWORD"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(M,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-password",type:i?"text":"password",placeholder:"",className:"bauhaus-input",value:g.password,onChange:e=>f(t=>({...t,password:e.target.value})),required:!0}),e.jsx("button",{type:"button",className:"bauhaus-input-toggle",onClick:()=>l(!i),children:i?e.jsx(R,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"04"}),e.jsx("span",{children:"CONFIRM"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(M,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-confirm-password",type:i?"text":"password",placeholder:"",className:"bauhaus-input",value:g.confirmPassword,onChange:e=>f(t=>({...t,confirmPassword:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsx("div",{className:"bauhaus-action-section",children:e.jsxs("button",{type:"submit",className:"bauhaus-primary-button",disabled:a,children:[e.jsx("span",{className:"bauhaus-button-text",children:a?"CREATING ACCOUNT":"CREATE ACCOUNT"}),e.jsx(I,{className:"bauhaus-button-icon"}),e.jsx("div",{className:"bauhaus-button-bg"})]})})]})})]}),e.jsxs("div",{className:"bauhaus-alternative-access",children:[e.jsxs("div",{className:"bauhaus-separator",children:[e.jsx("div",{className:"bauhaus-separator-line"}),e.jsx("div",{className:"bauhaus-separator-text",children:"OR"}),e.jsx("div",{className:"bauhaus-separator-line"})]}),e.jsxs("button",{onClick:async()=>{o(!0),d("");try{await r()}catch(e){e.message.includes("Google authentication is not properly configured")?d("Google authentication needs to be configured in your Supabase project. Please see the setup instructions below."):d("An error occurred during Google sign-in. Please try again.")}finally{o(!1)}},disabled:a,className:"bauhaus-google-button",children:[e.jsx("div",{className:"bauhaus-google-icon",children:e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),e.jsx("span",{className:"bauhaus-google-text",children:a?"CONNECTING...":"GOOGLE ACCESS"})]})]}),c.includes("Google authentication needs to be configured")&&e.jsxs("div",{className:"bauhaus-debug-info",children:[e.jsx("div",{className:"bauhaus-debug-title",children:"CONFIGURATION REQUIRED"}),e.jsx("div",{className:"bauhaus-debug-text",children:"Configure Google OAuth in Supabase Dashboard"})]})]})})]})}function mc(){const t=os(),[s,r]=qe.useState(!0);return qe.useEffect(()=>{const e=setTimeout(async()=>{var e;try{0,r(!0);const{data:s,error:n}=await Pl.auth.getSession();if(n)return console.error("[Auth] Callback error:",n),void t("/auth?error="+encodeURIComponent(n.message));if(null==(e=s.session)?void 0:e.user)setTimeout(()=>{t("/dashboard",{replace:!0})},500);else{0;const e=new URLSearchParams(window.location.hash.substring(1));if(e.get("access_token")){const{data:e,error:s}=await Pl.auth.getSession();if(null==e?void 0:e.session)return void t("/dashboard",{replace:!0})}t("/auth",{replace:!0})}}catch(s){console.error("[Auth] Callback error:",s),t("/auth?error="+encodeURIComponent("Authentication failed"),{replace:!0})}finally{r(!1)}},100);return()=>clearTimeout(e)},[t]),e.jsx("div",{className:"min-h-screen flex items-center justify-center krib-auth-real-estate-background",children:e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-krib-lime border-t-transparent mx-auto mb-6"}),e.jsx("p",{className:"text-white text-lg font-semibold hero-text-shadow",children:s?"Completing authentication...":"Redirecting to dashboard..."}),e.jsx("p",{className:"text-white/70 text-sm mt-2 hero-text-shadow",children:"Please wait while we sign you in"})]})})}const gc=[{id:"overview",title:"Overview",icon:U,description:"Dashboard overview"},{id:"properties",title:"My Properties",icon:$,description:"Manage your listings"},{id:"add-property",title:"Add Property",icon:z,description:"AI-powered listing creation"},{id:"analytics",title:"Analytics",icon:B,description:"Performance insights"},{id:"bookings",title:"Bookings",icon:F,description:"Manage reservations"},{id:"financials",title:"Financials",icon:W,description:"Earnings & payouts"},{id:"superhost",title:"Superhost",icon:H,description:"Verification status"},{id:"messages",title:"Messages",icon:V,description:"Guest communications"},{id:"reviews",title:"Reviews",icon:G,description:"Guest feedback"},{id:"settings",title:"Settings",icon:q,description:"Account preferences"}];function fc({activeSection:t,onSectionChange:s}){const{user:r,signOut:n}=Il();return e.jsxs(En,{className:"krib-sidebar",children:[e.jsx(Pn,{className:"krib-sidebar-header border-b border-sidebar-border p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl krib-logo-container",children:e.jsx("img",{src:Fl,alt:"Krib",className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-sidebar-foreground bg-gradient-to-r from-krib-gray-dark to-krib-black bg-clip-text",children:"Krib"}),e.jsx("p",{className:"text-sm text-sidebar-foreground/70 font-medium",children:"Property Dashboard"})]})]})}),e.jsx(On,{children:e.jsxs(Tn,{children:[e.jsx(Mn,{className:"krib-sidebar-group-label",children:"Navigation"}),e.jsx(Rn,{children:e.jsx(An,{className:"krib-sidebar-menu",children:gc.map(r=>e.jsx(In,{children:e.jsxs(Un,{onClick:()=>s(r.id),isActive:t===r.id,tooltip:r.description,className:"transition-all duration-300 krib-sidebar-item "+(t===r.id?"krib-sidebar-active":""),children:[e.jsx(r.icon,{className:"h-4 w-4"}),e.jsx("span",{children:r.title})]})},r.id))})})]})}),e.jsx(Ln,{className:"border-t border-sidebar-border p-4 krib-sidebar-header",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-white/50 border border-krib-lime/10",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-krib-lime/20 to-krib-lime-light/10",children:e.jsx(D,{className:"h-4 w-4 text-krib-gray-dark"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:(null==r?void 0:r.name)||"User"}),e.jsx("p",{className:"text-xs text-sidebar-foreground/70 truncate",children:null==r?void 0:r.email})]})]}),e.jsxs(kr,{variant:"ghost",size:"sm",onClick:n,className:"w-full justify-start text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-red-50 transition-all duration-200",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})})]})}function vc(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>({...t,...s(e)[`__scope${r}`]}),{});return qe.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var xc=Symbol.for("react.lazy"),bc=Ke[" use ".trim().toString()];function yc(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===xc&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function wc(t){const s=jc(t),r=qe.forwardRef((t,r)=>{let{children:n,...a}=t;yc(n)&&"function"==typeof bc&&(n=bc(n._payload));const o=qe.Children.toArray(n),i=o.find(Nc);if(i){const t=i.props.children,n=o.map(e=>e===i?qe.Children.count(t)>1?qe.Children.only(null):qe.isValidElement(t)?t.props.children:null:e);return e.jsx(s,{...a,ref:r,children:qe.isValidElement(t)?qe.cloneElement(t,void 0,n):null})}return e.jsx(s,{...a,ref:r,children:n})});return r.displayName=`${t}.Slot`,r}function jc(e){const t=qe.forwardRef((e,t)=>{let{children:s,...r}=e;if(yc(s)&&"function"==typeof bc&&(s=bc(s._payload)),qe.isValidElement(s)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),n=function(e,t){const s={...t};for(const r in t){const n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{const t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]={...n,...a}:"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==qe.Fragment&&(n.ref=t?Z(t,e):e),qe.cloneElement(s,n)}return qe.Children.count(s)>1?qe.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kc=Symbol("radix.slottable");function Nc(e){return qe.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===kc}var Sc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,s)=>{const r=wc(`Primitive.${s}`),n=qe.forwardRef((t,n)=>{const{asChild:a,...o}=t,i=a?r:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(i,{...o,ref:n})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),_c="Progress",Cc=100,[Ec,Pc]=function(t,s=[]){let r=[];const n=()=>{const e=r.map(e=>qe.createContext(e));return function(s){const r=(null==s?void 0:s[t])||e;return qe.useMemo(()=>({[`__scope${t}`]:{...s,[t]:r}}),[s,r])}};return n.scopeName=t,[function(s,n){const a=qe.createContext(n);a.displayName=s+"Context";const o=r.length;r=[...r,n];const i=s=>{var r;const{scope:n,children:i,...l}=s,c=(null==(r=null==n?void 0:n[t])?void 0:r[o])||a,d=qe.useMemo(()=>l,Object.values(l));return e.jsx(c.Provider,{value:d,children:i})};return i.displayName=s+"Provider",[i,function(e,r){var i;const l=(null==(i=null==r?void 0:r[t])?void 0:i[o])||a,c=qe.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${e}\` must be used within \`${s}\``)}]},vc(n,...s)]}(_c),[Lc,Oc]=Ec(_c),Tc=qe.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=Ac,...i}=t;!a&&0!==a||Uc(a)||console.error(`Invalid prop \`max\` of value \`${`${a}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const l=Uc(a)?a:Cc;null===n||$c(n,l)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const c=$c(n,l)?n:null,d=Dc(c)?o(c,l):void 0;return e.jsx(Lc,{scope:r,value:c,max:l,children:e.jsx(Sc.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Dc(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Ic(c,l),"data-value":c??void 0,"data-max":l,...i,ref:s})})});Tc.displayName=_c;var Mc="ProgressIndicator",Rc=qe.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=Oc(Mc,r);return e.jsx(Sc.div,{"data-state":Ic(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});function Ac(e,t){return`${Math.round(e/t*100)}%`}function Ic(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Dc(e){return"number"==typeof e}function Uc(e){return Dc(e)&&!isNaN(e)&&e>0}function $c(e,t){return Dc(e)&&!isNaN(e)&&e<=t&&e>=0}Rc.displayName=Mc;var zc=Tc,Bc=Rc;const Fc=qe.forwardRef(({className:t,value:s,...r},n)=>e.jsx(zc,{ref:n,className:wr("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(Bc,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Fc.displayName=zc.displayName;const Wc=Es("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Hc({className:s,variant:r,asChild:n=!1,...a}){const o=n?t:"span";return e.jsx(o,{"data-slot":"badge",className:wr(Wc({variant:r}),s),...a})}function Vc(){const{properties:t,bookings:s,analytics:r,getAnalytics:n,loadProperties:a,loadBookings:o}=Il(),i=os();qe.useEffect(()=>{(async()=>{await Promise.all([a(),o(),n()])})()},[]);const l=t.reduce((e,t)=>e+(t.total_revenue||0),0),c=t.reduce((e,t)=>e+(t.booking_count||0),0),d=t.length>0?t.reduce((e,t)=>e+(t.rating||0),0)/t.length:0,u=(()=>{if(0===t.length)return 0;const e=new Date((new Date).getTime()-2592e6),r=s.filter(t=>new Date(t.created_at)>=e&&"confirmed"===t.status);if(0===r.length)return 0;const n=r.reduce((e,t)=>e+t.nights,0),a=30*t.length;return a>0?Math.round(n/a*100):0})(),h=[{title:"Total Properties",value:t.length.toString(),change:t.length>0?`${t.length} active`:"No properties yet",icon:$,color:"text-krib-lime"},{title:"Total Revenue",value:`$${l.toLocaleString()}`,change:l>0?"From confirmed bookings":"No revenue yet",icon:W,color:"text-green-600"},{title:"Total Bookings",value:c.toString(),change:c>0?`${c} confirmed`:"No bookings yet",icon:F,color:"text-purple-600"},{title:"Occupancy Rate",value:`${u}%`,change:u>0?"Last 30 days":"No bookings to calculate",icon:J,color:"text-orange-600"}],p=s.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,3),m=t.sort((e,t)=>(t.total_revenue||0)-(e.total_revenue||0)).slice(0,3);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your rental properties."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:h.map(t=>e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.change})]})]},t.title))}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Recent Bookings"}),e.jsx(zl,{children:"Latest reservations for your properties"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"space-y-4",children:p.length>0?p.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:t.property_title||"Property"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.guest_name,"  ",new Date(t.check_in).toLocaleDateString()," - ",new Date(t.check_out).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",t.total_amount]}),e.jsx(Hc,{variant:"confirmed"===t.status?"default":"secondary",children:t.status})]})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No bookings yet"})})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Top Performing Properties"}),e.jsx(zl,{children:"Your best properties by revenue"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"space-y-4",children:m.length>0?m.map(t=>{const s=t.booking_count>0?Math.min(Math.round(t.booking_count/30*100),100):0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[t.booking_count||0," bookings"]}),e.jsx("span",{children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-3 w-3 fill-current text-yellow-500"}),e.jsx("span",{children:t.rating||0})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",t.total_revenue||0]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s,"% occupied"]})]})]}),e.jsx(Fc,{value:s,className:"h-2"})]},t.id)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No properties yet"})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Quick Actions"}),e.jsx(zl,{children:"Common tasks to manage your properties"})]}),e.jsxs(Bl,{className:"space-y-3",children:[e.jsx(kr,{className:"w-full justify-start h-auto p-4 text-left krib-button-primary group",onClick:()=>i("/add-property"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-black/10 mr-3 group-hover:bg-krib-black/20 transition-colors",children:e.jsx(z,{className:"h-5 w-5 text-krib-black"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Add New Property"}),e.jsx("div",{className:"text-sm opacity-80",children:"List a new rental property"})]})]})}),e.jsx(kr,{variant:"outline",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft border-krib-lime/20 group",onClick:()=>i("/analytics"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime/10 mr-3 group-hover:bg-krib-lime/20 transition-colors",children:e.jsx(B,{className:"h-5 w-5 text-krib-lime"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"View Analytics"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Performance insights"})]})]})}),e.jsx(kr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>i("/bookings"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime/5 mr-3 group-hover:bg-krib-lime/10 transition-colors",children:e.jsx(Y,{className:"h-5 w-5 text-krib-lime"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Manage Bookings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Reservations & guests"})]})]})}),e.jsx(kr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>i("/financials"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime-light/5 mr-3 group-hover:bg-krib-lime-light/10 transition-colors",children:e.jsx(X,{className:"h-5 w-5 text-krib-lime-light"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Financial Dashboard"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Earnings & payouts"})]})]})}),e.jsx(kr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>i("/settings"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-black/5 mr-3 group-hover:bg-krib-black/10 transition-colors",children:e.jsx(q,{className:"h-5 w-5 text-krib-black"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Settings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Account preferences"})]})]})})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Property Performance"}),e.jsx(zl,{children:"Overall portfolio metrics"})]}),e.jsxs(Bl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Portfolio Occupancy"}),e.jsxs("span",{children:[u,"%"]})]}),e.jsx(Fc,{value:u})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Active Properties"}),e.jsx("span",{children:t.filter(e=>"active"===e.status).length})]}),e.jsx(Fc,{value:t.length>0?t.filter(e=>"active"===e.status).length/t.length*100:0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Average Rating"}),e.jsxs("span",{children:[d.toFixed(1),"/5.0"]})]}),e.jsx(Fc,{value:d/5*100})]})]})]})]})]})}function Gc(e,[t,s]){return Math.min(s,Math.max(t,e))}function qc(e){const t=qe.useRef({value:e,previous:e});return qe.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Kc=[" ","Enter","ArrowUp","ArrowDown"],Zc=[" ","Enter"],Jc="Select",[Yc,Xc,Qc]=Q(Jc),[ed,td]=u(Jc,[Qc,h]),sd=h(),[rd,nd]=ed(Jc),[ad,od]=ed(Jc),id=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:v,form:x}=t,b=sd(s),[y,w]=qe.useState(null),[j,k]=qe.useState(null),[N,S]=qe.useState(!1),_=E(d),[C,P]=m({prop:n,defaultProp:a??!1,onChange:o,caller:Jc}),[L,O]=m({prop:i,defaultProp:l,onChange:c,caller:Jc}),T=qe.useRef(null),M=!y||(x||!!y.closest("form")),[R,A]=qe.useState(new Set),I=Array.from(R).map(e=>e.props.value).join(";");return e.jsx(g,{...b,children:e.jsxs(rd,{required:v,scope:s,trigger:y,onTriggerChange:w,valueNode:j,onValueNodeChange:k,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:p(),value:L,onValueChange:O,open:C,onOpenChange:P,dir:_,triggerPointerDownPosRef:T,disabled:f,children:[e.jsx(Yc.Provider,{scope:s,children:e.jsx(ad,{scope:t.__scopeSelect,onNativeOptionAdd:qe.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:qe.useCallback(e=>{A(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:r})}),M?e.jsxs(Vd,{"aria-hidden":!0,required:v,tabIndex:-1,name:u,autoComplete:h,value:L,onChange:e=>O(e.target.value),disabled:f,form:x,children:[void 0===L?e.jsx("option",{value:""}):null,Array.from(R)]},I):null]})})};id.displayName=Jc;var ld="SelectTrigger",cd=qe.forwardRef((t,r)=>{const{__scopeSelect:n,disabled:a=!1,...o}=t,i=sd(n),l=nd(ld,n),c=l.disabled||a,d=f(r,l.onTriggerChange),u=Xc(n),h=qe.useRef("touch"),[p,m,g]=qd(e=>{const t=u().filter(e=>!e.disabled),s=t.find(e=>e.value===l.value),r=Kd(t,e,s);void 0!==r&&l.onValueChange(r.value)}),b=e=>{c||(l.onOpenChange(!0),g()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return e.jsx(v,{asChild:!0,...i,children:e.jsx(s.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Gd(l.value)?"":void 0,...o,ref:d,onClick:x(o.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&b(e)}),onPointerDown:x(o.onPointerDown,e=>{h.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(b(e),e.preventDefault())}),onKeyDown:x(o.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Kc.includes(e.key)&&(b(),e.preventDefault())})})})});cd.displayName=ld;var dd="SelectValue",ud=qe.forwardRef((t,r)=>{const{__scopeSelect:n,className:a,style:o,children:i,placeholder:l="",...c}=t,d=nd(dd,n),{onValueNodeHasChildrenChange:u}=d,h=void 0!==i,p=f(r,d.onValueNodeChange);return ee(()=>{u(h)},[u,h]),e.jsx(s.span,{...c,ref:p,style:{pointerEvents:"none"},children:Gd(d.value)?e.jsx(e.Fragment,{children:l}):i})});ud.displayName=dd;var hd=qe.forwardRef((t,r)=>{const{__scopeSelect:n,children:a,...o}=t;return e.jsx(s.span,{"aria-hidden":!0,...o,ref:r,children:a||""})});hd.displayName="SelectIcon";var pd=t=>e.jsx(y,{asChild:!0,...t});pd.displayName="SelectPortal";var md="SelectContent",gd=qe.forwardRef((t,s)=>{const r=nd(md,t.__scopeSelect),[n,a]=qe.useState();if(ee(()=>{a(new DocumentFragment)},[]),!r.open){const s=n;return s?Ge.createPortal(e.jsx(vd,{scope:t.__scopeSelect,children:e.jsx(Yc.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),s):null}return e.jsx(yd,{...t,ref:s})});gd.displayName=md;var fd=10,[vd,xd]=ed(md),bd=ae("SelectContent.RemoveScroll"),yd=qe.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:b,...y}=t,w=nd(md,r),[k,N]=qe.useState(null),[S,_]=qe.useState(null),C=f(s,e=>N(e)),[E,P]=qe.useState(null),[L,O]=qe.useState(null),T=Xc(r),[M,R]=qe.useState(!1),A=qe.useRef(!1);qe.useEffect(()=>{if(k)return se(k)},[k]),re();const I=qe.useCallback(e=>{const[t,...s]=T().map(e=>e.ref.current),[r]=s.slice(-1),n=document.activeElement;for(const a of e){if(a===n)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&S&&(S.scrollTop=0),a===r&&S&&(S.scrollTop=S.scrollHeight),null==a||a.focus(),document.activeElement!==n)return}},[T,S]),D=qe.useCallback(()=>I([E,k]),[I,E,k]);qe.useEffect(()=>{M&&D()},[M,D]);const{onOpenChange:U,triggerPointerDownPosRef:$}=w;qe.useEffect(()=>{if(k){let e={x:0,y:0};const t=t=>{var s,r;e={x:Math.abs(Math.round(t.pageX)-((null==(s=$.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=$.current)?void 0:r.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():k.contains(s.target)||U(!1),document.removeEventListener("pointermove",t),$.current=null};return null!==$.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[k,U,$]),qe.useEffect(()=>{const e=()=>U(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[U]);const[z,B]=qd(e=>{const t=T().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=Kd(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),F=qe.useCallback((e,t,s)=>{const r=!A.current&&!s;(void 0!==w.value&&w.value===t||r)&&(P(e),r&&(A.current=!0))},[w.value]),W=qe.useCallback(()=>null==k?void 0:k.focus(),[k]),H=qe.useCallback((e,t,s)=>{const r=!A.current&&!s;(void 0!==w.value&&w.value===t||r)&&O(e)},[w.value]),V="popper"===n?jd:wd,G=V===jd?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:b}:{};return e.jsx(vd,{scope:r,content:k,viewport:S,onViewportChange:_,itemRefCallback:F,selectedItem:E,onItemLeave:W,itemTextRefCallback:H,focusSelectedItem:D,selectedItemText:L,position:n,isPositioned:M,searchRef:z,children:e.jsx(ne,{as:bd,allowPinchZoom:!0,children:e.jsx(oe,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:x(a,e=>{var t;null==(t=w.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:e.jsx(j,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:e.jsx(V,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault(),...y,...G,onPlaced:()=>R(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:x(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=T().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>I(t)),e.preventDefault()}})})})})})})});yd.displayName="SelectContentImpl";var wd=qe.forwardRef((t,r)=>{const{__scopeSelect:n,onPlaced:a,...o}=t,i=nd(md,n),l=xd(md,n),[c,d]=qe.useState(null),[u,h]=qe.useState(null),p=f(r,e=>h(e)),m=Xc(n),g=qe.useRef(!1),v=qe.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:y,focusSelectedItem:w}=l,j=qe.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&x&&b&&y){const e=i.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),r=y.getBoundingClientRect();if("rtl"!==i.dir){const n=r.left-t.left,a=s.left-n,o=e.left-a,i=e.width+o,l=Math.max(i,t.width),d=window.innerWidth-fd,u=Gc(a,[fd,Math.max(fd,d-l)]);c.style.minWidth=i+"px",c.style.left=u+"px"}else{const n=t.right-r.right,a=window.innerWidth-s.right-n,o=window.innerWidth-e.right-a,i=e.width+o,l=Math.max(i,t.width),d=window.innerWidth-fd,u=Gc(a,[fd,Math.max(fd,d-l)]);c.style.minWidth=i+"px",c.style.right=u+"px"}const n=m(),o=window.innerHeight-2*fd,l=x.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),p=parseInt(d.paddingTop,10),f=parseInt(d.borderBottomWidth,10),v=h+p+l+parseInt(d.paddingBottom,10)+f,w=Math.min(5*b.offsetHeight,v),j=window.getComputedStyle(x),k=parseInt(j.paddingTop,10),N=parseInt(j.paddingBottom,10),S=e.top+e.height/2-fd,_=o-S,C=b.offsetHeight/2,E=h+p+(b.offsetTop+C),P=v-E;if(E<=S){const e=n.length>0&&b===n[n.length-1].ref.current;c.style.bottom="0px";const t=u.clientHeight-x.offsetTop-x.offsetHeight,s=E+Math.max(_,C+(e?N:0)+t+f);c.style.height=s+"px"}else{const e=n.length>0&&b===n[0].ref.current;c.style.top="0px";const t=Math.max(S,h+x.offsetTop+(e?k:0)+C)+P;c.style.height=t+"px",x.scrollTop=E-S+x.offsetTop}c.style.margin=`${fd}px 0`,c.style.minHeight=w+"px",c.style.maxHeight=o+"px",null==a||a(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,c,u,x,b,y,i.dir,a]);ee(()=>j(),[j]);const[k,N]=qe.useState();ee(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const S=qe.useCallback(e=>{e&&!0===v.current&&(j(),null==w||w(),v.current=!1)},[j,w]);return e.jsx(kd,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:g,onScrollButtonChange:S,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(s.div,{...o,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});wd.displayName="SelectItemAlignedPosition";var jd=qe.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=fd,...o}=t,i=sd(r);return e.jsx(k,{...i,...o,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jd.displayName="SelectPopperPosition";var[kd,Nd]=ed(md,{}),Sd="SelectViewport",_d=qe.forwardRef((t,r)=>{const{__scopeSelect:n,nonce:a,...o}=t,i=xd(Sd,n),l=Nd(Sd,n),c=f(r,i.onViewportChange),d=qe.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Yc.Slot,{scope:n,children:e.jsx(s.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:x(o.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=l;if((null==r?void 0:r.current)&&s){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*fd,n=parseFloat(s.style.minHeight),a=parseFloat(s.style.height),o=Math.max(n,a);if(o<r){const n=o+e,a=Math.min(r,n),i=n-a;s.style.height=a+"px","0px"===s.style.bottom&&(t.scrollTop=i>0?i:0,s.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});_d.displayName=Sd;var Cd="SelectGroup",[Ed,Pd]=ed(Cd);qe.forwardRef((t,r)=>{const{__scopeSelect:n,...a}=t,o=p();return e.jsx(Ed,{scope:n,id:o,children:e.jsx(s.div,{role:"group","aria-labelledby":o,...a,ref:r})})}).displayName=Cd;var Ld="SelectLabel";qe.forwardRef((t,r)=>{const{__scopeSelect:n,...a}=t,o=Pd(Ld,n);return e.jsx(s.div,{id:o.id,...a,ref:r})}).displayName=Ld;var Od="SelectItem",[Td,Md]=ed(Od),Rd=qe.forwardRef((t,r)=>{const{__scopeSelect:n,value:a,disabled:o=!1,textValue:i,...l}=t,c=nd(Od,n),d=xd(Od,n),u=c.value===a,[h,m]=qe.useState(i??""),[g,v]=qe.useState(!1),b=f(r,e=>{var t;return null==(t=d.itemRefCallback)?void 0:t.call(d,e,a,o)}),y=p(),w=qe.useRef("touch"),j=()=>{o||(c.onValueChange(a),c.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Td,{scope:n,value:a,disabled:o,textId:y,isSelected:u,onItemTextChange:qe.useCallback(e=>{m(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:e.jsx(Yc.ItemSlot,{scope:n,value:a,disabled:o,textValue:h,children:e.jsx(s.div,{role:"option","aria-labelledby":y,"data-highlighted":g?"":void 0,"aria-selected":u&&g,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...l,ref:b,onFocus:x(l.onFocus,()=>v(!0)),onBlur:x(l.onBlur,()=>v(!1)),onClick:x(l.onClick,()=>{"mouse"!==w.current&&j()}),onPointerUp:x(l.onPointerUp,()=>{"mouse"===w.current&&j()}),onPointerDown:x(l.onPointerDown,e=>{w.current=e.pointerType}),onPointerMove:x(l.onPointerMove,e=>{var t;w.current=e.pointerType,o?null==(t=d.onItemLeave)||t.call(d):"mouse"===w.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:x(l.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=d.onItemLeave)||t.call(d))}),onKeyDown:x(l.onKeyDown,e=>{var t;""!==(null==(t=d.searchRef)?void 0:t.current)&&" "===e.key||(Zc.includes(e.key)&&j()," "===e.key&&e.preventDefault())})})})})});Rd.displayName=Od;var Ad="SelectItemText",Id=qe.forwardRef((t,r)=>{const{__scopeSelect:n,className:a,style:o,...i}=t,l=nd(Ad,n),c=xd(Ad,n),d=Md(Ad,n),u=od(Ad,n),[h,p]=qe.useState(null),m=f(r,e=>p(e),d.onItemTextChange,e=>{var t;return null==(t=c.itemTextRefCallback)?void 0:t.call(c,e,d.value,d.disabled)}),g=null==h?void 0:h.textContent,v=qe.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=u;return ee(()=>(x(v),()=>b(v)),[x,b,v]),e.jsxs(e.Fragment,{children:[e.jsx(s.span,{id:d.textId,...i,ref:m}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ge.createPortal(i.children,l.valueNode):null]})});Id.displayName=Ad;var Dd="SelectItemIndicator",Ud=qe.forwardRef((t,r)=>{const{__scopeSelect:n,...a}=t;return Md(Dd,n).isSelected?e.jsx(s.span,{"aria-hidden":!0,...a,ref:r}):null});Ud.displayName=Dd;var $d="SelectScrollUpButton",zd=qe.forwardRef((t,s)=>{const r=xd($d,t.__scopeSelect),n=Nd($d,t.__scopeSelect),[a,o]=qe.useState(!1),i=f(s,n.onScrollButtonChange);return ee(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;o(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?e.jsx(Wd,{...t,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});zd.displayName=$d;var Bd="SelectScrollDownButton",Fd=qe.forwardRef((t,s)=>{const r=xd(Bd,t.__scopeSelect),n=Nd(Bd,t.__scopeSelect),[a,o]=qe.useState(!1),i=f(s,n.onScrollButtonChange);return ee(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;o(s)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?e.jsx(Wd,{...t,ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Fd.displayName=Bd;var Wd=qe.forwardRef((t,r)=>{const{__scopeSelect:n,onAutoScroll:a,...o}=t,i=xd("SelectScrollButton",n),l=qe.useRef(null),c=Xc(n),d=qe.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return qe.useEffect(()=>()=>d(),[d]),ee(()=>{var e;const t=c().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[c]),e.jsx(s.div,{"aria-hidden":!0,...o,ref:r,style:{flexShrink:0,...o.style},onPointerDown:x(o.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(a,50))}),onPointerMove:x(o.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===l.current&&(l.current=window.setInterval(a,50))}),onPointerLeave:x(o.onPointerLeave,()=>{d()})})});qe.forwardRef((t,r)=>{const{__scopeSelect:n,...a}=t;return e.jsx(s.div,{"aria-hidden":!0,...a,ref:r})}).displayName="SelectSeparator";var Hd="SelectArrow";qe.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=sd(r),o=nd(Hd,r),i=xd(Hd,r);return o.open&&"popper"===i.position?e.jsx(w,{...a,...n,ref:s}):null}).displayName=Hd;var Vd=qe.forwardRef(({__scopeSelect:t,value:r,...n},a)=>{const o=qe.useRef(null),i=f(a,o),l=qc(r);return qe.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==r&&s){const t=new Event("change",{bubbles:!0});s.call(e,r),e.dispatchEvent(t)}},[l,r]),e.jsx(s.select,{...n,style:{...Dr,...n.style},ref:i,defaultValue:r})});function Gd(e){return""===e||void 0===e}function qd(e){const t=te(e),s=qe.useRef(""),r=qe.useRef(0),n=qe.useCallback(e=>{const n=s.current+e;t(n),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(n)},[t]),a=qe.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return qe.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,n,a]}function Kd(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=s?e.indexOf(s):-1;let a=(o=e,i=Math.max(n,0),o.map((e,t)=>o[(i+t)%o.length]));var o,i;1===r.length&&(a=a.filter(e=>e!==s));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}Vd.displayName="SelectBubbleInput";var Zd=id,Jd=cd,Yd=ud,Xd=hd,Qd=pd,eu=gd,tu=_d,su=Rd,ru=Id,nu=Ud,au=zd,ou=Fd;function iu({...t}){return e.jsx(Zd,{"data-slot":"select",...t})}function lu({...t}){return e.jsx(Yd,{"data-slot":"select-value",...t})}function cu({className:t,size:s="default",children:r,...n}){return e.jsxs(Jd,{"data-slot":"select-trigger","data-size":s,className:wr("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,e.jsx(Xd,{asChild:!0,children:e.jsx(ie,{className:"size-4 opacity-50"})})]})}function du({className:t,children:s,position:r="popper",...n}){return e.jsx(Qd,{children:e.jsxs(eu,{"data-slot":"select-content",className:wr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(hu,{}),e.jsx(tu,{className:wr("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(pu,{})]})})}function uu({className:t,children:s,...r}){return e.jsxs(su,{"data-slot":"select-item",className:wr("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(nu,{children:e.jsx(le,{className:"size-4"})})}),e.jsx(ru,{children:s})]})}function hu({className:t,...s}){return e.jsx(au,{"data-slot":"select-scroll-up-button",className:wr("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ce,{className:"size-4"})})}function pu({className:t,...s}){return e.jsx(ou,{"data-slot":"select-scroll-down-button",className:wr("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ie,{className:"size-4"})})}function mu({...t}){return e.jsx(r,{"data-slot":"dialog",...t})}function gu({...t}){return e.jsx(de,{"data-slot":"dialog-trigger",...t})}function fu({...t}){return e.jsx(c,{"data-slot":"dialog-portal",...t})}function vu({className:t,...s}){return e.jsx(d,{"data-slot":"dialog-overlay",className:wr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function xu({className:t,children:s,...r}){return e.jsxs(fu,{"data-slot":"dialog-portal",children:[e.jsx(vu,{}),e.jsxs(n,{"data-slot":"dialog-content",className:wr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[s,e.jsxs(a,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(o,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function bu({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:wr("flex flex-col gap-2 text-center sm:text-left",t),...s})}function yu({className:t,...s}){return e.jsx(i,{"data-slot":"dialog-title",className:wr("text-lg leading-none font-semibold",t),...s})}function wu({className:t,...s}){return e.jsx(l,{"data-slot":"dialog-description",className:wr("text-muted-foreground text-sm",t),...s})}const ju=qe.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:wr("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));ju.displayName="Textarea";var ku=qe.forwardRef((t,r)=>e.jsx(s.label,{...t,ref:r,onMouseDown:e=>{var s;e.target.closest("button, input, select, textarea")||(null==(s=t.onMouseDown)||s.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));ku.displayName="Label";var Nu=ku;function Su({className:t,...s}){return e.jsx(Nu,{"data-slot":"label",className:wr("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function _u(t){const[s,r]=qe.useState(!1),{src:n,alt:a,style:o,className:i,...l}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${i??""}`,style:o,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...l,"data-original-url":n})})}):e.jsx("img",{src:n,alt:a,className:i,style:o,...l,onError:()=>{r(!0)}})}function Cu(){const{properties:t,loadProperties:s,deleteProperty:r,updateProperty:n}=Il(),[a,o]=qe.useState(""),[i,l]=qe.useState("all"),[c,d]=qe.useState(null),[u,h]=qe.useState(!1),[p,m]=qe.useState(!1),[g,f]=qe.useState({});qe.useEffect(()=>{s()},[]);const v=t.filter(e=>{const t=e.title.toLowerCase().includes(a.toLowerCase())||e.city.toLowerCase().includes(a.toLowerCase())||e.state.toLowerCase().includes(a.toLowerCase()),s="all"===i||e.status===i;return t&&s}),x=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Properties"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental properties and track their performance."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Nr,{placeholder:"Search properties...",value:a,onChange:e=>o(e.target.value),className:"pl-10"})]}),e.jsxs(iu,{value:i,onValueChange:l,children:[e.jsxs(cu,{className:"w-[180px]",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),e.jsx(lu,{placeholder:"Filter by status"})]}),e.jsxs(du,{children:[e.jsx(uu,{value:"all",children:"All Status"}),e.jsx(uu,{value:"active",children:"Active"}),e.jsx(uu,{value:"draft",children:"Draft"}),e.jsx(uu,{value:"inactive",children:"Inactive"}),e.jsx(uu,{value:"suspended",children:"Suspended"})]})]})]}),e.jsx("div",{className:"space-y-4",children:v.map(t=>e.jsx(Dl,{className:"p-6 krib-card krib-glow-hover",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"w-32 h-24 relative flex-shrink-0",children:[e.jsx(_u,{src:t.images&&t.images.length>0&&!t.images[0].startsWith("blob:")?t.images[0]:"/placeholder-property.jpg",alt:t.title,className:"object-cover w-full h-full rounded-lg"}),t.images&&t.images[0]&&t.images[0].startsWith("blob:")&&e.jsx("div",{className:"absolute bottom-1 left-1 bg-yellow-100 text-yellow-800 text-xs px-1 py-0.5 rounded text-[10px]",children:"Image Issue"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:t.title}),e.jsx(Hc,{className:x(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(pe,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:[t.city,", ",t.state]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.jsxs("span",{children:[t.bedrooms," bed"]}),e.jsxs("span",{children:[t.bathrooms," bath"]}),e.jsxs("span",{children:[t.max_guests," guests"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsxs("span",{className:"font-bold text-lg text-green-600",children:["$",t.price_per_night]}),e.jsx("span",{className:"text-muted-foreground text-sm ml-1",children:"/night"})]}),t.rating&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"ml-1 text-sm font-medium",children:t.rating})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs(kr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),h(!0)})(t),className:"h-8",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(kr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),f({title:e.title,description:e.description,price_per_night:e.price_per_night,bedrooms:e.bedrooms,bathrooms:e.bathrooms,max_guests:e.max_guests,status:e.status}),m(!0)})(t),className:"h-8",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(kr,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this property?"))try{await r(e)}catch(t){console.error("Failed to delete property:",t)}})(t.id),className:"h-8 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})})]})},t.id))}),0===v.length&&e.jsx(Dl,{className:"p-12 krib-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx($,{className:"h-16 w-16 mx-auto text-muted-foreground mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:0===t.length?"You haven't created any properties yet. Get started by adding your first property to begin managing your rentals!":"Try adjusting your search terms or filter criteria to find the properties you're looking for."}),0===t.length&&e.jsxs(kr,{size:"lg",className:"bg-primary hover:bg-primary/90",children:[e.jsx($,{className:"h-5 w-5 mr-2"}),"Add Your First Property"]})]})}),e.jsx(mu,{open:u,onOpenChange:h,children:e.jsxs(xu,{className:"max-w-2xl bg-white border shadow-lg",children:[e.jsx(bu,{className:"pb-4 border-b",children:e.jsx(yu,{className:"text-xl font-semibold text-gray-900",children:"Property Details"})}),c&&e.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Title"}),e.jsx("p",{className:"text-gray-900 mt-1",children:c.title})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(Hc,{className:x(c.status),children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900 mt-2 leading-relaxed",children:c.description||"No description provided"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Price per night"}),e.jsxs("p",{className:"text-green-600 font-bold text-lg mt-1",children:["$",c.price_per_night]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Bedrooms"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.bedrooms})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Bathrooms"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.bathrooms})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Max Guests"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.max_guests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Location"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:[c.city,", ",c.state]})]})]}),c.amenities&&c.amenities.length>0&&e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{className:"font-semibold text-gray-700",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.amenities.map((t,s)=>e.jsx(Hc,{variant:"secondary",className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:t},s))})]})]})]})}),e.jsx(mu,{open:p,onOpenChange:m,children:e.jsxs(xu,{className:"max-w-2xl bg-white border shadow-lg",children:[e.jsx(bu,{className:"pb-4 border-b",children:e.jsx(yu,{className:"text-xl font-semibold text-gray-900",children:"Edit Property"})}),e.jsxs("div",{className:"space-y-4 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-title",className:"font-semibold text-gray-700",children:"Title"}),e.jsx(Nr,{id:"edit-title",value:g.title||"",onChange:e=>f(t=>({...t,title:e.target.value})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-description",className:"font-semibold text-gray-700",children:"Description"}),e.jsx(ju,{id:"edit-description",value:g.description||"",onChange:e=>f(t=>({...t,description:e.target.value})),rows:3,className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-price",className:"font-semibold text-gray-700",children:"Price per night ($)"}),e.jsx(Nr,{id:"edit-price",type:"number",value:g.price_per_night||"",onChange:e=>f(t=>({...t,price_per_night:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-status",className:"font-semibold text-gray-700",children:"Status"}),e.jsxs(iu,{value:g.status||"",onValueChange:e=>f(t=>({...t,status:e})),children:[e.jsx(cu,{className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(lu,{placeholder:"Select status"})}),e.jsxs(du,{className:"bg-white border shadow-lg",children:[e.jsx(uu,{value:"draft",children:"Draft"}),e.jsx(uu,{value:"active",children:"Active"}),e.jsx(uu,{value:"inactive",children:"Inactive"}),e.jsx(uu,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-bedrooms",className:"font-semibold text-gray-700",children:"Bedrooms"}),e.jsx(Nr,{id:"edit-bedrooms",type:"number",min:"1",value:g.bedrooms||"",onChange:e=>f(t=>({...t,bedrooms:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-bathrooms",className:"font-semibold text-gray-700",children:"Bathrooms"}),e.jsx(Nr,{id:"edit-bathrooms",type:"number",min:"1",value:g.bathrooms||"",onChange:e=>f(t=>({...t,bathrooms:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Su,{htmlFor:"edit-max-guests",className:"font-semibold text-gray-700",children:"Max Guests"}),e.jsx(Nr,{id:"edit-max-guests",type:"number",min:"1",value:g.max_guests||"",onChange:e=>f(t=>({...t,max_guests:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t bg-white p-4 rounded-md",children:[e.jsx(kr,{variant:"outline",onClick:()=>m(!1),className:"px-6",children:"Cancel"}),e.jsx(kr,{onClick:async()=>{if(c)try{await n(c.id,g),m(!1),d(null),f({})}catch(e){console.error("Failed to update property:",e)}},className:"px-6 krib-button-primary",children:"Save Changes"})]})]})]})})]})}var Eu="Checkbox",[Pu,Lu]=u(Eu),[Ou,Tu]=Pu(Eu);function Mu(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=t,[p,g]=m({prop:r,defaultProp:a??!1,onChange:c,caller:Eu}),[f,v]=qe.useState(null),[x,b]=qe.useState(null),y=qe.useRef(!1),w=!f||(!!i||!!f.closest("form")),j={checked:p,disabled:o,setChecked:g,control:f,setControl:v,name:l,form:i,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:!Fu(a)&&a,isFormControl:w,bubbleInput:x,setBubbleInput:b};return e.jsx(Ou,{scope:s,...j,children:Bu(h)?h(j):n})}var Ru="CheckboxTrigger",Au=qe.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:n,...a},o)=>{const{control:i,value:l,disabled:c,checked:d,required:u,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:v}=Tu(Ru,t),b=f(o,h),y=qe.useRef(d);return qe.useEffect(()=>{const e=null==i?void 0:i.form;if(e){const t=()=>p(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,p]),e.jsx(s.button,{type:"button",role:"checkbox","aria-checked":Fu(d)?"mixed":d,"aria-required":u,"data-state":Wu(d),"data-disabled":c?"":void 0,disabled:c,value:l,...a,ref:b,onKeyDown:x(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:x(n,e=>{p(e=>!!Fu(e)||!e),v&&g&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})})});Au.displayName=Ru;var Iu=qe.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:d,form:u,...h}=t;return e.jsx(Mu,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:t})=>e.jsxs(e.Fragment,{children:[e.jsx(Au,{...h,ref:s,__scopeCheckbox:r}),t&&e.jsx(zu,{__scopeCheckbox:r})]})})});Iu.displayName=Eu;var Du="CheckboxIndicator",Uu=qe.forwardRef((t,r)=>{const{__scopeCheckbox:n,forceMount:a,...o}=t,i=Tu(Du,n);return e.jsx(b,{present:a||Fu(i.checked)||!0===i.checked,children:e.jsx(s.span,{"data-state":Wu(i.checked),"data-disabled":i.disabled?"":void 0,...o,ref:r,style:{pointerEvents:"none",...t.style}})})});Uu.displayName=Du;var $u="CheckboxBubbleInput",zu=qe.forwardRef(({__scopeCheckbox:t,...r},n)=>{const{control:a,hasConsumerStoppedPropagationRef:o,checked:i,defaultChecked:l,required:c,disabled:d,name:u,value:h,form:p,bubbleInput:m,setBubbleInput:g}=Tu($u,t),v=f(n,g),x=qc(i),b=fe(a);qe.useEffect(()=>{const e=m;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set,r=!o.current;if(x!==i&&s){const t=new Event("click",{bubbles:r});e.indeterminate=Fu(i),s.call(e,!Fu(i)&&i),e.dispatchEvent(t)}},[m,x,i,o]);const y=qe.useRef(!Fu(i)&&i);return e.jsx(s.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??y.current,required:c,disabled:d,name:u,value:h,form:p,...r,tabIndex:-1,ref:v,style:{...r.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Bu(e){return"function"==typeof e}function Fu(e){return"indeterminate"===e}function Wu(e){return Fu(e)?"indeterminate":e?"checked":"unchecked"}function Hu({className:t,...s}){return e.jsx(Iu,{"data-slot":"checkbox",className:wr("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Uu,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(le,{className:"size-3.5"})})})}zu.displayName=$u;const Vu=Es("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Gu({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:wr(Vu({variant:s}),t),...r})}function qu({className:t,...s}){return e.jsx("div",{"data-slot":"alert-title",className:wr("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function Ku({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:wr("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}async function Zu(e,t="properties"){const s=Array.from(e),r=s.map(e=>async function(e,t="properties"){try{const s=e.name.split(".").pop(),r=`${t}/${Math.random().toString(36).substring(2)}-${Date.now()}.${s}`;console.log("Uploading file:",e.name,"to path:",r);const{data:n,error:a}=await Pl.storage.from("krib_host").upload(r,e,{cacheControl:"3600",upsert:!1});if(a)return console.error("Upload error:",a),{success:!1,error:a.message};console.log("Upload successful:",n);const{data:o}=Pl.storage.from("krib_host").getPublicUrl(r);return o.publicUrl?(console.log("Generated public URL:",o.publicUrl),{success:!0,url:o.publicUrl}):{success:!1,error:"Failed to generate public URL"}}catch(s){return console.error("Unexpected upload error:",s),{success:!1,error:s.message||"Upload failed"}}}(e,t));try{return await Promise.all(r)}catch(n){return console.error("Multiple upload error:",n),s.map(()=>({success:!1,error:n.message||"Upload failed"}))}}function Ju(e){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yu(e){var t=function(e,t){if("object"!=Ju(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t);if("object"!=Ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ju(t)?t:t+""}function Xu(e,t,s){return(t=Yu(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Qu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eh,th;var sh=Qu(th?eh:(th=1,eh=function(e,t,s,r,n,a,o,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[s,r,n,a,o,i],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}})),rh=qe.createContext(null);function nh(e,t,s,r){var n,a,o={};return n=e,a=(e,n)=>{var a=s[n];a!==t[n]&&(o[n]=a,e(r,a))},Object.keys(n).forEach(e=>a(n[e],e)),o}function ah(e,t,s){var r,n,a,o=(r=s,n=function(s,r,n){return"function"==typeof e[n]&&s.push(google.maps.event.addListener(t,r,e[n])),s},a=[],Object.keys(r).reduce(function(e,t){return n(e,r[t],t)},a));return o}function oh(e){google.maps.event.removeListener(e)}function ih(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(oh)}function lh(e){var{updaterMap:t,eventMap:s,prevProps:r,nextProps:n,instance:a}=e,o=ah(n,a,s);return nh(t,r,n,a),o}var ch={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},dh={extraMapTypes(e,t){t.forEach(function(t,s){e.mapTypes.set(String(s),t)})},center(e,t){e.setCenter(t)},clickableIcons(e,t){e.setClickableIcons(t)},heading(e,t){e.setHeading(t)},mapTypeId(e,t){e.setMapTypeId(t)},options(e,t){e.setOptions(t)},streetView(e,t){e.setStreetView(t)},tilt(e,t){e.setTilt(t)},zoom(e,t){e.setZoom(t)}};qe.memo(function(t){var{children:s,options:r,id:n,mapContainerStyle:a,mapContainerClassName:o,center:i,onClick:l,onDblClick:c,onDrag:d,onDragEnd:u,onDragStart:h,onMouseMove:p,onMouseOut:m,onMouseOver:g,onMouseDown:f,onMouseUp:v,onRightClick:x,onCenterChanged:b,onLoad:y,onUnmount:w}=t,[j,k]=qe.useState(null),N=qe.useRef(null),[S,_]=qe.useState(null),[C,E]=qe.useState(null),[P,L]=qe.useState(null),[O,T]=qe.useState(null),[M,R]=qe.useState(null),[A,I]=qe.useState(null),[D,U]=qe.useState(null),[$,z]=qe.useState(null),[B,F]=qe.useState(null),[W,H]=qe.useState(null),[V,G]=qe.useState(null),[q,K]=qe.useState(null);return qe.useEffect(()=>{r&&null!==j&&j.setOptions(r)},[j,r]),qe.useEffect(()=>{null!==j&&void 0!==i&&j.setCenter(i)},[j,i]),qe.useEffect(()=>{j&&c&&(null!==C&&google.maps.event.removeListener(C),E(google.maps.event.addListener(j,"dblclick",c)))},[c]),qe.useEffect(()=>{j&&u&&(null!==P&&google.maps.event.removeListener(P),L(google.maps.event.addListener(j,"dragend",u)))},[u]),qe.useEffect(()=>{j&&h&&(null!==O&&google.maps.event.removeListener(O),T(google.maps.event.addListener(j,"dragstart",h)))},[h]),qe.useEffect(()=>{j&&f&&(null!==M&&google.maps.event.removeListener(M),R(google.maps.event.addListener(j,"mousedown",f)))},[f]),qe.useEffect(()=>{j&&p&&(null!==A&&google.maps.event.removeListener(A),I(google.maps.event.addListener(j,"mousemove",p)))},[p]),qe.useEffect(()=>{j&&m&&(null!==D&&google.maps.event.removeListener(D),U(google.maps.event.addListener(j,"mouseout",m)))},[m]),qe.useEffect(()=>{j&&g&&(null!==$&&google.maps.event.removeListener($),z(google.maps.event.addListener(j,"mouseover",g)))},[g]),qe.useEffect(()=>{j&&v&&(null!==B&&google.maps.event.removeListener(B),F(google.maps.event.addListener(j,"mouseup",v)))},[v]),qe.useEffect(()=>{j&&x&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(j,"rightclick",x)))},[x]),qe.useEffect(()=>{j&&l&&(null!==V&&google.maps.event.removeListener(V),G(google.maps.event.addListener(j,"click",l)))},[l]),qe.useEffect(()=>{j&&d&&(null!==q&&google.maps.event.removeListener(q),K(google.maps.event.addListener(j,"drag",d)))},[d]),qe.useEffect(()=>{j&&b&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(j,"center_changed",b)))},[l]),qe.useEffect(()=>{var e=null===N.current?null:new google.maps.Map(N.current,r);return k(e),null!==e&&y&&y(e),()=>{null!==e&&w&&w(e)}},[]),e.jsx("div",{id:n,ref:N,style:a,className:o,children:e.jsx(rh.Provider,{value:j,children:null!==j?s:null})})});class uh extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"state",{map:null}),Xu(this,"registeredEvents",[]),Xu(this,"mapRef",null),Xu(this,"getInstance",()=>null===this.mapRef?null:new google.maps.Map(this.mapRef,this.props.options)),Xu(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),Xu(this,"setMapCallback",()=>{null!==this.state.map&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Xu(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=lh({updaterMap:dh,eventMap:ch,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){null!==this.state.map&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:dh,eventMap:ch,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ih(this.registeredEvents))}render(){return e.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:e.jsx(rh.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})}}function hh(e,t,s,r,n,a,o){try{var i=e[a](o),l=i.value}catch(c){return void s(c)}i.done?t(l):Promise.resolve(l).then(r,n)}function ph(e){return function(){var t=this,s=arguments;return new Promise(function(r,n){var a=e.apply(t,s);function o(e){hh(a,r,n,o,i,"next",e)}function i(e){hh(a,r,n,o,i,"throw",e)}o(void 0)})}}function mh(e){var{googleMapsApiKey:t,googleMapsClientId:s,version:r="weekly",language:n,region:a,libraries:o,channel:i,mapIds:l,authReferrerPolicy:c,apiUrl:d="https://maps.googleapis.com"}=e,u=[];return sh(t&&s||!(t&&s),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?u.push("key=".concat(t)):s&&u.push("client=".concat(s)),r&&u.push("v=".concat(r)),n&&u.push("language=".concat(n)),a&&u.push("region=".concat(a)),o&&o.length&&u.push("libraries=".concat(o.sort().join(","))),i&&u.push("channel=".concat(i)),l&&l.length&&u.push("map_ids=".concat(l.join(","))),c&&u.push("auth_referrer_policy=".concat(c)),u.push("loading=async"),u.push("callback=initMap"),"".concat(d,"/maps/api/js?").concat(u.join("&"))}var gh="undefined"!=typeof document;function fh(e){var{url:t,id:s,nonce:r}=e;return gh?new Promise(function(e,n){var a=document.getElementById(s),o=window;if(a){var i=a.getAttribute("data-state");if(a.src===t&&"error"!==i){if("ready"===i)return e(s);var l=o.initMap,c=a.onerror;return o.initMap=function(){l&&l(),e(s)},void(a.onerror=function(e){c&&c(e),n(e)})}a.remove()}var d=document.createElement("script");d.type="text/javascript",d.src=t,d.id=s,d.async=!0,d.nonce=r||"",d.onerror=function(e){d.setAttribute("data-state","error"),n(e)},o.initMap=function(){d.setAttribute("data-state","ready"),e(s)},document.head.appendChild(d)}).catch(e=>{throw console.error("injectScript error: ",e),e}):Promise.reject(new Error("document is undefined"))}function vh(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function xh(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(s,r){return vh(s)||Reflect.apply(t,e,[s,r]),s};var s=e.appendChild.bind(e);e.appendChild=function(t){return vh(t)||Reflect.apply(s,e,[t]),t}}}var bh=!1;function yh(){return e.jsx("div",{children:"Loading..."})}var wh,jh={id:"script-loader",version:"weekly"};class kh extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"check",null),Xu(this,"state",{loaded:!1}),Xu(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Xu(this,"isCleaningUp",ph(function*(){return new Promise(function(e){if(bh){if(gh)var t=window.setInterval(function(){bh||(window.clearInterval(t),e())},1)}else e()})})),Xu(this,"cleanup",()=>{bh=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(e){return"string"==typeof e.src&&e.src.includes("maps.googleapis")}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}),Xu(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&xh(),sh(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id),fh({id:this.props.id,nonce:this.props.nonce,url:mh(this.props)}).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(e=>{this.props.onError&&this.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))})}),Xu(this,"getRef",e=>{this.check=e})}componentDidMount(){if(gh){if(window.google&&window.google.maps&&!bh)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch(function(e){console.error("Error at injecting script after cleaning up: ",e)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),gh&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(gh){this.cleanup();window.setTimeout(()=>{this.check||(delete window.google,bh=!1)},1),this.props.onUnmount&&this.props.onUnmount()}}render(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||e.jsx(yh,{})]})}}function Nh(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)s=a[r],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}Xu(kh,"defaultProps",jh);var Sh=["loadingElement","onLoad","onError","onUnmount","children"],_h=e.jsx(yh,{});function Ch(e,t,s,r){return new(s||(s=Promise))(function(t,n){function a(e){try{i(r.next(e))}catch(px){n(px)}}function o(e){try{i(r.throw(e))}catch(px){n(px)}}function i(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s(function(e){e(r)})).then(a,o)}i((r=r.apply(e,[])).next())})}function Eh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}qe.memo(function(e){var{loadingElement:t,onLoad:s,onError:r,onUnmount:n,children:a}=e,o=Nh(e,Sh),{isLoaded:i,loadError:l}=function(e){var{id:t=jh.id,version:s=jh.version,nonce:r,googleMapsApiKey:n,googleMapsClientId:a,language:o,region:i,libraries:l,preventGoogleFontsLoading:c,channel:d,mapIds:u,authReferrerPolicy:h,apiUrl:p="https://maps.googleapis.com"}=e,m=qe.useRef(!1),[g,f]=qe.useState(!1),[v,x]=qe.useState(void 0);qe.useEffect(function(){return m.current=!0,()=>{m.current=!1}},[]),qe.useEffect(function(){gh&&c&&xh()},[c]),qe.useEffect(function(){g&&sh(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[g]);var b=mh({version:s,googleMapsApiKey:n,googleMapsClientId:a,language:o,region:i,libraries:l,channel:d,mapIds:u,authReferrerPolicy:h,apiUrl:p});qe.useEffect(function(){function e(){m.current&&(f(!0),wh=b)}gh&&(window.google&&window.google.maps&&wh===b?e():fh({id:t,url:b,nonce:r}).then(e).catch(function(e){m.current&&x(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(n||"-",") or Client ID (").concat(a||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)}))},[t,b,r]);var y=qe.useRef(void 0);return qe.useEffect(function(){y.current&&l!==y.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),y.current=l},[l]),{isLoaded:g,loadError:v,url:b}}(o);return qe.useEffect(function(){i&&"function"==typeof s&&s()},[i,s]),qe.useEffect(function(){l&&"function"==typeof r&&r(l)},[l,r]),qe.useEffect(function(){return()=>{n&&n()}},[n]),i?a:t||_h}),"function"==typeof SuppressedError&&SuppressedError;var Ph,Lh,Oh=Eh(function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var r,n,a;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(n=r;0!==n--;)if(!e(t[n],s[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(s,a[n]))return!1;for(n=r;0!==n--;){var o=a[n];if(!e(t[o],s[o]))return!1}return!0}return t!=t&&s!=s}),Th="__googleMapsScriptId";(Lh=Ph||(Ph={}))[Lh.INITIALIZED=0]="INITIALIZED",Lh[Lh.LOADING=1]="LOADING",Lh[Lh.SUCCESS=2]="SUCCESS",Lh[Lh.FAILURE=3]="FAILURE";class Mh{constructor(e){var{apiKey:t,authReferrerPolicy:s,channel:r,client:n,id:a=Th,language:o,libraries:i=[],mapIds:l,nonce:c,region:d,retries:u=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=s,this.channel=r,this.client=n,this.id=a||Th,this.language=o,this.libraries=i,this.mapIds=l,this.nonce=c,this.region=d,this.retries=u,this.url=h,this.version=p,Mh.instance){if(!Oh(this.options,Mh.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(Mh.instance.options)));return Mh.instance}Mh.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Ph.FAILURE:this.done?Ph.SUCCESS:this.loading?Ph.LOADING:Ph.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(s=>{s?t(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))this.callback();else{var s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(e=>!s[e]&&delete s[e]),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{var t,s,r,n="The Google Maps JavaScript API",a="google",o="importLibrary",i="__ib__",l=document,c=window,d=(c=c[a]||(c[a]={})).maps||(c.maps={}),u=new Set,h=new URLSearchParams,p=()=>t||(t=new Promise((o,c)=>Ch(this,0,void 0,function*(){var p;for(r in yield s=l.createElement("script"),s.id=this.id,h.set("libraries",[...u]+""),e)h.set(r.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),e[r]);h.set("callback",a+".maps."+i),s.src=this.url+"?"+h,d[i]=o,s.onerror=()=>t=c(Error(n+" could not load.")),s.nonce=this.nonce||(null===(p=l.querySelector("script[nonce]"))||void 0===p?void 0:p.nonce)||"",l.head.append(s)})));d[o]?console.warn(n+" only loads once. Ignoring:",e):d[o]=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return u.add(e)&&p().then(()=>d[o](e,...s))}})(s);var r=this.libraries.map(e=>this.importLibrary(e));r.length||r.push(this.importLibrary("core")),Promise.all(r).then(()=>this.callback(),e=>{var t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)})}}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading=!0,this.setScript()}}}var Rh=["maps"];function Ah(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Ih(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ah(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ah(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var Dh={},Uh={options(e,t){e.setOptions(t)}};qe.memo(function(e){var{options:t,onLoad:s,onUnmount:r}=e,n=qe.useContext(rh),[a,o]=qe.useState(null);return qe.useEffect(()=>{null!==a&&a.setMap(n)},[n]),qe.useEffect(()=>{t&&null!==a&&a.setOptions(t)},[a,t]),qe.useEffect(()=>{var e=new google.maps.TrafficLayer(Ih(Ih({},t),{},{map:n}));return o(e),s&&s(e),()=>{null!==a&&(r&&r(a),a.setMap(null))}},[]),null});class $h extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"state",{trafficLayer:null}),Xu(this,"setTrafficLayerCallback",()=>{null!==this.state.trafficLayer&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Xu(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Ih(Ih({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:Uh,eventMap:Dh,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){null!==this.state.trafficLayer&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Uh,eventMap:Dh,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ih(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Xu($h,"contextType",rh),qe.memo(function(e){var{onLoad:t,onUnmount:s}=e,r=qe.useContext(rh),[n,a]=qe.useState(null);return qe.useEffect(()=>{null!==n&&n.setMap(r)},[r]),qe.useEffect(()=>{var e=new google.maps.BicyclingLayer;return a(e),e.setMap(r),t&&t(e),()=>{null!==e&&(s&&s(e),e.setMap(null))}},[]),null});class zh extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"state",{bicyclingLayer:null}),Xu(this,"setBicyclingLayerCallback",()=>{null!==this.state.bicyclingLayer&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Xu(zh,"contextType",rh),qe.memo(function(e){var{onLoad:t,onUnmount:s}=e,r=qe.useContext(rh),[n,a]=qe.useState(null);return qe.useEffect(()=>{null!==n&&n.setMap(r)},[r]),qe.useEffect(()=>{var e=new google.maps.TransitLayer;return a(e),e.setMap(r),t&&t(e),()=>{null!==n&&(s&&s(n),n.setMap(null))}},[]),null});class Bh extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"state",{transitLayer:null}),Xu(this,"setTransitLayerCallback",()=>{null!==this.state.transitLayer&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}function Fh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Wh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fh(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(Bh,"contextType",rh);var Hh={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Vh={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};qe.memo(function(e){var{options:t,drawingMode:s,onCircleComplete:r,onMarkerComplete:n,onOverlayComplete:a,onPolygonComplete:o,onPolylineComplete:i,onRectangleComplete:l,onLoad:c,onUnmount:d}=e,u=qe.useContext(rh),[h,p]=qe.useState(null),[m,g]=qe.useState(null),[f,v]=qe.useState(null),[x,b]=qe.useState(null),[y,w]=qe.useState(null),[j,k]=qe.useState(null),[N,S]=qe.useState(null);return qe.useEffect(()=>{null!==h&&h.setMap(u)},[u]),qe.useEffect(()=>{t&&null!==h&&h.setOptions(t)},[h,t]),qe.useEffect(()=>{null!==h&&h.setDrawingMode(null!=s?s:null)},[h,s]),qe.useEffect(()=>{h&&r&&(null!==m&&google.maps.event.removeListener(m),g(google.maps.event.addListener(h,"circlecomplete",r)))},[h,r]),qe.useEffect(()=>{h&&n&&(null!==f&&google.maps.event.removeListener(f),v(google.maps.event.addListener(h,"markercomplete",n)))},[h,n]),qe.useEffect(()=>{h&&a&&(null!==x&&google.maps.event.removeListener(x),b(google.maps.event.addListener(h,"overlaycomplete",a)))},[h,a]),qe.useEffect(()=>{h&&o&&(null!==y&&google.maps.event.removeListener(y),w(google.maps.event.addListener(h,"polygoncomplete",o)))},[h,o]),qe.useEffect(()=>{h&&i&&(null!==j&&google.maps.event.removeListener(j),k(google.maps.event.addListener(h,"polylinecomplete",i)))},[h,i]),qe.useEffect(()=>{h&&l&&(null!==N&&google.maps.event.removeListener(N),S(google.maps.event.addListener(h,"rectanglecomplete",l)))},[h,l]),qe.useEffect(()=>{sh(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Wh(Wh({},t),{},{map:u}));return s&&e.setDrawingMode(s),r&&g(google.maps.event.addListener(e,"circlecomplete",r)),n&&v(google.maps.event.addListener(e,"markercomplete",n)),a&&b(google.maps.event.addListener(e,"overlaycomplete",a)),o&&w(google.maps.event.addListener(e,"polygoncomplete",o)),i&&k(google.maps.event.addListener(e,"polylinecomplete",i)),l&&S(google.maps.event.addListener(e,"rectanglecomplete",l)),p(e),c&&c(e),()=>{null!==h&&(m&&google.maps.event.removeListener(m),f&&google.maps.event.removeListener(f),x&&google.maps.event.removeListener(x),y&&google.maps.event.removeListener(y),j&&google.maps.event.removeListener(j),N&&google.maps.event.removeListener(N),d&&d(h),h.setMap(null))}},[]),null});class Gh extends qe.PureComponent{constructor(e){super(e),Xu(this,"registeredEvents",[]),Xu(this,"state",{drawingManager:null}),Xu(this,"setDrawingManagerCallback",()=>{null!==this.state.drawingManager&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),sh(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Wh(Wh({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:Vh,eventMap:Hh,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){null!==this.state.drawingManager&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Vh,eventMap:Hh,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ih(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}function qh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Kh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qh(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qh(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(Gh,"contextType",rh);var Zh={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Jh={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},Yh={};qe.memo(function(t){var{position:s,options:r,clusterer:n,noClustererRedraw:a,children:o,draggable:i,visible:l,animation:c,clickable:d,cursor:u,icon:h,label:p,opacity:m,shape:g,title:f,zIndex:v,onClick:x,onDblClick:b,onDrag:y,onDragEnd:w,onDragStart:j,onMouseOut:k,onMouseOver:N,onMouseUp:S,onMouseDown:_,onRightClick:C,onClickableChanged:E,onCursorChanged:P,onAnimationChanged:L,onDraggableChanged:O,onFlatChanged:T,onIconChanged:M,onPositionChanged:R,onShapeChanged:A,onTitleChanged:I,onVisibleChanged:D,onZindexChanged:U,onLoad:$,onUnmount:z}=t,B=qe.useContext(rh),[F,W]=qe.useState(null),[H,V]=qe.useState(null),[G,q]=qe.useState(null),[K,Z]=qe.useState(null),[J,Y]=qe.useState(null),[X,Q]=qe.useState(null),[ee,te]=qe.useState(null),[se,re]=qe.useState(null),[ne,ae]=qe.useState(null),[oe,ie]=qe.useState(null),[le,ce]=qe.useState(null),[de,ue]=qe.useState(null),[he,pe]=qe.useState(null),[me,ge]=qe.useState(null),[fe,ve]=qe.useState(null),[xe,be]=qe.useState(null),[ye,we]=qe.useState(null),[je,ke]=qe.useState(null),[Ne,Se]=qe.useState(null),[_e,Ce]=qe.useState(null),[Ee,Pe]=qe.useState(null),[Le,Oe]=qe.useState(null);qe.useEffect(()=>{null!==F&&F.setMap(B)},[B]),qe.useEffect(()=>{void 0!==r&&null!==F&&F.setOptions(r)},[F,r]),qe.useEffect(()=>{void 0!==i&&null!==F&&F.setDraggable(i)},[F,i]),qe.useEffect(()=>{s&&null!==F&&F.setPosition(s)},[F,s]),qe.useEffect(()=>{void 0!==l&&null!==F&&F.setVisible(l)},[F,l]),qe.useEffect(()=>{null==F||F.setAnimation(c)},[F,c]),qe.useEffect(()=>{F&&void 0!==d&&F.setClickable(d)},[F,d]),qe.useEffect(()=>{F&&void 0!==u&&F.setCursor(u)},[F,u]),qe.useEffect(()=>{F&&void 0!==h&&F.setIcon(h)},[F,h]),qe.useEffect(()=>{F&&void 0!==p&&F.setLabel(p)},[F,p]),qe.useEffect(()=>{F&&void 0!==m&&F.setOpacity(m)},[F,m]),qe.useEffect(()=>{F&&void 0!==g&&F.setShape(g)},[F,g]),qe.useEffect(()=>{F&&void 0!==f&&F.setTitle(f)},[F,f]),qe.useEffect(()=>{F&&void 0!==v&&F.setZIndex(v)},[F,v]),qe.useEffect(()=>{F&&b&&(null!==H&&google.maps.event.removeListener(H),V(google.maps.event.addListener(F,"dblclick",b)))},[b]),qe.useEffect(()=>{F&&w&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(F,"dragend",w)))},[w]),qe.useEffect(()=>{F&&j&&(null!==K&&google.maps.event.removeListener(K),Z(google.maps.event.addListener(F,"dragstart",j)))},[j]),qe.useEffect(()=>{F&&_&&(null!==J&&google.maps.event.removeListener(J),Y(google.maps.event.addListener(F,"mousedown",_)))},[_]),qe.useEffect(()=>{F&&k&&(null!==X&&google.maps.event.removeListener(X),Q(google.maps.event.addListener(F,"mouseout",k)))},[k]),qe.useEffect(()=>{F&&N&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(F,"mouseover",N)))},[N]),qe.useEffect(()=>{F&&S&&(null!==se&&google.maps.event.removeListener(se),re(google.maps.event.addListener(F,"mouseup",S)))},[S]),qe.useEffect(()=>{F&&C&&(null!==ne&&google.maps.event.removeListener(ne),ae(google.maps.event.addListener(F,"rightclick",C)))},[C]),qe.useEffect(()=>{F&&x&&(null!==oe&&google.maps.event.removeListener(oe),ie(google.maps.event.addListener(F,"click",x)))},[x]),qe.useEffect(()=>{F&&y&&(null!==le&&google.maps.event.removeListener(le),ce(google.maps.event.addListener(F,"drag",y)))},[y]),qe.useEffect(()=>{F&&E&&(null!==de&&google.maps.event.removeListener(de),ue(google.maps.event.addListener(F,"clickable_changed",E)))},[E]),qe.useEffect(()=>{F&&P&&(null!==he&&google.maps.event.removeListener(he),pe(google.maps.event.addListener(F,"cursor_changed",P)))},[P]),qe.useEffect(()=>{F&&L&&(null!==me&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(F,"animation_changed",L)))},[L]),qe.useEffect(()=>{F&&O&&(null!==fe&&google.maps.event.removeListener(fe),ve(google.maps.event.addListener(F,"draggable_changed",O)))},[O]),qe.useEffect(()=>{F&&T&&(null!==xe&&google.maps.event.removeListener(xe),be(google.maps.event.addListener(F,"flat_changed",T)))},[T]),qe.useEffect(()=>{F&&M&&(null!==ye&&google.maps.event.removeListener(ye),we(google.maps.event.addListener(F,"icon_changed",M)))},[M]),qe.useEffect(()=>{F&&R&&(null!==je&&google.maps.event.removeListener(je),ke(google.maps.event.addListener(F,"position_changed",R)))},[R]),qe.useEffect(()=>{F&&A&&(null!==Ne&&google.maps.event.removeListener(Ne),Se(google.maps.event.addListener(F,"shape_changed",A)))},[A]),qe.useEffect(()=>{F&&I&&(null!==_e&&google.maps.event.removeListener(_e),Ce(google.maps.event.addListener(F,"title_changed",I)))},[I]),qe.useEffect(()=>{F&&D&&(null!==Ee&&google.maps.event.removeListener(Ee),Pe(google.maps.event.addListener(F,"visible_changed",D)))},[D]),qe.useEffect(()=>{F&&U&&(null!==Le&&google.maps.event.removeListener(Le),Oe(google.maps.event.addListener(F,"zindex_changed",U)))},[U]),qe.useEffect(()=>{var e=Kh(Kh(Kh({},r||Yh),n?Yh:{map:B}),{},{position:s}),t=new google.maps.Marker(e);return n?n.addMarker(t,!!a):t.setMap(B),s&&t.setPosition(s),void 0!==l&&t.setVisible(l),void 0!==i&&t.setDraggable(i),void 0!==d&&t.setClickable(d),"string"==typeof u&&t.setCursor(u),h&&t.setIcon(h),void 0!==p&&t.setLabel(p),void 0!==m&&t.setOpacity(m),g&&t.setShape(g),"string"==typeof f&&t.setTitle(f),"number"==typeof v&&t.setZIndex(v),b&&V(google.maps.event.addListener(t,"dblclick",b)),w&&q(google.maps.event.addListener(t,"dragend",w)),j&&Z(google.maps.event.addListener(t,"dragstart",j)),_&&Y(google.maps.event.addListener(t,"mousedown",_)),k&&Q(google.maps.event.addListener(t,"mouseout",k)),N&&te(google.maps.event.addListener(t,"mouseover",N)),S&&re(google.maps.event.addListener(t,"mouseup",S)),C&&ae(google.maps.event.addListener(t,"rightclick",C)),x&&ie(google.maps.event.addListener(t,"click",x)),y&&ce(google.maps.event.addListener(t,"drag",y)),E&&ue(google.maps.event.addListener(t,"clickable_changed",E)),P&&pe(google.maps.event.addListener(t,"cursor_changed",P)),L&&ge(google.maps.event.addListener(t,"animation_changed",L)),O&&ve(google.maps.event.addListener(t,"draggable_changed",O)),T&&be(google.maps.event.addListener(t,"flat_changed",T)),M&&we(google.maps.event.addListener(t,"icon_changed",M)),R&&ke(google.maps.event.addListener(t,"position_changed",R)),A&&Se(google.maps.event.addListener(t,"shape_changed",A)),I&&Ce(google.maps.event.addListener(t,"title_changed",I)),D&&Pe(google.maps.event.addListener(t,"visible_changed",D)),U&&Oe(google.maps.event.addListener(t,"zindex_changed",U)),W(t),$&&$(t),()=>{null!==H&&google.maps.event.removeListener(H),null!==G&&google.maps.event.removeListener(G),null!==K&&google.maps.event.removeListener(K),null!==J&&google.maps.event.removeListener(J),null!==X&&google.maps.event.removeListener(X),null!==ee&&google.maps.event.removeListener(ee),null!==se&&google.maps.event.removeListener(se),null!==ne&&google.maps.event.removeListener(ne),null!==oe&&google.maps.event.removeListener(oe),null!==de&&google.maps.event.removeListener(de),null!==he&&google.maps.event.removeListener(he),null!==me&&google.maps.event.removeListener(me),null!==fe&&google.maps.event.removeListener(fe),null!==xe&&google.maps.event.removeListener(xe),null!==ye&&google.maps.event.removeListener(ye),null!==je&&google.maps.event.removeListener(je),null!==_e&&google.maps.event.removeListener(_e),null!==Ee&&google.maps.event.removeListener(Ee),null!==Le&&google.maps.event.removeListener(Le),z&&z(t),n?n.removeMarker(t,!!a):t&&t.setMap(null)}},[]);var Te=qe.useMemo(()=>o?qe.Children.map(o,e=>{if(!qe.isValidElement(e))return e;var t=e;return qe.cloneElement(t,{anchor:F})}):null,[o,F]);return e.jsx(e.Fragment,{children:Te})||null});class Xh extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[])}componentDidMount(){var e=this;return ph(function*(){var t=Kh(Kh(Kh({},e.props.options||Yh),e.props.clusterer?Yh:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=lh({updaterMap:Jh,eventMap:Zh,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Jh,eventMap:Zh,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ih(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){return(this.props.children?qe.Children.map(this.props.children,e=>{if(!qe.isValidElement(e))return e;var t=e;return qe.cloneElement(t,{anchor:this.marker})}):null)||null}}Xu(Xh,"contextType",rh);var Qh=function(){function e(t,s){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=s,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var s=t.getMaxZoom(),r=this.cluster.getBounds(),n=t.getMap();null!==n&&"fitBounds"in n&&n.fitBounds(r),this.timeOut=window.setTimeout(function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var n=e.getZoom()||0;null!==s&&n>s&&e.setZoom(s+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,s,r,n,a;if(this.div&&this.center){var o=null===this.sums||void 0===this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,i=this.backgroundPosition.split(" "),l=parseInt((null===(e=i[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),c=parseInt((null===(t=i[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),d=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==d?"".concat(d.y,"px"):"0","; left: ").concat(null!==d?"".concat(d.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var u=document.createElement("img");u.alt=o,u.src=this.url,u.width=this.width,u.height=this.height,u.setAttribute("style","position: absolute; top: ".concat(c,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(u.style.clip="rect(-".concat(c,"px, -").concat(l+this.width,"px, -").concat(c+this.height,", -").concat(l,")"));var h=document.createElement("div");h.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(s=this.sums)||void 0===s?void 0:s.text)&&(h.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(n=this.sums)||void 0===n?void 0:n.html)&&(h.innerHTML="".concat(null===(a=this.sums)||void 0===a?void 0:a.html)),this.div.innerHTML="",this.div.appendChild(u),this.div.appendChild(h),this.div.title=o,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),s=t[Math.min(t.length-1,Math.max(0,e.index-1))];s&&(this.url=s.url,this.height=s.height,this.width=s.width,s.className&&(this.className="".concat(this.clusterClassName," ").concat(s.className)),this.anchorText=s.anchorText||[0,0],this.anchorIcon=s.anchorIcon||[this.height/2,this.width/2],this.textColor=s.textColor||"black",this.textSize=s.textSize||11,this.textDecoration=s.textDecoration||"none",this.fontWeight=s.fontWeight||"bold",this.fontStyle=s.fontStyle||"normal",this.fontFamily=s.fontFamily||"Arial,sans-serif",this.backgroundPosition=s.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),ep=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Qh(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,s=this.getMarkers();t<s.length;t++){var r=s[t].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,s;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(s=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+s.lat())/r,(this.center.lng()*(r-1)+s.lng())/r),this.calculateBounds()}}else(s=e.getPosition())&&(this.center=s,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var n=this.markers.length,a=this.markerClusterer.getMaxZoom(),o=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==a&&void 0!==o&&o>a)e.getMap()!==this.map&&e.setMap(this.map);else if(n<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(n===this.minClusterSize)for(var i=0,l=this.markers;i<l.length;i++){l[i].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,s=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==s&&void 0!==r&&r>s||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function tp(e,t){var s=e.length,r=s.toString().length,n=Math.min(r,t);return{text:s.toString(),index:n,title:""}}var sp=[53,56,66,78,90],rp=function(){function e(t,s,r){void 0===s&&(s=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||sp,this.calculator=r.calculator||tp,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(s,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var s=t[e];s.getMap()!==this.activeMap&&s.setMap(this.activeMap)}for(var r=0,n=this.clusters;r<n.length;r++){n[r].remove()}this.clusters=[];for(var a=0,o=this.listeners;a<o.length;a++){var i=o[a];google.maps.event.removeListener(i)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,s=0,r=e;s<r.length;s++){var n=r[s].getPosition();n&&t.extend(n)}var a=this.getMap();null!==a&&"fitBounds"in a&&a.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var s=0;s<this.markers.length;s++)if(e===this.markers[s]){t=s;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var s=this.removeMarker_(e);return!t&&s&&this.repaint(),s},e.prototype.removeMarkers=function(e,t){for(var s=!1,r=0,n=e;r<n.length;r++){var a=n[r];s=s||this.removeMarker_(a)}return!t&&s&&this.repaint(),s},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var t=0,s=e;t<s.length;t++){s[t].remove()}},0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),s=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==s&&(s.x+=this.gridSize,s.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==s){var n=t.fromDivPixelToLatLng(s);null!==n&&e.extend(n)}if(null!==r){var a=t.fromDivPixelToLatLng(r);null!==a&&e.extend(a)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,s=this.clusters;t<s.length;t++){s[t].remove()}this.clusters=[];for(var r=0,n=this.markers;r<n.length;r++){var a=n[r];a.isAdded=!1,e&&a.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var s=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6371},e.prototype.isMarkerInBounds=function(e,t){var s=e.getPosition();return!!s&&t.contains(s)},e.prototype.addToClosestCluster=function(e){for(var t,s=4e4,r=null,n=0,a=this.clusters;n<a.length;n++){var o=(t=a[n]).getCenter(),i=e.getPosition();if(o&&i){var l=this.distanceBetweenPoints(o,i);l<s&&(s=l,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new ep(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var s=this.getMap(),r=(null!==s&&"getBounds"in s?s.getBounds():null),n=((null==s?void 0:s.getZoom())||0)>3?new google.maps.LatLngBounds(null==r?void 0:r.getSouthWest(),null==r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(n),o=Math.min(e+this.batchSize,this.markers.length),i=e;i<o;i++){var l=this.markers[i];l&&!l.isAdded&&this.isMarkerInBounds(l,a)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(o<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(o)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var c=0,d=this.clusters;c<d.length;c++){d[c].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var s=t;this.prototype[s]=e.prototype[s]}return this}.apply(e,[t])},e}();function np(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}var ap={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},op={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},ip={};qe.memo(function(e){var{children:t,options:s,averageCenter:r,batchSizeIE:n,calculator:a,clusterClass:o,enableRetinaIcons:i,gridSize:l,ignoreHidden:c,imageExtension:d,imagePath:u,imageSizes:h,maxZoom:p,minimumClusterSize:m,styles:g,title:f,zoomOnClick:v,onClick:x,onClusteringBegin:b,onClusteringEnd:y,onMouseOver:w,onMouseOut:j,onLoad:k,onUnmount:N}=e,[S,_]=qe.useState(null),C=qe.useContext(rh),[E,P]=qe.useState(null),[L,O]=qe.useState(null),[T,M]=qe.useState(null),[R,A]=qe.useState(null),[I,D]=qe.useState(null);return qe.useEffect(()=>{S&&j&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(S,ap.onMouseOut,j)))},[j]),qe.useEffect(()=>{S&&w&&(null!==I&&google.maps.event.removeListener(I),D(google.maps.event.addListener(S,ap.onMouseOver,w)))},[w]),qe.useEffect(()=>{S&&x&&(null!==E&&google.maps.event.removeListener(E),P(google.maps.event.addListener(S,ap.onClick,x)))},[x]),qe.useEffect(()=>{S&&b&&(null!==L&&google.maps.event.removeListener(L),O(google.maps.event.addListener(S,ap.onClusteringBegin,b)))},[b]),qe.useEffect(()=>{S&&y&&(null!==T&&google.maps.event.removeListener(T),O(google.maps.event.addListener(S,ap.onClusteringEnd,y)))},[y]),qe.useEffect(()=>{void 0!==r&&null!==S&&op.averageCenter(S,r)},[S,r]),qe.useEffect(()=>{void 0!==n&&null!==S&&op.batchSizeIE(S,n)},[S,n]),qe.useEffect(()=>{void 0!==a&&null!==S&&op.calculator(S,a)},[S,a]),qe.useEffect(()=>{void 0!==o&&null!==S&&op.clusterClass(S,o)},[S,o]),qe.useEffect(()=>{void 0!==i&&null!==S&&op.enableRetinaIcons(S,i)},[S,i]),qe.useEffect(()=>{void 0!==l&&null!==S&&op.gridSize(S,l)},[S,l]),qe.useEffect(()=>{void 0!==c&&null!==S&&op.ignoreHidden(S,c)},[S,c]),qe.useEffect(()=>{void 0!==d&&null!==S&&op.imageExtension(S,d)},[S,d]),qe.useEffect(()=>{void 0!==u&&null!==S&&op.imagePath(S,u)},[S,u]),qe.useEffect(()=>{void 0!==h&&null!==S&&op.imageSizes(S,h)},[S,h]),qe.useEffect(()=>{void 0!==p&&null!==S&&op.maxZoom(S,p)},[S,p]),qe.useEffect(()=>{void 0!==m&&null!==S&&op.minimumClusterSize(S,m)},[S,m]),qe.useEffect(()=>{void 0!==g&&null!==S&&op.styles(S,g)},[S,g]),qe.useEffect(()=>{void 0!==f&&null!==S&&op.title(S,f)},[S,f]),qe.useEffect(()=>{void 0!==v&&null!==S&&op.zoomOnClick(S,v)},[S,v]),qe.useEffect(()=>{if(C){var e=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?np(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):np(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},s||ip),t=new rp(C,[],e);return r&&op.averageCenter(t,r),n&&op.batchSizeIE(t,n),a&&op.calculator(t,a),o&&op.clusterClass(t,o),i&&op.enableRetinaIcons(t,i),l&&op.gridSize(t,l),c&&op.ignoreHidden(t,c),d&&op.imageExtension(t,d),u&&op.imagePath(t,u),h&&op.imageSizes(t,h),p&&op.maxZoom(t,p),m&&op.minimumClusterSize(t,m),g&&op.styles(t,g),f&&op.title(t,f),v&&op.zoomOnClick(t,v),j&&A(google.maps.event.addListener(t,ap.onMouseOut,j)),w&&D(google.maps.event.addListener(t,ap.onMouseOver,w)),x&&P(google.maps.event.addListener(t,ap.onClick,x)),b&&O(google.maps.event.addListener(t,ap.onClusteringBegin,b)),y&&M(google.maps.event.addListener(t,ap.onClusteringEnd,y)),_(t),k&&k(t),()=>{null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==E&&google.maps.event.removeListener(E),null!==L&&google.maps.event.removeListener(L),null!==T&&google.maps.event.removeListener(T),N&&N(t)}}},[]),null!==S&&t(S)||null});class lp extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{markerClusterer:null}),Xu(this,"setClustererCallback",()=>{null!==this.state.markerClusterer&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new rp(this.context,[],this.props.options);this.registeredEvents=lh({updaterMap:op,eventMap:ap,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:op,eventMap:ap,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ih(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}function cp(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}Xu(lp,"contextType",rh);var dp=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),void 0===t.visible&&(void 0===t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"==typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,n=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<n.length;r++){var a=n[r];this.eventListeners.push(google.maps.event.addListener(this.div,a,cp))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||cp(t)}),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var s=0,r=0,n=t.getBounds();n&&!n.contains(this.position)&&t.setCenter(this.position);var a=t.getDiv(),o=a.offsetWidth,i=a.offsetHeight,l=this.pixelOffset.width,c=this.pixelOffset.height,d=this.div.offsetWidth,u=this.div.offsetHeight,h=this.infoBoxClearance.width,p=this.infoBoxClearance.height,m=this.getProjection().fromLatLngToContainerPixel(this.position);null!==m&&(m.x<-l+h?s=m.x+l-h:m.x+d+l+h>o&&(s=m.x+d+l+h-o),this.alignBottom?m.y<-c+p+u?r=m.y+c-p-u:m.y+c+p>i&&(r=m.y+c+p-i):m.y<-c+p?r=m.y+c-p:m.y+u+c+p>i&&(r=m.y+u+c+p-i)),0===s&&0===r||t.panBy(s,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",void 0!==this.div.style.opacity&&""!==this.div.style.opacity){var s=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*s+')"',this.div.style.filter="alpha(opacity="+100*s+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,s=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),void 0!==e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),void 0!==e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),void 0!==e.content&&this.setContent(e.content),void 0!==e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),void 0!==e.maxWidth&&(this.maxWidth=e.maxWidth),void 0!==e.pixelOffset&&(this.pixelOffset=e.pixelOffset),void 0!==e.alignBottom&&(this.alignBottom=e.alignBottom),void 0!==e.position&&this.setPosition(e.position),void 0!==e.zIndex&&this.setZIndex(e.zIndex),void 0!==e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),void 0!==e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),void 0!==e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),void 0!==e.isHidden&&(this.isHidden=e.isHidden),void 0!==e.visible&&(this.isHidden=!e.visible),void 0!==e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"==typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"==typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return null!=e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var s=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var e=t.getPosition();s.setPosition(e)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){s.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var s=t[e];google.maps.event.removeListener(s)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),up=["position"],hp=["position"];function pp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function mp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pp(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var gp,fp,vp={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},xp={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},bp={};qe.memo(function(e){var{children:t,anchor:s,options:r,position:n,zIndex:a,onCloseClick:o,onDomReady:i,onContentChanged:l,onPositionChanged:c,onZindexChanged:d,onLoad:u,onUnmount:h}=e,p=qe.useContext(rh),[m,g]=qe.useState(null),[f,v]=qe.useState(null),[x,b]=qe.useState(null),[y,w]=qe.useState(null),[j,k]=qe.useState(null),[N,S]=qe.useState(null),_=qe.useRef(null);return qe.useEffect(()=>{p&&null!==m&&(m.close(),s?m.open(p,s):m.getPosition()&&m.open(p))},[p,m,s]),qe.useEffect(()=>{r&&null!==m&&m.setOptions(r)},[m,r]),qe.useEffect(()=>{if(n&&null!==m){var e=n instanceof google.maps.LatLng?n:new google.maps.LatLng(n.lat,n.lng);m.setPosition(e)}},[n]),qe.useEffect(()=>{"number"==typeof a&&null!==m&&m.setZIndex(a)},[a]),qe.useEffect(()=>{m&&o&&(null!==f&&google.maps.event.removeListener(f),v(google.maps.event.addListener(m,"closeclick",o)))},[o]),qe.useEffect(()=>{m&&i&&(null!==x&&google.maps.event.removeListener(x),b(google.maps.event.addListener(m,"domready",i)))},[i]),qe.useEffect(()=>{m&&l&&(null!==y&&google.maps.event.removeListener(y),w(google.maps.event.addListener(m,"content_changed",l)))},[l]),qe.useEffect(()=>{m&&c&&(null!==j&&google.maps.event.removeListener(j),k(google.maps.event.addListener(m,"position_changed",c)))},[c]),qe.useEffect(()=>{m&&d&&(null!==N&&google.maps.event.removeListener(N),S(google.maps.event.addListener(m,"zindex_changed",d)))},[d]),qe.useEffect(()=>{if(p){var e,t=r||bp,{position:n}=t,a=Nh(t,up);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var C=new dp(mp(mp({},a),e?{position:e}:{}));_.current=document.createElement("div"),g(C),o&&v(google.maps.event.addListener(C,"closeclick",o)),i&&b(google.maps.event.addListener(C,"domready",i)),l&&w(google.maps.event.addListener(C,"content_changed",l)),c&&k(google.maps.event.addListener(C,"position_changed",c)),d&&S(google.maps.event.addListener(C,"zindex_changed",d)),C.setContent(_.current),s?C.open(p,s):C.getPosition()?C.open(p):sh(!1,"You must provide either an anchor or a position prop for <InfoBox>."),u&&u(C)}return()=>{null!==m&&(f&&google.maps.event.removeListener(f),y&&google.maps.event.removeListener(y),x&&google.maps.event.removeListener(x),j&&google.maps.event.removeListener(j),N&&google.maps.event.removeListener(N),h&&h(m),m.close())}},[]),_.current?Ge.createPortal(qe.Children.only(t),_.current):null});class yp extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"containerElement",null),Xu(this,"state",{infoBox:null}),Xu(this,"open",(e,t)=>{t?null!==this.context&&e.open(this.context,t):e.getPosition()?null!==this.context&&e.open(this.context):sh(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Xu(this,"setInfoBoxCallback",()=>{null!==this.state.infoBox&&null!==this.containerElement&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e,t=this.props.options||{},{position:s}=t,r=Nh(t,hp);!s||s instanceof google.maps.LatLng||(e=new google.maps.LatLng(s.lat,s.lng));var n=new dp(mp(mp({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=lh({updaterMap:xp,eventMap:vp,prevProps:{},nextProps:this.props,instance:n}),this.setState({infoBox:n},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;null!==t&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:xp,eventMap:vp,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;null!==t&&(e&&e(t),ih(this.registeredEvents),t.close())}render(){return this.containerElement?Ge.createPortal(qe.Children.only(this.props.children),this.containerElement):null}}Xu(yp,"contextType",rh);var wp=Qu(fp?gp:(fp=1,gp=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var r,n,a;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(n=r;0!==n--;)if(!e(t[n],s[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(s,a[n]))return!1;for(n=r;0!==n--;){var o=a[n];if(!e(t[o],s[o]))return!1}return!0}return t!=t&&s!=s})),jp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,s]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");var r=s>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));var n=jp[15&s];if(!n)throw new Error("Unrecognized array type.");var[a]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new kp(o,a,n,e)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var n=jp.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,i=(8-o%8)%8;if(n<0)throw new Error("Unexpected typed array class: ".concat(s,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+i,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+o+i),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+i,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=t,s}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Np(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,s,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:n,coords:a,nodeSize:o}=this,i=[0,n.length-1,0],l=[];i.length;){var c=i.pop()||0,d=i.pop()||0,u=i.pop()||0;if(d-u<=o)for(var h=u;h<=d;h++){var p=a[2*h],m=a[2*h+1];p>=e&&p<=s&&m>=t&&m<=r&&l.push(n[h])}else{var g=u+d>>1,f=a[2*g],v=a[2*g+1];f>=e&&f<=s&&v>=t&&v<=r&&l.push(n[g]),(0===c?e<=f:t<=v)&&(i.push(u),i.push(g-1),i.push(1-c)),(0===c?s>=f:r>=v)&&(i.push(g+1),i.push(d),i.push(1-c))}}return l}within(e,t,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:n,nodeSize:a}=this,o=[0,r.length-1,0],i=[],l=s*s;o.length;){var c=o.pop()||0,d=o.pop()||0,u=o.pop()||0;if(d-u<=a)for(var h=u;h<=d;h++)Ep(n[2*h],n[2*h+1],e,t)<=l&&i.push(r[h]);else{var p=u+d>>1,m=n[2*p],g=n[2*p+1];Ep(m,g,e,t)<=l&&i.push(r[p]),(0===c?e-s<=m:t-s<=g)&&(o.push(u),o.push(p-1),o.push(1-c)),(0===c?e+s>=m:t+s>=g)&&(o.push(p+1),o.push(d),o.push(1-c))}}return i}}function Np(e,t,s,r,n,a){if(!(n-r<=s)){var o=r+n>>1;Sp(e,t,o,r,n,a),Np(e,t,s,r,o-1,1-a),Np(e,t,s,o+1,n,1-a)}}function Sp(e,t,s,r,n,a){for(;n>r;){if(n-r>600){var o=n-r+1,i=s-r+1,l=Math.log(o),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(o-c)/o)*(i-o/2<0?-1:1);Sp(e,t,s,Math.max(r,Math.floor(s-i*c/o+d)),Math.min(n,Math.floor(s+(o-i)*c/o+d)),a)}var u=t[2*s+a],h=r,p=n;for(_p(e,t,r,s),t[2*n+a]>u&&_p(e,t,r,n);h<p;){for(_p(e,t,h,p),h++,p--;t[2*h+a]<u;)h++;for(;t[2*p+a]>u;)p--}t[2*r+a]===u?_p(e,t,r,p):_p(e,t,++p,n),p<=s&&(r=p+1),s<=p&&(n=p-1)}}function _p(e,t,s,r){Cp(e,s,r),Cp(t,2*s,2*r),Cp(t,2*s+1,2*r+1)}function Cp(e,t,s){var r=e[t];e[t]=e[s],e[s]=r}function Ep(e,t,s,r){var n=e-s,a=t-r;return n*n+a*a}var Pp={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Lp=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1));class Op{constructor(e){this.options=Object.assign(Object.create(Pp),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:s,maxZoom:r}=this.options;t&&console.time("total time");var n="prepare ".concat(e.length," points");t&&console.time(n),this.points=e;for(var a=[],o=0;o<e.length;o++){var i=e[o];if(i.geometry){var[l,c]=i.geometry.coordinates,d=Lp(Rp(l)),u=Lp(Ap(c));a.push(d,u,1/0,o,-1,1),this.options.reduce&&a.push(0)}}var h=this.trees[r+1]=this._createTree(a);t&&console.timeEnd(n);for(var p=r;p>=s;p--){var m=+Date.now();h=this.trees[p]=this._createTree(this._cluster(h,p)),t&&console.log("z%d: %d clusters in %dms",p,h.numItems,+Date.now()-m)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var s=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),n=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,n=180;else if(s>n){var o=this.getClusters([s,r,180,a],t),i=this.getClusters([-180,r,n,a],t);return o.concat(i)}var l=this.trees[this._limitZoom(t)],c=l.range(Rp(s),Ap(a),Rp(n),Ap(r)),d=l.data,u=[];for(var h of c){var p=this.stride*h;u.push(d[p+5]>1?Tp(d,p,this.clusterProps):this.points[d[p+3]])}return u}getChildren(e){var t=this._getOriginId(e),s=this._getOriginZoom(e),r="No cluster with the specified id.",n=this.trees[s];if(!n)throw new Error(r);var a=n.data;if(t*this.stride>=a.length)throw new Error(r);var o=this.options.radius/(this.options.extent*Math.pow(2,s-1)),i=a[t*this.stride],l=a[t*this.stride+1],c=n.within(i,l,o),d=[];for(var u of c){var h=u*this.stride;a[h+4]===e&&d.push(a[h+5]>1?Tp(a,h,this.clusterProps):this.points[a[h+3]])}if(0===d.length)throw new Error(r);return d}getLeaves(e,t,s){t=t||10,s=s||0;var r=[];return this._appendLeaves(r,e,t,s,0),r}getTile(e,t,s){var r=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:a,radius:o}=this.options,i=o/a,l=(s-i)/n,c=(s+1+i)/n,d={features:[]};return this._addTileFeatures(r.range((t-i)/n,l,(t+1+i)/n,c),r.data,t,s,n,d),0===t&&this._addTileFeatures(r.range(1-i/n,l,1,c),r.data,n,s,n,d),t===n-1&&this._addTileFeatures(r.range(0,l,i/n,c),r.data,-1,s,n,d),d.features.length?d:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var s=this.getChildren(e);if(t++,1!==s.length)break;e=s[0].properties.cluster_id}return t}_appendLeaves(e,t,s,r,n){var a=this.getChildren(t);for(var o of a){var i=o.properties;if(i&&i.cluster?n+i.point_count<=r?n+=i.point_count:n=this._appendLeaves(e,i.cluster_id,s,r,n):n<r?n++:e.push(o),e.length===s)break}return n}_createTree(e){for(var t=new kp(e.length/this.stride|0,this.options.nodeSize,Float32Array),s=0;s<e.length;s+=this.stride)t.add(e[s],e[s+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,s,r,n,a){for(var o of e){var i=o*this.stride,l=t[i+5]>1,c=void 0,d=void 0,u=void 0;if(l)c=Mp(t,i,this.clusterProps),d=t[i],u=t[i+1];else{var h=this.points[t[i+3]];c=h.properties;var[p,m]=h.geometry.coordinates;d=Rp(p),u=Ap(m)}var g={type:1,geometry:[[Math.round(this.options.extent*(d*n-s)),Math.round(this.options.extent*(u*n-r))]],tags:c},f=void 0;void 0!==(f=l||this.options.generateId?t[i+3]:this.points[t[i+3]].id)&&(g.id=f),a.features.push(g)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:s,extent:r,reduce:n,minPoints:a}=this.options,o=s/(r*Math.pow(2,t)),i=e.data,l=[],c=this.stride,d=0;d<i.length;d+=c)if(!(i[d+2]<=t)){i[d+2]=t;var u=i[d],h=i[d+1],p=e.within(i[d],i[d+1],o),m=i[d+5],g=m;for(var f of p){var v=f*c;i[v+2]>t&&(g+=i[v+5])}if(g>m&&g>=a){var x=u*m,b=h*m,y=void 0,w=-1,j=(d/c<<5)+(t+1)+this.points.length;for(var k of p){var N=k*c;if(!(i[N+2]<=t)){i[N+2]=t;var S=i[N+5];x+=i[N]*S,b+=i[N+1]*S,i[N+4]=j,n&&(y||(y=this._map(i,d,!0),w=this.clusterProps.length,this.clusterProps.push(y)),n(y,this._map(i,N)))}}i[d+4]=j,l.push(x/g,b/g,1/0,j,-1,g),n&&l.push(w)}else{for(var _=0;_<c;_++)l.push(i[d+_]);if(g>1)for(var C of p){var E=C*c;if(!(i[E+2]<=t)){i[E+2]=t;for(var P=0;P<c;P++)l.push(i[E+P])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,s){if(e[t+5]>1){var r=this.clusterProps[e[t+6]];return s?Object.assign({},r):r}var n=this.points[e[t+3]].properties,a=this.options.map(n);return s&&a===n?Object.assign({},a):a}}function Tp(e,t,s){return{type:"Feature",id:e[t+3],properties:Mp(e,t,s),geometry:{type:"Point",coordinates:[(a=e[t],360*(a-.5)),(r=e[t+1],n=(180-360*r)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var r,n,a;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */}function Mp(e,t,s){var r=e[t+5],n=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,a=e[t+6],o=-1===a?{}:Object.assign({},s[a]);return Object.assign(o,{cluster:!0,cluster_id:e[t+3],point_count:r,point_count_abbreviated:n})}function Rp(e){return e/360+.5}function Ap(e){var t=Math.sin(e*Math.PI/180),s=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return s<0?0:s>1?1:s}class Ip{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class Dp{constructor(e){var{markers:t,position:s}=e;this.markers=t,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(0!==this.markers.length||this._position){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(Ip.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Ip.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Ip.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Up{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return Bp(t)}}var $p,zp,Bp=e=>e.map(e=>new Dp({position:Ip.getPosition(e),markers:[e]}));class Fp extends Up{constructor(e){var{maxZoom:t,radius:s=60}=e,r=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new Op(Object.assign({maxZoom:this.maxZoom,radius:s},r))}calculate(e){var t=!1,s={zoom:e.map.getZoom()};if(!wp(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map(e=>{var t=Ip.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}});this.superCluster.load(r)}return t||(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(t=!wp(this.state,s)),this.state=s,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(e=>this.transformCluster(e))}transformCluster(e){var{geometry:{coordinates:[t,s]},properties:r}=e;if(r.cluster)return new Dp({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(e=>e.properties.marker),position:{lat:s,lng:t}});var n=r.marker;return new Dp({markers:[n],position:Ip.getPosition(n)})}}class Wp{constructor(e,t){this.markers={sum:e.length};var s=t.map(e=>e.count),r=s.reduce((e,t)=>e+t,0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...s),max:Math.max(...s)}}}}class Hp{render(e,t,s){var{count:r,position:n}=e,a=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(a,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),i="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(Ip.isAdvancedMarkerAvailable(s)){var c=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement;c.setAttribute("transform","translate(0 25)");var d={map:s,position:n,zIndex:l,title:i,content:c};return new google.maps.marker.AdvancedMarkerElement(d)}var u={position:n,zIndex:l,title:i,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class Vp{constructor(){!function(e,t){for(var s in t.prototype)e.prototype[s]=t.prototype[s]}(Vp,google.maps.OverlayView)}}(zp=$p||($p={})).CLUSTERING_BEGIN="clusteringbegin",zp.CLUSTERING_END="clusteringend",zp.CLUSTER_CLICK="click";var Gp=(e,t,s)=>{s.fitBounds(t.bounds)};class qp extends Vp{constructor(e){var{map:t,markers:s=[],algorithmOptions:r={},algorithm:n=new Fp(r),renderer:a=new Hp,onClusterClick:o=Gp}=e;super(),this.markers=[...s],this.clusters=[],this.algorithm=n,this.renderer=a,this.onClusterClick=o,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(e=>{this.addMarker(e,!0)}),t||this.render()}removeMarker(e,t){var s=this.markers.indexOf(e);return-1!==s&&(Ip.setMap(e,null),this.markers.splice(s,1),t||this.render(),!0)}removeMarkers(e,t){var s=!1;return e.forEach(e=>{s=this.removeMarker(e,!0)||s}),s&&!t&&this.render(),s}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,$p.CLUSTERING_BEGIN,this);var{clusters:t,changed:s}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(s||null==s){var r=new Set;for(var n of t)1==n.markers.length&&r.add(n.markers[0]);var a=[];for(var o of this.clusters)null!=o.marker&&(1==o.markers.length?r.has(o.marker)||Ip.setMap(o.marker,null):a.push(o.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>a.forEach(e=>Ip.setMap(e,null)))}google.maps.event.trigger(this,$p.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Ip.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new Wp(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(s=>{1===s.markers.length?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,e,t),s.markers.forEach(e=>Ip.setMap(e,null)),this.onClusterClick&&s.marker.addListener("click",e=>{google.maps.event.trigger(this,$p.CLUSTER_CLICK,s),this.onClusterClick(e,s,t)})),Ip.setMap(s.marker,t)})}}function Kp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Zp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kp(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kp(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Jp(e){var t=function(){sh(!!qe.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=qe.useContext(rh);return sh(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),[s,r]=qe.useState(null);return qe.useEffect(()=>{if(t&&null===s){var n=new qp(Zp(Zp({},e),{},{map:t}));r(n)}},[t]),s}qe.memo(function(e){var{children:t,options:s}=e,r=Jp(s);return null!==r?t(r):null});var Yp={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Xp={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};qe.memo(function(e){var{children:t,anchor:s,options:r,position:n,zIndex:a,onCloseClick:o,onDomReady:i,onContentChanged:l,onPositionChanged:c,onZindexChanged:d,onLoad:u,onUnmount:h}=e,p=qe.useContext(rh),[m,g]=qe.useState(null),[f,v]=qe.useState(null),[x,b]=qe.useState(null),[y,w]=qe.useState(null),[j,k]=qe.useState(null),[N,S]=qe.useState(null),_=qe.useRef(null);return qe.useEffect(()=>{null!==m&&(m.close(),s?m.open(p,s):m.getPosition()&&m.open(p))},[p,m,s]),qe.useEffect(()=>{r&&null!==m&&m.setOptions(r)},[m,r]),qe.useEffect(()=>{n&&null!==m&&m.setPosition(n)},[n]),qe.useEffect(()=>{"number"==typeof a&&null!==m&&m.setZIndex(a)},[a]),qe.useEffect(()=>{m&&o&&(null!==f&&google.maps.event.removeListener(f),v(google.maps.event.addListener(m,"closeclick",o)))},[o]),qe.useEffect(()=>{m&&i&&(null!==x&&google.maps.event.removeListener(x),b(google.maps.event.addListener(m,"domready",i)))},[i]),qe.useEffect(()=>{m&&l&&(null!==y&&google.maps.event.removeListener(y),w(google.maps.event.addListener(m,"content_changed",l)))},[l]),qe.useEffect(()=>{m&&c&&(null!==j&&google.maps.event.removeListener(j),k(google.maps.event.addListener(m,"position_changed",c)))},[c]),qe.useEffect(()=>{m&&d&&(null!==N&&google.maps.event.removeListener(N),S(google.maps.event.addListener(m,"zindex_changed",d)))},[d]),qe.useEffect(()=>{var e=new google.maps.InfoWindow(r);return g(e),_.current=document.createElement("div"),o&&v(google.maps.event.addListener(e,"closeclick",o)),i&&b(google.maps.event.addListener(e,"domready",i)),l&&w(google.maps.event.addListener(e,"content_changed",l)),c&&k(google.maps.event.addListener(e,"position_changed",c)),d&&S(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(_.current),n&&e.setPosition(n),a&&e.setZIndex(a),s?e.open(p,s):e.getPosition()?e.open(p):sh(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),u&&u(e),()=>{f&&google.maps.event.removeListener(f),y&&google.maps.event.removeListener(y),x&&google.maps.event.removeListener(x),j&&google.maps.event.removeListener(j),N&&google.maps.event.removeListener(N),h&&h(e),e.close()}},[]),_.current?Ge.createPortal(qe.Children.only(t),_.current):null});class Qp extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"containerElement",null),Xu(this,"state",{infoWindow:null}),Xu(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):sh(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Xu(this,"setInfoWindowCallback",()=>{null!==this.state.infoWindow&&null!==this.containerElement&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=lh({updaterMap:Xp,eventMap:Yp,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){null!==this.state.infoWindow&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Xp,eventMap:Yp,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){null!==this.state.infoWindow&&(ih(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Ge.createPortal(qe.Children.only(this.props.children),this.containerElement):null}}function em(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?em(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):em(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(Qp,"contextType",rh);var sm={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},rm={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},nm={};qe.memo(function(e){var{options:t,draggable:s,editable:r,visible:n,path:a,onDblClick:o,onDragEnd:i,onDragStart:l,onMouseDown:c,onMouseMove:d,onMouseOut:u,onMouseOver:h,onMouseUp:p,onRightClick:m,onClick:g,onDrag:f,onLoad:v,onUnmount:x}=e,b=qe.useContext(rh),[y,w]=qe.useState(null),[j,k]=qe.useState(null),[N,S]=qe.useState(null),[_,C]=qe.useState(null),[E,P]=qe.useState(null),[L,O]=qe.useState(null),[T,M]=qe.useState(null),[R,A]=qe.useState(null),[I,D]=qe.useState(null),[U,$]=qe.useState(null),[z,B]=qe.useState(null),[F,W]=qe.useState(null);return qe.useEffect(()=>{null!==y&&y.setMap(b)},[b]),qe.useEffect(()=>{void 0!==t&&null!==y&&y.setOptions(t)},[y,t]),qe.useEffect(()=>{void 0!==s&&null!==y&&y.setDraggable(s)},[y,s]),qe.useEffect(()=>{void 0!==r&&null!==y&&y.setEditable(r)},[y,r]),qe.useEffect(()=>{void 0!==n&&null!==y&&y.setVisible(n)},[y,n]),qe.useEffect(()=>{void 0!==a&&null!==y&&y.setPath(a)},[y,a]),qe.useEffect(()=>{y&&o&&(null!==j&&google.maps.event.removeListener(j),k(google.maps.event.addListener(y,"dblclick",o)))},[o]),qe.useEffect(()=>{y&&i&&(null!==N&&google.maps.event.removeListener(N),S(google.maps.event.addListener(y,"dragend",i)))},[i]),qe.useEffect(()=>{y&&l&&(null!==_&&google.maps.event.removeListener(_),C(google.maps.event.addListener(y,"dragstart",l)))},[l]),qe.useEffect(()=>{y&&c&&(null!==E&&google.maps.event.removeListener(E),P(google.maps.event.addListener(y,"mousedown",c)))},[c]),qe.useEffect(()=>{y&&d&&(null!==L&&google.maps.event.removeListener(L),O(google.maps.event.addListener(y,"mousemove",d)))},[d]),qe.useEffect(()=>{y&&u&&(null!==T&&google.maps.event.removeListener(T),M(google.maps.event.addListener(y,"mouseout",u)))},[u]),qe.useEffect(()=>{y&&h&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(y,"mouseover",h)))},[h]),qe.useEffect(()=>{y&&p&&(null!==I&&google.maps.event.removeListener(I),D(google.maps.event.addListener(y,"mouseup",p)))},[p]),qe.useEffect(()=>{y&&m&&(null!==U&&google.maps.event.removeListener(U),$(google.maps.event.addListener(y,"rightclick",m)))},[m]),qe.useEffect(()=>{y&&g&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(y,"click",g)))},[g]),qe.useEffect(()=>{y&&f&&(null!==F&&google.maps.event.removeListener(F),W(google.maps.event.addListener(y,"drag",f)))},[f]),qe.useEffect(()=>{var e=new google.maps.Polyline(tm(tm({},t||nm),{},{map:b}));return a&&e.setPath(a),void 0!==n&&e.setVisible(n),void 0!==r&&e.setEditable(r),void 0!==s&&e.setDraggable(s),o&&k(google.maps.event.addListener(e,"dblclick",o)),i&&S(google.maps.event.addListener(e,"dragend",i)),l&&C(google.maps.event.addListener(e,"dragstart",l)),c&&P(google.maps.event.addListener(e,"mousedown",c)),d&&O(google.maps.event.addListener(e,"mousemove",d)),u&&M(google.maps.event.addListener(e,"mouseout",u)),h&&A(google.maps.event.addListener(e,"mouseover",h)),p&&D(google.maps.event.addListener(e,"mouseup",p)),m&&$(google.maps.event.addListener(e,"rightclick",m)),g&&B(google.maps.event.addListener(e,"click",g)),f&&W(google.maps.event.addListener(e,"drag",f)),w(e),v&&v(e),()=>{null!==j&&google.maps.event.removeListener(j),null!==N&&google.maps.event.removeListener(N),null!==_&&google.maps.event.removeListener(_),null!==E&&google.maps.event.removeListener(E),null!==L&&google.maps.event.removeListener(L),null!==T&&google.maps.event.removeListener(T),null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),x&&x(e),e.setMap(null)}},[]),null});class am extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{polyline:null}),Xu(this,"setPolylineCallback",()=>{null!==this.state.polyline&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(tm(tm({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:rm,eventMap:sm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){null!==this.state.polyline&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:rm,eventMap:sm,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ih(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}function om(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function im(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?om(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):om(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(am,"contextType",rh);var lm={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},cm={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};qe.memo(function(e){var{options:t,draggable:s,editable:r,visible:n,path:a,paths:o,onDblClick:i,onDragEnd:l,onDragStart:c,onMouseDown:d,onMouseMove:u,onMouseOut:h,onMouseOver:p,onMouseUp:m,onRightClick:g,onClick:f,onDrag:v,onLoad:x,onUnmount:b,onEdit:y}=e,w=qe.useContext(rh),[j,k]=qe.useState(null),[N,S]=qe.useState(null),[_,C]=qe.useState(null),[E,P]=qe.useState(null),[L,O]=qe.useState(null),[T,M]=qe.useState(null),[R,A]=qe.useState(null),[I,D]=qe.useState(null),[U,$]=qe.useState(null),[z,B]=qe.useState(null),[F,W]=qe.useState(null),[H,V]=qe.useState(null);return qe.useEffect(()=>{null!==j&&j.setMap(w)},[w]),qe.useEffect(()=>{void 0!==t&&null!==j&&j.setOptions(t)},[j,t]),qe.useEffect(()=>{void 0!==s&&null!==j&&j.setDraggable(s)},[j,s]),qe.useEffect(()=>{void 0!==r&&null!==j&&j.setEditable(r)},[j,r]),qe.useEffect(()=>{void 0!==n&&null!==j&&j.setVisible(n)},[j,n]),qe.useEffect(()=>{void 0!==a&&null!==j&&j.setPath(a)},[j,a]),qe.useEffect(()=>{void 0!==o&&null!==j&&j.setPaths(o)},[j,o]),qe.useEffect(()=>{j&&"function"==typeof i&&(null!==N&&google.maps.event.removeListener(N),S(google.maps.event.addListener(j,"dblclick",i)))},[i]),qe.useEffect(()=>{j&&(google.maps.event.addListener(j.getPath(),"insert_at",()=>{null==y||y(j)}),google.maps.event.addListener(j.getPath(),"set_at",()=>{null==y||y(j)}),google.maps.event.addListener(j.getPath(),"remove_at",()=>{null==y||y(j)}))},[j,y]),qe.useEffect(()=>{j&&"function"==typeof l&&(null!==_&&google.maps.event.removeListener(_),C(google.maps.event.addListener(j,"dragend",l)))},[l]),qe.useEffect(()=>{j&&"function"==typeof c&&(null!==E&&google.maps.event.removeListener(E),P(google.maps.event.addListener(j,"dragstart",c)))},[c]),qe.useEffect(()=>{j&&"function"==typeof d&&(null!==L&&google.maps.event.removeListener(L),O(google.maps.event.addListener(j,"mousedown",d)))},[d]),qe.useEffect(()=>{j&&"function"==typeof u&&(null!==T&&google.maps.event.removeListener(T),M(google.maps.event.addListener(j,"mousemove",u)))},[u]),qe.useEffect(()=>{j&&"function"==typeof h&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(j,"mouseout",h)))},[h]),qe.useEffect(()=>{j&&"function"==typeof p&&(null!==I&&google.maps.event.removeListener(I),D(google.maps.event.addListener(j,"mouseover",p)))},[p]),qe.useEffect(()=>{j&&"function"==typeof m&&(null!==U&&google.maps.event.removeListener(U),$(google.maps.event.addListener(j,"mouseup",m)))},[m]),qe.useEffect(()=>{j&&"function"==typeof g&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(j,"rightclick",g)))},[g]),qe.useEffect(()=>{j&&"function"==typeof f&&(null!==F&&google.maps.event.removeListener(F),W(google.maps.event.addListener(j,"click",f)))},[f]),qe.useEffect(()=>{j&&"function"==typeof v&&(null!==H&&google.maps.event.removeListener(H),V(google.maps.event.addListener(j,"drag",v)))},[v]),qe.useEffect(()=>{var e=new google.maps.Polygon(im(im({},t),{},{map:w}));return a&&e.setPath(a),o&&e.setPaths(o),void 0!==n&&e.setVisible(n),void 0!==r&&e.setEditable(r),void 0!==s&&e.setDraggable(s),i&&S(google.maps.event.addListener(e,"dblclick",i)),l&&C(google.maps.event.addListener(e,"dragend",l)),c&&P(google.maps.event.addListener(e,"dragstart",c)),d&&O(google.maps.event.addListener(e,"mousedown",d)),u&&M(google.maps.event.addListener(e,"mousemove",u)),h&&A(google.maps.event.addListener(e,"mouseout",h)),p&&D(google.maps.event.addListener(e,"mouseover",p)),m&&$(google.maps.event.addListener(e,"mouseup",m)),g&&B(google.maps.event.addListener(e,"rightclick",g)),f&&W(google.maps.event.addListener(e,"click",f)),v&&V(google.maps.event.addListener(e,"drag",v)),k(e),x&&x(e),()=>{null!==N&&google.maps.event.removeListener(N),null!==_&&google.maps.event.removeListener(_),null!==E&&google.maps.event.removeListener(E),null!==L&&google.maps.event.removeListener(L),null!==T&&google.maps.event.removeListener(T),null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==F&&google.maps.event.removeListener(F),b&&b(e),e.setMap(null)}},[]),null});class dm extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=lh({updaterMap:cm,eventMap:lm,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:cm,eventMap:lm,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),ih(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}function um(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function hm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?um(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):um(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(dm,"contextType",rh);var pm={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},mm={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};qe.memo(function(e){var{options:t,bounds:s,draggable:r,editable:n,visible:a,onDblClick:o,onDragEnd:i,onDragStart:l,onMouseDown:c,onMouseMove:d,onMouseOut:u,onMouseOver:h,onMouseUp:p,onRightClick:m,onClick:g,onDrag:f,onBoundsChanged:v,onLoad:x,onUnmount:b}=e,y=qe.useContext(rh),[w,j]=qe.useState(null),[k,N]=qe.useState(null),[S,_]=qe.useState(null),[C,E]=qe.useState(null),[P,L]=qe.useState(null),[O,T]=qe.useState(null),[M,R]=qe.useState(null),[A,I]=qe.useState(null),[D,U]=qe.useState(null),[$,z]=qe.useState(null),[B,F]=qe.useState(null),[W,H]=qe.useState(null),[V,G]=qe.useState(null);return qe.useEffect(()=>{null!==w&&w.setMap(y)},[y]),qe.useEffect(()=>{void 0!==t&&null!==w&&w.setOptions(t)},[w,t]),qe.useEffect(()=>{void 0!==r&&null!==w&&w.setDraggable(r)},[w,r]),qe.useEffect(()=>{void 0!==n&&null!==w&&w.setEditable(n)},[w,n]),qe.useEffect(()=>{void 0!==a&&null!==w&&w.setVisible(a)},[w,a]),qe.useEffect(()=>{void 0!==s&&null!==w&&w.setBounds(s)},[w,s]),qe.useEffect(()=>{w&&o&&(null!==k&&google.maps.event.removeListener(k),N(google.maps.event.addListener(w,"dblclick",o)))},[o]),qe.useEffect(()=>{w&&i&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(w,"dragend",i)))},[i]),qe.useEffect(()=>{w&&l&&(null!==C&&google.maps.event.removeListener(C),E(google.maps.event.addListener(w,"dragstart",l)))},[l]),qe.useEffect(()=>{w&&c&&(null!==P&&google.maps.event.removeListener(P),L(google.maps.event.addListener(w,"mousedown",c)))},[c]),qe.useEffect(()=>{w&&d&&(null!==O&&google.maps.event.removeListener(O),T(google.maps.event.addListener(w,"mousemove",d)))},[d]),qe.useEffect(()=>{w&&u&&(null!==M&&google.maps.event.removeListener(M),R(google.maps.event.addListener(w,"mouseout",u)))},[u]),qe.useEffect(()=>{w&&h&&(null!==A&&google.maps.event.removeListener(A),I(google.maps.event.addListener(w,"mouseover",h)))},[h]),qe.useEffect(()=>{w&&p&&(null!==D&&google.maps.event.removeListener(D),U(google.maps.event.addListener(w,"mouseup",p)))},[p]),qe.useEffect(()=>{w&&m&&(null!==$&&google.maps.event.removeListener($),z(google.maps.event.addListener(w,"rightclick",m)))},[m]),qe.useEffect(()=>{w&&g&&(null!==B&&google.maps.event.removeListener(B),F(google.maps.event.addListener(w,"click",g)))},[g]),qe.useEffect(()=>{w&&f&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(w,"drag",f)))},[f]),qe.useEffect(()=>{w&&v&&(null!==V&&google.maps.event.removeListener(V),G(google.maps.event.addListener(w,"bounds_changed",v)))},[v]),qe.useEffect(()=>{var e=new google.maps.Rectangle(hm(hm({},t),{},{map:y}));return void 0!==a&&e.setVisible(a),void 0!==n&&e.setEditable(n),void 0!==r&&e.setDraggable(r),void 0!==s&&e.setBounds(s),o&&N(google.maps.event.addListener(e,"dblclick",o)),i&&_(google.maps.event.addListener(e,"dragend",i)),l&&E(google.maps.event.addListener(e,"dragstart",l)),c&&L(google.maps.event.addListener(e,"mousedown",c)),d&&T(google.maps.event.addListener(e,"mousemove",d)),u&&R(google.maps.event.addListener(e,"mouseout",u)),h&&I(google.maps.event.addListener(e,"mouseover",h)),p&&U(google.maps.event.addListener(e,"mouseup",p)),m&&z(google.maps.event.addListener(e,"rightclick",m)),g&&F(google.maps.event.addListener(e,"click",g)),f&&H(google.maps.event.addListener(e,"drag",f)),v&&G(google.maps.event.addListener(e,"bounds_changed",v)),j(e),x&&x(e),()=>{null!==k&&google.maps.event.removeListener(k),null!==S&&google.maps.event.removeListener(S),null!==C&&google.maps.event.removeListener(C),null!==P&&google.maps.event.removeListener(P),null!==O&&google.maps.event.removeListener(O),null!==M&&google.maps.event.removeListener(M),null!==A&&google.maps.event.removeListener(A),null!==D&&google.maps.event.removeListener(D),null!==$&&google.maps.event.removeListener($),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==V&&google.maps.event.removeListener(V),b&&b(e),e.setMap(null)}},[]),null});class gm extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{rectangle:null}),Xu(this,"setRectangleCallback",()=>{null!==this.state.rectangle&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(hm(hm({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:mm,eventMap:pm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){null!==this.state.rectangle&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:mm,eventMap:pm,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ih(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}function fm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function vm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fm(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fm(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(gm,"contextType",rh);var xm={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},bm={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},ym={};qe.memo(function(e){var{options:t,center:s,radius:r,draggable:n,editable:a,visible:o,onDblClick:i,onDragEnd:l,onDragStart:c,onMouseDown:d,onMouseMove:u,onMouseOut:h,onMouseOver:p,onMouseUp:m,onRightClick:g,onClick:f,onDrag:v,onCenterChanged:x,onRadiusChanged:b,onLoad:y,onUnmount:w}=e,j=qe.useContext(rh),[k,N]=qe.useState(null),[S,_]=qe.useState(null),[C,E]=qe.useState(null),[P,L]=qe.useState(null),[O,T]=qe.useState(null),[M,R]=qe.useState(null),[A,I]=qe.useState(null),[D,U]=qe.useState(null),[$,z]=qe.useState(null),[B,F]=qe.useState(null),[W,H]=qe.useState(null),[V,G]=qe.useState(null),[q,K]=qe.useState(null),[Z,J]=qe.useState(null);return qe.useEffect(()=>{null!==k&&k.setMap(j)},[j]),qe.useEffect(()=>{void 0!==t&&null!==k&&k.setOptions(t)},[k,t]),qe.useEffect(()=>{void 0!==n&&null!==k&&k.setDraggable(n)},[k,n]),qe.useEffect(()=>{void 0!==a&&null!==k&&k.setEditable(a)},[k,a]),qe.useEffect(()=>{void 0!==o&&null!==k&&k.setVisible(o)},[k,o]),qe.useEffect(()=>{"number"==typeof r&&null!==k&&k.setRadius(r)},[k,r]),qe.useEffect(()=>{void 0!==s&&null!==k&&k.setCenter(s)},[k,s]),qe.useEffect(()=>{k&&i&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(k,"dblclick",i)))},[i]),qe.useEffect(()=>{k&&l&&(null!==C&&google.maps.event.removeListener(C),E(google.maps.event.addListener(k,"dragend",l)))},[l]),qe.useEffect(()=>{k&&c&&(null!==P&&google.maps.event.removeListener(P),L(google.maps.event.addListener(k,"dragstart",c)))},[c]),qe.useEffect(()=>{k&&d&&(null!==O&&google.maps.event.removeListener(O),T(google.maps.event.addListener(k,"mousedown",d)))},[d]),qe.useEffect(()=>{k&&u&&(null!==M&&google.maps.event.removeListener(M),R(google.maps.event.addListener(k,"mousemove",u)))},[u]),qe.useEffect(()=>{k&&h&&(null!==A&&google.maps.event.removeListener(A),I(google.maps.event.addListener(k,"mouseout",h)))},[h]),qe.useEffect(()=>{k&&p&&(null!==D&&google.maps.event.removeListener(D),U(google.maps.event.addListener(k,"mouseover",p)))},[p]),qe.useEffect(()=>{k&&m&&(null!==$&&google.maps.event.removeListener($),z(google.maps.event.addListener(k,"mouseup",m)))},[m]),qe.useEffect(()=>{k&&g&&(null!==B&&google.maps.event.removeListener(B),F(google.maps.event.addListener(k,"rightclick",g)))},[g]),qe.useEffect(()=>{k&&f&&(null!==W&&google.maps.event.removeListener(W),H(google.maps.event.addListener(k,"click",f)))},[f]),qe.useEffect(()=>{k&&v&&(null!==V&&google.maps.event.removeListener(V),G(google.maps.event.addListener(k,"drag",v)))},[v]),qe.useEffect(()=>{k&&x&&(null!==q&&google.maps.event.removeListener(q),K(google.maps.event.addListener(k,"center_changed",x)))},[f]),qe.useEffect(()=>{k&&b&&(null!==Z&&google.maps.event.removeListener(Z),J(google.maps.event.addListener(k,"radius_changed",b)))},[b]),qe.useEffect(()=>{var e=new google.maps.Circle(vm(vm({},t||ym),{},{map:j}));return"number"==typeof r&&e.setRadius(r),void 0!==s&&e.setCenter(s),"number"==typeof r&&e.setRadius(r),void 0!==o&&e.setVisible(o),void 0!==a&&e.setEditable(a),void 0!==n&&e.setDraggable(n),i&&_(google.maps.event.addListener(e,"dblclick",i)),l&&E(google.maps.event.addListener(e,"dragend",l)),c&&L(google.maps.event.addListener(e,"dragstart",c)),d&&T(google.maps.event.addListener(e,"mousedown",d)),u&&R(google.maps.event.addListener(e,"mousemove",u)),h&&I(google.maps.event.addListener(e,"mouseout",h)),p&&U(google.maps.event.addListener(e,"mouseover",p)),m&&z(google.maps.event.addListener(e,"mouseup",m)),g&&F(google.maps.event.addListener(e,"rightclick",g)),f&&H(google.maps.event.addListener(e,"click",f)),v&&G(google.maps.event.addListener(e,"drag",v)),x&&K(google.maps.event.addListener(e,"center_changed",x)),b&&J(google.maps.event.addListener(e,"radius_changed",b)),N(e),y&&y(e),()=>{null!==S&&google.maps.event.removeListener(S),null!==C&&google.maps.event.removeListener(C),null!==P&&google.maps.event.removeListener(P),null!==O&&google.maps.event.removeListener(O),null!==M&&google.maps.event.removeListener(M),null!==A&&google.maps.event.removeListener(A),null!==D&&google.maps.event.removeListener(D),null!==$&&google.maps.event.removeListener($),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==q&&google.maps.event.removeListener(q),null!==Z&&google.maps.event.removeListener(Z),w&&w(e),e.setMap(null)}},[]),null});class wm extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{circle:null}),Xu(this,"setCircleCallback",()=>{null!==this.state.circle&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(vm(vm({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:bm,eventMap:xm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){null!==this.state.circle&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:bm,eventMap:xm,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ih(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))}render(){return null}}function jm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function km(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jm(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jm(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(wm,"contextType",rh);var Nm={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},Sm={add(e,t){e.add(t)},addgeojson(e,t,s){e.addGeoJson(t,s)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,s,r){e.loadGeoJson(t,s,r)},overridestyle(e,t,s){e.overrideStyle(t,s)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};qe.memo(function(e){var{options:t,onClick:s,onDblClick:r,onMouseDown:n,onMouseMove:a,onMouseOut:o,onMouseOver:i,onMouseUp:l,onRightClick:c,onAddFeature:d,onRemoveFeature:u,onRemoveProperty:h,onSetGeometry:p,onSetProperty:m,onLoad:g,onUnmount:f}=e,v=qe.useContext(rh),[x,b]=qe.useState(null),[y,w]=qe.useState(null),[j,k]=qe.useState(null),[N,S]=qe.useState(null),[_,C]=qe.useState(null),[E,P]=qe.useState(null),[L,O]=qe.useState(null),[T,M]=qe.useState(null),[R,A]=qe.useState(null),[I,D]=qe.useState(null),[U,$]=qe.useState(null),[z,B]=qe.useState(null),[F,W]=qe.useState(null),[H,V]=qe.useState(null);return qe.useEffect(()=>{null!==x&&x.setMap(v)},[v]),qe.useEffect(()=>{x&&r&&(null!==y&&google.maps.event.removeListener(y),w(google.maps.event.addListener(x,"dblclick",r)))},[r]),qe.useEffect(()=>{x&&n&&(null!==j&&google.maps.event.removeListener(j),k(google.maps.event.addListener(x,"mousedown",n)))},[n]),qe.useEffect(()=>{x&&a&&(null!==N&&google.maps.event.removeListener(N),S(google.maps.event.addListener(x,"mousemove",a)))},[a]),qe.useEffect(()=>{x&&o&&(null!==_&&google.maps.event.removeListener(_),C(google.maps.event.addListener(x,"mouseout",o)))},[o]),qe.useEffect(()=>{x&&i&&(null!==E&&google.maps.event.removeListener(E),P(google.maps.event.addListener(x,"mouseover",i)))},[i]),qe.useEffect(()=>{x&&l&&(null!==L&&google.maps.event.removeListener(L),O(google.maps.event.addListener(x,"mouseup",l)))},[l]),qe.useEffect(()=>{x&&c&&(null!==T&&google.maps.event.removeListener(T),M(google.maps.event.addListener(x,"rightclick",c)))},[c]),qe.useEffect(()=>{x&&s&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(x,"click",s)))},[s]),qe.useEffect(()=>{x&&d&&(null!==I&&google.maps.event.removeListener(I),D(google.maps.event.addListener(x,"addfeature",d)))},[d]),qe.useEffect(()=>{x&&u&&(null!==U&&google.maps.event.removeListener(U),$(google.maps.event.addListener(x,"removefeature",u)))},[u]),qe.useEffect(()=>{x&&h&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(x,"removeproperty",h)))},[h]),qe.useEffect(()=>{x&&p&&(null!==F&&google.maps.event.removeListener(F),W(google.maps.event.addListener(x,"setgeometry",p)))},[p]),qe.useEffect(()=>{x&&m&&(null!==H&&google.maps.event.removeListener(H),V(google.maps.event.addListener(x,"setproperty",m)))},[m]),qe.useEffect(()=>{if(null!==v){var e=new google.maps.Data(km(km({},t),{},{map:v}));r&&w(google.maps.event.addListener(e,"dblclick",r)),n&&k(google.maps.event.addListener(e,"mousedown",n)),a&&S(google.maps.event.addListener(e,"mousemove",a)),o&&C(google.maps.event.addListener(e,"mouseout",o)),i&&P(google.maps.event.addListener(e,"mouseover",i)),l&&O(google.maps.event.addListener(e,"mouseup",l)),c&&M(google.maps.event.addListener(e,"rightclick",c)),s&&A(google.maps.event.addListener(e,"click",s)),d&&D(google.maps.event.addListener(e,"addfeature",d)),u&&$(google.maps.event.addListener(e,"removefeature",u)),h&&B(google.maps.event.addListener(e,"removeproperty",h)),p&&W(google.maps.event.addListener(e,"setgeometry",p)),m&&V(google.maps.event.addListener(e,"setproperty",m)),b(e),g&&g(e)}return()=>{x&&(null!==y&&google.maps.event.removeListener(y),null!==j&&google.maps.event.removeListener(j),null!==N&&google.maps.event.removeListener(N),null!==_&&google.maps.event.removeListener(_),null!==E&&google.maps.event.removeListener(E),null!==L&&google.maps.event.removeListener(L),null!==T&&google.maps.event.removeListener(T),null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==F&&google.maps.event.removeListener(F),null!==H&&google.maps.event.removeListener(H),f&&f(x),x.setMap(null))}},[]),null});class _m extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{data:null}),Xu(this,"setDataCallback",()=>{null!==this.state.data&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(null!==this.context){var e=new google.maps.Data(km(km({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:Sm,eventMap:Nm,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){null!==this.state.data&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Sm,eventMap:Nm,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ih(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}function Cm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Em(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cm(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(_m,"contextType",rh);var Pm={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},Lm={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class Om extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{kmlLayer:null}),Xu(this,"setKmlLayerCallback",()=>{null!==this.state.kmlLayer&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(Em(Em({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:Lm,eventMap:Pm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){null!==this.state.kmlLayer&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Lm,eventMap:Pm,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ih(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}function Tm(e,t){return"function"==typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function Mm(e,t){return new t(e.lat,e.lng)}function Rm(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function Am(e,t,s,r){return void 0!==s?function(e,t,s){var r=e&&e.fromLatLngToDivPixel(s.getNorthEast()),n=e&&e.fromLatLngToDivPixel(s.getSouthWest());return r&&n?{left:"".concat(n.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-n.x-t.x,"px"),height:"".concat(n.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(n=s,a=google.maps.LatLngBounds,o=Rm,n instanceof a?n:o(n,a))):function(e,t,s){var r=e&&e.fromLatLngToDivPixel(s);if(r){var{x:n,y:a}=r;return{left:"".concat(n+t.x,"px"),top:"".concat(a+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,s){return e instanceof t?e:s(e,t)}(r,google.maps.LatLng,Mm));var n,a,o}function Im(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Dm(e,t,s,r,n){class a extends google.maps.OverlayView{constructor(e,t,s,r){super(),this.container=e,this.pane=t,this.position=s,this.bounds=r}onAdd(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null==t||t.appendChild(this.container)}draw(){var e=this.getProjection(),t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Im(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Im(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},this.container?Tm(this.container,n):{x:0,y:0}),s=Am(e,t,this.bounds,this.position);for(var[r,a]of Object.entries(s))this.container.style[r]=a}onRemove(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}return new a(e,t,s,r)}function Um(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function $m(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function zm(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}Xu(Om,"contextType",rh),qe.memo(function(e){var{position:t,bounds:s,mapPaneName:r,zIndex:n,onLoad:a,onUnmount:o,getPixelPositionOffset:i,children:l}=e,c=qe.useContext(rh),d=qe.useMemo(()=>{var e=document.createElement("div");return e.style.position="absolute",e},[]),u=qe.useMemo(()=>Dm(d,r,t,s,i),[d,r,t,s]);return qe.useEffect(()=>(null==a||a(u),null==u||u.setMap(c),()=>{null==o||o(u),null==u||u.setMap(null)}),[c,u]),qe.useEffect(()=>{d.style.zIndex="".concat(n)},[n,d]),Ge.createPortal(l,d)});class Bm extends qe.PureComponent{constructor(e){super(e),Xu(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Xu(this,"updatePane",()=>{var e=this.props.mapPaneName,t=this.overlayView.getPanes();sh(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?this.setState({paneEl:t[e]}):this.setState({paneEl:null})}),Xu(this,"onAdd",()=>{var e,t;this.updatePane(),null===(e=(t=this.props).onLoad)||void 0===e||e.call(t,this.overlayView)}),Xu(this,"onPositionElement",()=>{var e,t,s,r,n,a,o=this.overlayView.getProjection(),i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Um(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Um(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({x:0,y:0},this.containerRef.current?Tm(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=Am(o,i,this.props.bounds,this.props.position);(n=l,a={left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height},n.left!==a.left||n.top!==a.top||n.width!==a.height||n.height!==a.height)&&this.setState({containerStyle:{top:null!==(e=l.top)&&void 0!==e?e:0,left:null!==(t=l.left)&&void 0!==t?t:0,width:null!==(s=l.width)&&void 0!==s?s:0,height:null!==(r=l.height)&&void 0!==r?r:0,position:"absolute"}})}),Xu(this,"draw",()=>{this.onPositionElement()}),Xu(this,"onRemove",()=>{var e,t;this.setState(()=>({paneEl:null})),null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t,this.overlayView)}),this.containerRef=qe.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=$m(e.position),s=$m(this.props.position),r=zm(e.bounds),n=zm(this.props.bounds);t===s&&r===n||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var t=this.state.paneEl;return t?Ge.createPortal(e.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:qe.Children.only(this.props.children)}),t):null}}function Fm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Wm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fm(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(Bm,"FLOAT_PANE","floatPane"),Xu(Bm,"MAP_PANE","mapPane"),Xu(Bm,"MARKER_LAYER","markerLayer"),Xu(Bm,"OVERLAY_LAYER","overlayLayer"),Xu(Bm,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),Xu(Bm,"contextType",rh);var Hm={onDblClick:"dblclick",onClick:"click"},Vm={opacity(e,t){e.setOpacity(t)}};qe.memo(function(e){var{url:t,bounds:s,options:r,visible:n}=e,a=qe.useContext(rh),o=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east)),i=qe.useMemo(()=>new google.maps.GroundOverlay(t,o,r),[]);return qe.useEffect(()=>{null!==i&&i.setMap(a)},[a]),qe.useEffect(()=>{void 0!==t&&null!==i&&(i.set("url",t),i.setMap(a))},[i,t]),qe.useEffect(()=>{void 0!==n&&null!==i&&i.setOpacity(n?1:0)},[i,n]),qe.useEffect(()=>{var e=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east));void 0!==s&&null!==i&&(i.set("bounds",e),i.setMap(a))},[i,s]),null});class Gm extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{groundOverlay:null}),Xu(this,"setGroundOverlayCallback",()=>{null!==this.state.groundOverlay&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){sh(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Wm(Wm({},this.props.options),{},{map:this.context}));this.registeredEvents=lh({updaterMap:Vm,eventMap:Hm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){null!==this.state.groundOverlay&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Vm,eventMap:Hm,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}function qm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Km(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qm(Object(s),!0).forEach(function(t){Xu(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qm(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Xu(Gm,"defaultProps",{onLoad:function(){}}),Xu(Gm,"contextType",rh);var Zm={},Jm={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};qe.memo(function(e){var{data:t,onLoad:s,onUnmount:r,options:n}=e,a=qe.useContext(rh),[o,i]=qe.useState(null);return qe.useEffect(()=>{google.maps.visualization||sh(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),qe.useEffect(()=>{sh(!!t,"data property is required in HeatmapLayer %s",t)},[t]),qe.useEffect(()=>{null!==o&&o.setMap(a)},[a]),qe.useEffect(()=>{n&&null!==o&&o.setOptions(n)},[o,n]),qe.useEffect(()=>{var e=new google.maps.visualization.HeatmapLayer(Km(Km({},n),{},{data:t,map:a}));return i(e),s&&s(e),()=>{null!==o&&(r&&r(o),o.setMap(null))}},[]),null});class Ym extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{heatmapLayer:null}),Xu(this,"setHeatmapLayerCallback",()=>{null!==this.state.heatmapLayer&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){sh(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),sh(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Km(Km({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=lh({updaterMap:Jm,eventMap:Zm,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Jm,eventMap:Zm,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ih(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Xu(Ym,"contextType",rh);var Xm={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Qm={register(e,t,s){e.registerPanoProvider(t,s)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class eg extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{streetViewPanorama:null}),Xu(this,"setStreetViewPanoramaCallback",()=>{null!==this.state.streetViewPanorama&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,s=null!==(e=null===(t=this.context)||void 0===t?void 0:t.getStreetView())&&void 0!==e?e:null;this.registeredEvents=lh({updaterMap:Qm,eventMap:Xm,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({streetViewPanorama:s}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){null!==this.state.streetViewPanorama&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:Qm,eventMap:Xm,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ih(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Xu(eg,"contextType",rh);class tg extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"state",{streetViewService:null}),Xu(this,"setStreetViewServiceCallback",()=>{null!==this.state.streetViewService&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Xu(tg,"contextType",rh);var sg={onDirectionsChanged:"directions_changed"},rg={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class ng extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"state",{directionsRenderer:null}),Xu(this,"setDirectionsRendererCallback",()=>{null!==this.state.directionsRenderer&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=lh({updaterMap:rg,eventMap:sg,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){null!==this.state.directionsRenderer&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:rg,eventMap:sg,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ih(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Xu(ng,"contextType",rh);var ag={onPlacesChanged:"places_changed"},og={bounds(e,t){e.setBounds(t)}};class ig extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"containerElement",qe.createRef()),Xu(this,"state",{searchBox:null}),Xu(this,"setSearchBoxCallback",()=>{null!==this.state.searchBox&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(sh(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=lh({updaterMap:og,eventMap:ag,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){null!==this.state.searchBox&&(ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:og,eventMap:ag,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ih(this.registeredEvents))}render(){return e.jsx("div",{ref:this.containerElement,children:qe.Children.only(this.props.children)})}}Xu(ig,"contextType",rh);var lg={onPlaceChanged:"place_changed"},cg={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class dg extends qe.PureComponent{constructor(){super(...arguments),Xu(this,"registeredEvents",[]),Xu(this,"containerElement",qe.createRef()),Xu(this,"state",{autocomplete:null}),Xu(this,"setAutocompleteCallback",()=>{null!==this.state.autocomplete&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;sh(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var s=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=lh({updaterMap:cg,eventMap:lg,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({autocomplete:s}),this.setAutocompleteCallback)}}componentDidUpdate(e){ih(this.registeredEvents),this.registeredEvents=lh({updaterMap:cg,eventMap:lg,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){null!==this.state.autocomplete&&ih(this.registeredEvents)}render(){return e.jsx("div",{ref:this.containerElement,className:this.props.className,children:qe.Children.only(this.props.children)})}}Xu(dg,"defaultProps",{className:""}),Xu(dg,"contextType",rh);const ug={width:"100%",height:"500px"},hg={lat:25.2048,lng:55.2708};function pg({initialLat:t,initialLng:s,initialAddress:r,onLocationChange:n}){const{isLoaded:a,loadError:o}=function(e){var{id:t=jh.id,version:s=jh.version,nonce:r,googleMapsApiKey:n,language:a,region:o,libraries:i=Rh,preventGoogleFontsLoading:l,mapIds:c,authReferrerPolicy:d}=e,u=qe.useRef(!1),[h,p]=qe.useState(!1),[m,g]=qe.useState(void 0);qe.useEffect(function(){return u.current=!0,()=>{u.current=!1}},[]);var f=qe.useMemo(()=>new Mh({id:t,apiKey:n,version:s,libraries:i,language:a||"en",region:o||"US",mapIds:c||[],nonce:r||"",authReferrerPolicy:d||"origin"}),[t,n,s,i,a,o,c,r,d]);qe.useEffect(function(){h||f.load().then(()=>{u.current&&p(!0)}).catch(e=>{g(e)})},[]),qe.useEffect(()=>{gh&&l&&xh()},[l]);var v=qe.useRef();return qe.useEffect(()=>{v.current&&i!==v.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),v.current=i},[i]),{isLoaded:h,loadError:m}}({id:"google-map-script",googleMapsApiKey:"",libraries:["places"]}),[i,l]=qe.useState(t&&s?{lat:t,lng:s}:null),[c,d]=qe.useState(r||""),[u,h]=qe.useState(t&&s?{lat:t,lng:s}:hg),[p,m]=qe.useState(!1),[g,f]=qe.useState(null),v=qe.useRef(null),x=qe.useCallback(e=>{v.current=e},[]),b=async(e,t)=>{if(a){m(!0),f(null);try{const s=new google.maps.Geocoder,r=await s.geocode({location:{lat:e,lng:t}});if(r.results&&r.results[0]){const s=r.results[0].formatted_address;d(s),n(e,t,s)}}catch(s){console.error("Geocoding error:",s),f("Failed to get address for this location")}finally{m(!1)}}},y=qe.useCallback(e=>{if(e.latLng){const t=e.latLng.lat(),s=e.latLng.lng();l({lat:t,lng:s}),b(t,s)}},[a]),w=async()=>{if(c.trim()&&a){m(!0),f(null);try{const e=new google.maps.Geocoder,t=await e.geocode({address:c});if(t.results&&t.results[0]){const e=t.results[0].geometry.location,s=e.lat(),r=e.lng(),a=t.results[0].formatted_address;l({lat:s,lng:r}),h({lat:s,lng:r}),d(a),n(s,r,a),v.current&&(v.current.panTo({lat:s,lng:r}),v.current.setZoom(15))}else f("Location not found. Please try a different search.")}catch(e){console.error("Search error:",e),f("Failed to search for location. Please try again.")}finally{m(!1)}}};return o?e.jsx(Gu,{variant:"destructive",children:e.jsx(Ku,{children:"Failed to load Google Maps. Please check your API key configuration."})}):a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Nr,{type:"text",placeholder:"Search for an address or area in UAE...",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&w(),className:"pl-10",disabled:p})]}),e.jsx(kr,{onClick:w,disabled:p||!c.trim(),children:p?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching..."]}):"Search"}),e.jsx(kr,{variant:"outline",onClick:()=>{navigator.geolocation?(m(!0),f(null),navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,s=e.coords.longitude;l({lat:t,lng:s}),h({lat:t,lng:s}),b(t,s),v.current&&(v.current.panTo({lat:t,lng:s}),v.current.setZoom(15))},e=>{console.error("Geolocation error:",e),f("Failed to get your location. Please check your browser permissions."),m(!1)})):f("Geolocation is not supported by your browser")},disabled:p,children:e.jsx(pe,{className:"h-4 w-4"})})]}),g&&e.jsx(Gu,{variant:"destructive",children:e.jsx(Ku,{children:g})}),i&&e.jsx(Dl,{children:e.jsx(Bl,{className:"pt-4",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-primary mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Selected Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c||"Location set"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Coordinates: ",i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]})})})}),e.jsx("div",{className:"rounded-lg overflow-hidden border",children:e.jsx(uh,{mapContainerStyle:ug,center:u,zoom:i?15:11,onClick:y,onLoad:x,options:{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},children:i&&e.jsx(Xh,{position:i,animation:google.maps.Animation.DROP})})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Click anywhere on the map to set your property location"})]}):e.jsx("div",{className:"flex items-center justify-center h-[500px]",children:e.jsx(ve,{className:"h-8 w-8 animate-spin text-primary"})})}function mg(){var t;const{createProperty:s,generateAIDescription:r,getUAEEmirates:n,getEmirateAreas:a,getUAEPropertyTypes:i,getUAEAmenities:l}=Il(),c=os(),[d,u]=qe.useState("basic-info"),[h,p]=qe.useState(!1),[m,g]=qe.useState(!1),[f,v]=qe.useState(!1),[x,b]=qe.useState({}),[y,w]=qe.useState([]),[j,k]=qe.useState([]),[N,S]=qe.useState({}),[_,C]=qe.useState([]),[E,P]=qe.useState(!1),[L,O]=qe.useState({title:"",address:"",city:"",state:"",country:"UAE",property_type:"",bedrooms:1,bathrooms:1,max_guests:2,price_per_night:500,description:"",images:[],amenities:[]}),T=[{id:"basic-info",title:"Basic Info",icon:xe,description:"Property basics"},{id:"location",title:"Location",icon:pe,description:"Set on map"},{id:"details",title:"Details",icon:U,description:"Size & capacity"},{id:"images",title:"Photos",icon:be,description:"Upload images"},{id:"amenities",title:"Amenities",icon:ye,description:"Features & perks"},{id:"pricing",title:"Pricing",icon:W,description:"Set your rate"},{id:"preview",title:"Preview",icon:le,description:"Review & publish"}];qe.useEffect(()=>{M()},[]),qe.useEffect(()=>{L.state&&R(L.state)},[L.state]);const M=async()=>{try{const[e,t,s]=await Promise.all([n(),i(),l()]);w(e),S(t),C(s)}catch(e){console.error("Failed to load UAE data from API, using fallback data:",e),w([{value:"Dubai",label:"Dubai"},{value:"Abu Dhabi",label:"Abu Dhabi"},{value:"Sharjah",label:"Sharjah"},{value:"Ajman",label:"Ajman"},{value:"Ras Al Khaimah",label:"Ras Al Khaimah"},{value:"Fujairah",label:"Fujairah"},{value:"Umm Al Quwain",label:"Umm Al Quwain"}]),S({apartment:"Apartment",villa:"Villa",townhouse:"Townhouse",penthouse:"Penthouse",studio:"Studio",duplex:"Duplex",loft:"Loft",compound:"Compound",hotel_apartment:"Hotel Apartment",office:"Office",retail:"Retail Space"}),C(["Central Air Conditioning","Maid's Room","Driver's Room","Built-in Wardrobes","Covered Parking","24/7 Security","Swimming Pool","Gym","Children's Play Area","WiFi","Kitchen","Washing Machine","TV","Balcony","Sea View","City View"])}},R=async e=>{P(!0);try{const t=await a(e);k(t)}catch(t){console.error("Failed to load emirate areas from API, using fallback data:",t);k({Dubai:["Downtown Dubai","Dubai Marina","Jumeirah Beach Residence (JBR)","Business Bay","Palm Jumeirah","Jumeirah","Arabian Ranches","Dubai Hills Estate","City Walk","DIFC","Al Barsha","The Greens"],"Abu Dhabi":["Abu Dhabi City","Yas Island","Saadiyat Island","Al Reem Island","Khalifa City","Al Raha","Masdar City","Corniche","Al Maryah Island"],Sharjah:["Sharjah City","Al Majaz","Al Nahda","Al Khan","Al Qasba"],Ajman:["Ajman City","Al Nuaimiya","Al Rashidiya","Corniche Road"],"Ras Al Khaimah":["Ras Al Khaimah City","Al Hamra","Al Marjan Island","Al Rams"],Fujairah:["Fujairah City","Dibba","Kalba","Khor Fakkan"],"Umm Al Quwain":["Umm Al Quwain City","Al Salam City","Falaj Al Mualla"]}[e]||[])}finally{P(!1)}},A=e=>{O(t=>({...t,state:e,city:""})),b(e=>({...e,state:"",city:""}))},D=T.findIndex(e=>e.id===d),$=async()=>{const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/*",e.onchange=async e=>{var t;const s=e.target.files;if(s&&s.length>0){v(!0),b(e=>({...e,images:""}));try{console.log("Starting upload of",s.length,"files");const e=await Zu(s,"properties"),r=e.filter(e=>e.success&&e.url).map(e=>e.url),n=e.filter(e=>!e.success);if(r.length>0&&(O(e=>({...e,images:[...e.images,...r].slice(0,10)})),console.log("Successfully uploaded",r.length,"images")),n.length>0){const e=`Failed to upload ${n.length} image(s). ${(null==(t=n[0])?void 0:t.error)||"Unknown error"}`;b(t=>({...t,images:e})),console.error("Upload failures:",n)}}catch(r){console.error("Upload error:",r),b(e=>({...e,images:"Failed to upload images. Please try again."}))}finally{v(!1)}}},e.click()},z=async()=>{g(!0);try{console.log("Generating AI description with data:",L);const e=await r({property_type:L.property_type,city:L.city,state:L.state,bedrooms:L.bedrooms,bathrooms:L.bathrooms,max_guests:L.max_guests,amenities:L.amenities,address:L.address});console.log("Generated description:",e),O(t=>({...t,description:e}))}catch(e){console.error("Failed to generate description:",e),console.error("Error details:",e.message,e.status);const t=`Beautiful ${L.property_type.toLowerCase()} in ${L.city}, ${L.state}. This ${L.bedrooms}-bedroom property can accommodate up to ${L.max_guests} guests. Perfect for your next getaway!`;O(e=>({...e,description:t}))}finally{g(!1)}},B=()=>{switch(d){case"basic-info":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Let's start with the basics"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your property"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(Su,{htmlFor:"title",children:"Property Title *"}),e.jsx(Nr,{id:"title",placeholder:"e.g., Cozy Downtown Apartment",value:L.title,onChange:e=>O(t=>({...t,title:e.target.value})),className:"input-enhanced "+(x.title?"border-red-500":"")}),x.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.title})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(Su,{htmlFor:"address",children:"Address *"}),e.jsx(Nr,{id:"address",placeholder:"123 Main Street",value:L.address,onChange:e=>O(t=>({...t,address:e.target.value})),className:x.address?"border-red-500":""}),x.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.address})]}),e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"state",children:"Emirate *"}),e.jsxs(iu,{value:L.state,onValueChange:A,children:[e.jsx(cu,{className:x.state?"border-red-500":"",children:e.jsx(lu,{placeholder:"Select Emirate"})}),e.jsx(du,{children:y.map(t=>e.jsx(uu,{value:t.value,children:t.label},t.value))})]}),x.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.state})]}),e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"city",children:"Area/City *"}),e.jsxs(iu,{value:L.city,onValueChange:e=>O(t=>({...t,city:e})),disabled:!L.state||E,children:[e.jsx(cu,{className:x.city?"border-red-500":"",children:e.jsx(lu,{placeholder:L.state?E?"Loading areas...":"Select Area/City":"Select Emirate first"})}),e.jsx(du,{children:j.map(t=>e.jsx(uu,{value:t,children:t},t))})]}),x.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.city})]}),e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"country",children:"Country"}),e.jsxs(iu,{value:L.country,onValueChange:e=>O(t=>({...t,country:e})),children:[e.jsx(cu,{children:e.jsx(lu,{})}),e.jsx(du,{children:e.jsx(uu,{value:"UAE",children:"United Arab Emirates "})})]})]}),e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"property_type",children:"Property Type *"}),e.jsxs(iu,{value:L.property_type,onValueChange:e=>O(t=>({...t,property_type:e})),children:[e.jsx(cu,{className:x.property_type?"border-red-500":"",children:e.jsx(lu,{placeholder:"Select type"})}),e.jsx(du,{children:Object.entries(N).map(([t,s])=>e.jsx(uu,{value:t,children:s},t))})]}),x.property_type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.property_type})]})]})]});case"location":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set Property Location"}),e.jsx("p",{className:"text-gray-600",children:"Pin your exact property location on the map"})]}),e.jsx(pg,{initialLat:L.latitude,initialLng:L.longitude,initialAddress:L.address,onLocationChange:(e,t,s)=>{O(r=>({...r,latitude:e,longitude:t,address:s}))}}),x.location&&e.jsx(Gu,{variant:"destructive",children:e.jsx(Ku,{children:x.location})})]});case"details":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Property Details"}),e.jsx("p",{className:"text-gray-600",children:"Help guests understand your space"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(Nr,{id:"bedrooms",type:"number",min:"0",value:L.bedrooms,onChange:e=>O(t=>({...t,bedrooms:parseInt(e.target.value)||0})),className:x.bedrooms?"border-red-500":""}),x.bedrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.bedrooms})]}),e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(Nr,{id:"bathrooms",type:"number",min:"0",step:"0.5",value:L.bathrooms,onChange:e=>O(t=>({...t,bathrooms:parseFloat(e.target.value)||0})),className:x.bathrooms?"border-red-500":""}),x.bathrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.bathrooms})]}),e.jsxs("div",{children:[e.jsx(Su,{htmlFor:"max_guests",children:"Max Guests"}),e.jsx(Nr,{id:"max_guests",type:"number",min:"1",value:L.max_guests,onChange:e=>O(t=>({...t,max_guests:parseInt(e.target.value)||1})),className:x.max_guests?"border-red-500":""}),x.max_guests&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.max_guests})]})]})]});case"images":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add Photos"}),e.jsx("p",{className:"text-gray-600",children:"Show off your space with beautiful photos"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Photos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add up to 10 high-quality photos of your property"}),e.jsxs(kr,{onClick:$,size:"lg",disabled:f,className:"krib-button-primary",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),f?"Uploading...":"Choose Photos"]}),x.images&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:x.images})]}),L.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:L.images.map((t,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:`Property ${s+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>(e=>{O(t=>({...t,images:t.images.filter((t,s)=>s!==e)}))})(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(o,{className:"h-4 w-4"})})]},s))})]});case"amenities":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Amenities"}),e.jsx("p",{className:"text-gray-600",children:"What does your property offer?"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:_.map(t=>e.jsx("div",{onClick:()=>(e=>{O(t=>({...t,amenities:t.amenities.includes(e)?t.amenities.filter(t=>t!==e):[...t.amenities,e]}))})(t),className:"p-3 border rounded-lg cursor-pointer transition-all "+(L.amenities.includes(t)?"border-krib-lime bg-krib-lime-soft text-krib-black":"border-gray-300 hover:border-gray-400"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hu,{checked:L.amenities.includes(t),onChange:()=>{}}),e.jsx("span",{className:"text-sm font-medium",children:t})]})},t))})]});case"pricing":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set Your Price"}),e.jsx("p",{className:"text-gray-600",children:"How much do you want to charge per night?"})]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Su,{htmlFor:"price_per_night",children:"Price per Night (AED)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"AED"}),e.jsx(Nr,{id:"price_per_night",type:"number",min:"1",value:L.price_per_night,onChange:e=>O(t=>({...t,price_per_night:parseInt(e.target.value)||1})),className:"pl-14 text-lg "+(x.price_per_night?"border-red-500":"")})]}),x.price_per_night&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.price_per_night})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Su,{htmlFor:"description",children:"Description"}),e.jsx(kr,{variant:"outline",size:"sm",onClick:z,disabled:m,className:"h-10 px-4 rounded-xl border-2 border-krib-lime text-krib-lime hover:bg-krib-lime hover:text-krib-black transition-all duration-200 font-medium shadow-sm hover:shadow-md group",children:m?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-krib-lime border-t-transparent rounded-full mr-2"}),"Generating..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"h-4 w-4 mr-2 group-hover:scale-110 transition-transform duration-200"})," AI Generate"]})})]}),e.jsx(ju,{id:"description",placeholder:"Describe your property...",value:L.description,onChange:e=>O(t=>({...t,description:e.target.value})),rows:6,className:x.description?"border-red-500":""}),x.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.description})]})]});case"preview":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Listing"}),e.jsx("p",{className:"text-gray-600",children:"Make sure everything looks perfect"})]}),x.general&&e.jsxs(Gu,{className:"mb-4",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx(Ku,{children:x.general})]}),e.jsx(Dl,{className:"krib-card",children:e.jsx(Bl,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:L.title}),e.jsxs("p",{className:"text-gray-600",children:[L.address,", ",L.city,", ",L.state]})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[L.bedrooms," bed"]}),e.jsxs("span",{children:[L.bathrooms," bath"]}),e.jsxs("span",{children:[L.max_guests," guests"]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["AED ",L.price_per_night,"/night"]})]}),L.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2",children:L.images.slice(0,3).map((t,s)=>e.jsx("img",{src:t,alt:`Property ${s+1}`,className:"w-full h-24 object-cover rounded"},s))}),e.jsx("p",{className:"text-gray-700",children:L.description}),L.amenities.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L.amenities.map(t=>e.jsx(Hc,{variant:"secondary",children:t},t))})]})]})})})]});case"published":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(le,{className:"h-10 w-10 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" Property Published!"}),e.jsx("p",{className:"text-gray-600",children:"Your property is now live and ready to receive bookings."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(kr,{onClick:()=>u("basic-info"),variant:"outline",className:"w-full h-12 rounded-xl border-2 hover:bg-gray-50",children:"Add Another Property"}),e.jsx(kr,{onClick:()=>c("/properties"),className:"w-full h-12 rounded-xl krib-button-primary",children:"View My Properties"})]})]});default:return null}};return"published"===d?e.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:B()}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add New Property"}),e.jsx("p",{className:"text-gray-600",children:"Create a stunning listing for your rental property"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:T.map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(s<=D?"bg-krib-lime text-krib-black":"bg-gray-200 text-gray-500"),children:e.jsx(t.icon,{className:"h-5 w-5"})}),s<T.length-1&&e.jsx("div",{className:"w-16 h-1 mx-2 "+(s<D?"bg-krib-lime":"bg-gray-200")})]},t.id))}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",D+1," of ",T.length,": ",null==(t=T[D])?void 0:t.description]})})]}),e.jsx(Dl,{className:"mb-8 card-elevated",children:e.jsx(Bl,{className:"p-8 form-section",children:B()})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(kr,{variant:"outline",onClick:()=>{const e=D-1;e>=0&&u(T[e].id)},disabled:0===D,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex gap-2",children:D===T.length-1?e.jsx(kr,{onClick:async()=>{p(!0),b({});try{console.log("Publishing property with data:",L);const e={title:L.title,address:L.address,city:L.city,state:L.state,country:L.country,property_type:L.property_type,bedrooms:L.bedrooms,bathrooms:L.bathrooms,max_guests:L.max_guests,price_per_night:L.price_per_night,description:L.description,images:L.images,amenities:L.amenities,status:"active"};console.log("Sending payload to backend:",e);const t=await s(e);console.log("Property created successfully:",t),t?u("published"):b({general:"Failed to create property. Please try again."})}catch(e){console.error("Error creating property:",e),b({general:e.message||"Failed to create property. Please check your connection and try again."})}finally{p(!1)}},disabled:h,size:"lg",className:"px-8 krib-button-primary",children:h?"Publishing...":"Publish Property"}):e.jsxs(kr,{onClick:()=>{if((e=>{const t={};switch(e){case"basic-info":L.title.trim()||(t.title="Property title is required"),L.city.trim()||(t.city="City is required"),L.state.trim()||(t.state="State is required"),L.property_type||(t.property_type="Property type is required");break;case"location":L.latitude&&L.longitude||(t.location="Please select a location on the map"),L.address.trim()||(t.address="Address is required");break;case"details":L.bedrooms<0&&(t.bedrooms="Bedrooms cannot be negative"),L.bathrooms<0&&(t.bathrooms="Bathrooms cannot be negative"),L.max_guests<1&&(t.max_guests="Must accommodate at least 1 guest");break;case"pricing":L.price_per_night<1&&(t.price_per_night="Price must be at least $1"),L.description.trim()||(t.description="Description is required")}return b(t),0===Object.keys(t).length})(d)){const e=D+1;e<T.length&&u(T[e].id)}},size:"lg",className:"px-8 krib-button-primary",children:["Next",e.jsx(I,{className:"h-4 w-4 ml-2"})]})})]})]})}function gg(){var t,s,r,n,a,o;const{getAnalytics:i}=Il(),[l,c]=qe.useState(null),[d,u]=qe.useState("12months"),[h,p]=qe.useState(!0),[m,g]=qe.useState(null),[f,v]=qe.useState(null),[x,b]=qe.useState("revenue");qe.useEffect(()=>{(async()=>{p(!0);try{console.log("Loading analytics data...");const e=await i();console.log("Analytics data received:",e),c(e),e.market_insights&&g(e.market_insights),e.forecast&&v(e.forecast)}catch(e){console.error("Failed to load analytics:",e),console.error("Error details:",e.message,e.status),c({totalRevenue:0,totalBookings:0,totalProperties:0,occupancyRate:0,monthlyData:[],propertyPerformance:[]})}finally{p(!1)}})()},[d]);if(h)return e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-64"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-24 bg-muted rounded"},s))}),e.jsx("div",{className:"h-96 bg-muted rounded"})]})});const y=(null==l?void 0:l.monthlyData)||[];null==l||l.propertyPerformance;const w=[{title:"Total Revenue",value:`$${(null==(t=null==l?void 0:l.totalRevenue)?void 0:t.toLocaleString())||"0"}`,change:(null==l?void 0:l.monthly_growth)?`${l.monthly_growth>0?"+":""}${l.monthly_growth.toFixed(1)}%`:"0%",trend:"up",icon:W,color:"text-green-600"},{title:"Total Bookings",value:(null==(s=null==l?void 0:l.totalBookings)?void 0:s.toString())||"0",change:(null==l?void 0:l.booking_growth)?`${l.booking_growth>0?"+":""}${l.booking_growth.toFixed(1)}%`:"0%",trend:"up",icon:F,color:"text-krib-lime"},{title:"Average Rating",value:l?(l.average_rating||0).toFixed(1):"0.0",change:(null==l?void 0:l.rating_change)?`${l.rating_change>0?"+":""}${l.rating_change.toFixed(1)}`:"0",trend:"up",icon:G,color:"text-yellow-600"},{title:"Occupancy Rate",value:`${(null==l?void 0:l.occupancyRate)||0}%`,change:"-2.1%",trend:"down",icon:Se,color:"text-purple-600"}],j=[{name:"Occupied",value:(null==l?void 0:l.occupancyRate)||0,color:"#22c55e"},{name:"Available",value:100-((null==l?void 0:l.occupancyRate)||0),color:"#e5e7eb"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered insights and market intelligence for your rental business."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(kr,{onClick:()=>{const e={period:d,revenue:(null==l?void 0:l.totalRevenue)||0,bookings:(null==l?void 0:l.totalBookings)||0,properties:(null==l?void 0:l.totalProperties)||0,occupancyRate:(null==l?void 0:l.occupancyRate)||0,forecast:f,marketComparison:(null==l?void 0:l.marketComparison)||null,generatedAt:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`analytics-report-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},variant:"outline",size:"sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(iu,{value:d,onValueChange:u,children:[e.jsx(cu,{className:"w-[180px]",children:e.jsx(lu,{placeholder:"Select period"})}),e.jsxs(du,{children:[e.jsx(uu,{value:"7days",children:"Last 7 days"}),e.jsx(uu,{value:"30days",children:"Last 30 days"}),e.jsx(uu,{value:"3months",children:"Last 3 months"}),e.jsx(uu,{value:"12months",children:"Last 12 months"})]})]})]})]}),e.jsxs(Gu,{children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx(qu,{children:"AI Insights"}),e.jsx(Ku,{children:"Based on market analysis, you could increase revenue by 18% by optimizing pricing for the next 30 days."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:w.map(t=>e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:["up"===t.trend?e.jsx(J,{className:"h-3 w-3 text-green-600 mr-1"}):e.jsx(Ee,{className:"h-3 w-3 text-red-600 mr-1"}),t.change," from last period"]})]})]},t.title))}),e.jsxs(cc,{value:x,onValueChange:b,className:"space-y-4",children:[e.jsxs(dc,{className:"grid w-full grid-cols-7",children:[e.jsx(uc,{value:"revenue",children:"Revenue"}),e.jsx(uc,{value:"forecast",children:"Forecast"}),e.jsx(uc,{value:"market",children:"Market"}),e.jsx(uc,{value:"pricing",children:"Pricing"}),e.jsx(uc,{value:"competition",children:"Competition"}),e.jsx(uc,{value:"insights",children:"Insights"}),e.jsx(uc,{value:"occupancy",children:"Occupancy"})]}),e.jsx(hc,{value:"revenue",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-7",children:[e.jsxs(Dl,{className:"md:col-span-4 krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Revenue Trend Analysis"}),e.jsx(zl,{children:"Revenue performance with trend analysis and predictions"})]}),e.jsx(Bl,{children:e.jsx(et,{width:"100%",height:300,children:e.jsxs(tt,{data:y,children:[e.jsx(st,{strokeDasharray:"3 3"}),e.jsx(rt,{dataKey:"month"}),e.jsx(nt,{}),e.jsx(at,{formatter:e=>[`$${e}`,"Revenue"]}),e.jsx(ot,{type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb"}})]})})})]}),e.jsxs(Dl,{className:"md:col-span-3 krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Performance Metrics"}),e.jsx(zl,{children:"Key performance indicators"})]}),e.jsxs(Bl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"This Month"}),e.jsxs("span",{className:"font-medium",children:["$",(null==(r=null==l?void 0:l.current_month_revenue)?void 0:r.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Last Month"}),e.jsxs("span",{className:"font-medium",children:["$",(null==(n=null==l?void 0:l.last_month_revenue)?void 0:n.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{className:"text-sm",children:"Growth"}),e.jsx("span",{className:"font-medium",children:(null==l?void 0:l.monthly_growth)?`${l.monthly_growth>0?"+":""}${l.monthly_growth.toFixed(1)}%`:"0%"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Revenue Quality Score"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Diversification"}),e.jsxs("span",{children:[(null==l?void 0:l.diversification_score)||0,"%"]})]}),e.jsx(Fc,{value:(null==l?void 0:l.diversification_score)||0,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Stability"}),e.jsxs("span",{children:[(null==l?void 0:l.stability_score)||0,"%"]})]}),e.jsx(Fc,{value:(null==l?void 0:l.stability_score)||0,className:"h-2"})]})]})]})]})]})}),e.jsx(hc,{value:"forecast",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Dl,{className:"md:col-span-2 krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"UAE Market Forecast"}),e.jsx(zl,{children:"Real UAE seasonal patterns and revenue predictions"})]}),e.jsx(Bl,{children:(null==f?void 0:f.forecast_data)?e.jsx(et,{width:"100%",height:300,children:e.jsxs(it,{data:f.forecast_data,children:[e.jsx(st,{strokeDasharray:"3 3"}),e.jsx(rt,{dataKey:"month"}),e.jsx(nt,{}),e.jsx(at,{formatter:(e,t)=>[`AED ${e}`,"Forecasted Revenue"]}),e.jsx(lt,{type:"monotone",dataKey:"forecasted_revenue",stroke:"#10b981",fill:"#10b981",fillOpacity:.3})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading forecast data..."})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Dubai Market Insights"}),e.jsx(zl,{children:"Real market predictions and seasonal trends"})]}),e.jsxs(Bl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Next Quarter Forecast"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["AED ",(null==(a=null==f?void 0:f.next_quarter_revenue)?void 0:a.toLocaleString())||"0"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Based on UAE seasonality"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Confidence Level"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fc,{value:(null==f?void 0:f.confidence)||0,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[(null==f?void 0:f.confidence)||0,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Peak Period"}),e.jsx("div",{className:"text-sm",children:e.jsx("strong",{children:(null==f?void 0:f.peak_period)||"Winter Season"})})]}),(null==f?void 0:f.insights)&&e.jsxs(Gu,{children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx(Ku,{children:f.insights.seasonal_impact})]})]})]})]})}),e.jsx(hc,{value:"market",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"UAE Market Performance"}),e.jsx(zl,{children:"Your performance vs UAE market standards"})]}),e.jsx(Bl,{children:m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Market Position"}),e.jsxs(Hc,{variant:m.competitive_position<=3?"default":"secondary",children:["#",m.competitive_position," in area"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Your Performance: ",m.performance_vs_market,"%"]}),e.jsx("span",{className:"text-muted-foreground",children:"vs Market Average"})]})]}),m.area_insights&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Area: ",m.area_insights.area]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Tier: ",m.area_insights.tier]}),e.jsxs("p",{children:["Primary Demand: ",m.area_insights.primary_demand]})]})]})]}):e.jsx("div",{className:"text-muted-foreground",children:"Loading market data..."})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"UAE Seasonal Trends"}),e.jsx(zl,{children:"Real UAE seasonal demand patterns"})]}),e.jsxs(Bl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Market Health Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==m?void 0:m.market_health_score)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"/ 100"})]}),e.jsx(Fc,{value:(null==m?void 0:m.market_health_score)||0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Dubai Seasonal Demand"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Winter Peak (Dec-Feb)"}),e.jsx("span",{className:"font-medium text-green-600",children:"+50%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Winter High (Mar, Nov)"}),e.jsx("span",{className:"font-medium text-blue-600",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shoulder (Apr, Oct)"}),e.jsx("span",{className:"font-medium",children:"Normal"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Summer Low (May-Sep)"}),e.jsx("span",{className:"font-medium text-red-600",children:"-30%"})]})]})]}),e.jsxs(Gu,{children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx(Ku,{children:"UAE winter season (Dec-Mar) offers premium pricing opportunities with 40-50% higher demand."})]})]})]})]})}),e.jsx(hc,{value:"pricing",className:"space-y-4",children:e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"UAE Dynamic Pricing"}),e.jsx(zl,{children:"Real-time pricing optimization based on UAE events, seasons, and demand"})]}),e.jsx(Bl,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Gu,{children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Dynamic pricing is now available per property. View individual property pricing recommendations in the Properties section."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"UAE Seasonal Pricing Strategy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Winter Peak (Dec-Feb)"}),e.jsx("p",{className:"text-sm text-green-600",children:"European winter escape season"})]}),e.jsx(Hc,{className:"bg-green-100 text-green-800",children:"+50%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Winter High (Mar, Nov)"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Pleasant weather months"})]}),e.jsx(Hc,{className:"bg-blue-100 text-blue-800",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Shoulder (Apr, Oct)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Moderate demand periods"})]}),e.jsx(Hc,{variant:"secondary",children:"Base Rate"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-800",children:"Summer Low (May-Sep)"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Hot weather discount needed"})]}),e.jsx(Hc,{className:"bg-orange-100 text-orange-800",children:"-30%"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Major Event Opportunities"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"F1 Grand Prix"}),e.jsx("p",{className:"text-sm text-red-600",children:"March weekend"})]}),e.jsx(Hc,{className:"bg-red-100 text-red-800",children:"+300%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Shopping Festival"}),e.jsx("p",{className:"text-sm text-purple-600",children:"January month-long"})]}),e.jsx(Hc,{className:"bg-purple-100 text-purple-800",children:"+80%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"GITEX Technology"}),e.jsx("p",{className:"text-sm text-blue-600",children:"October week"})]}),e.jsx(Hc,{className:"bg-blue-100 text-blue-800",children:"+60%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"New Year's Eve"}),e.jsx("p",{className:"text-sm text-green-600",children:"Dec 31 - Jan 2"})]}),e.jsx(Hc,{className:"bg-green-100 text-green-800",children:"+200%"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pricing Recommendations"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Weekend Premium"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add 20% for Friday-Saturday nights"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Area Multipliers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Marina: +60%, Downtown: +50%, JLT: Base"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Ramadan Adjustment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reduce rates 20% during Ramadan period"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Last-Minute Bookings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dynamic discounts for 3-day advance bookings"})]})]})]})]})})]})}),e.jsx(hc,{value:"competition",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"UAE Market Competition"}),e.jsx(zl,{children:"Competitive analysis is being developed for UAE market"})]}),e.jsxs(Bl,{children:[e.jsxs(Gu,{children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Competitor tracking system is in development. Currently integrating with UAE property listings to provide real competitive analysis."})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx("h4",{className:"font-medium",children:"Market Areas Analysis"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Marina"}),e.jsx("span",{className:"text-sm text-green-600",children:"Premium Tier (+60%)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Waterfront luxury properties"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Downtown"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Premium Tier (+50%)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Business district and attractions"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"JLT"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Standard Tier"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Modern towers with metro access"})]})]})]})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Market Positioning"}),e.jsx(zl,{children:"Your competitive advantage in UAE"})]}),e.jsx(Bl,{className:"space-y-4",children:(null==m?void 0:m.area_insights)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Your Area: ",m.area_insights.area]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.area_insights.tier}),e.jsx("div",{className:"text-sm text-muted-foreground",children:m.area_insights.primary_demand})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Market Performance"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"vs Market Average"}),e.jsxs("span",{className:"font-medium text-green-600",children:[m.performance_vs_market,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Position in Area"}),e.jsxs("span",{className:"font-medium",children:["#",m.competitive_position]})]})]})]}),e.jsxs(Gu,{children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx(Ku,{children:(null==(o=m.area_recommendations)?void 0:o[0])||"Optimize pricing based on UAE seasonal patterns"})]})]})})]})]})}),e.jsx(hc,{value:"insights",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsx(Dl,{children:e.jsx(Bl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-green-100 text-green-600",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Dubai Winter Season Opportunity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Hc,{variant:"outline",children:"Impact: High"}),e.jsx(Hc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Increase rates by 40-50% during UAE's peak winter season (December-February) when European tourists seek warm weather escapes."})]})]})})}),e.jsx(Dl,{children:e.jsx(Bl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Event-Based Surge Pricing"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Hc,{variant:"outline",children:"Impact: Very High"}),e.jsx(Hc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Implement automatic surge pricing for major UAE events: F1 Grand Prix (+300%), Shopping Festival (+80%), GITEX (+60%)."})]})]})})}),e.jsx(Dl,{children:e.jsx(Bl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 text-yellow-600",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Summer Season Strategy"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Hc,{variant:"outline",children:"Impact: Medium"}),e.jsx(Hc,{variant:"outline",children:"Effort: Medium"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"UAE summer (May-September) requires 20-30% discount and focus on longer stays, business travelers, and local residents."})]})]})})}),(null==m?void 0:m.area_recommendations)&&e.jsx(Dl,{children:e.jsx(Bl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-100 text-purple-600",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Area-Specific Recommendations"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Hc,{variant:"outline",children:"Impact: High"}),e.jsx(Hc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("div",{className:"space-y-2",children:m.area_recommendations.map((t,s)=>e.jsxs("p",{className:"text-muted-foreground text-sm",children:[" ",t]},s))})]})]})})}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"UAE Demand Patterns"}),e.jsx(zl,{children:"Real UAE seasonal and daily booking patterns"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Peak Booking Times"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Evening (6-9 PM)"}),e.jsx("span",{className:"font-medium",children:"45%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Lunch (12-2 PM)"}),e.jsx("span",{className:"font-medium",children:"25%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Morning (9-11 AM)"}),e.jsx("span",{className:"font-medium",children:"20%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Late Night"}),e.jsx("span",{className:"font-medium",children:"10%"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Weekly Patterns"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Friday-Saturday"}),e.jsx("span",{className:"font-medium text-green-600",children:"Premium (+20%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Thursday"}),e.jsx("span",{className:"font-medium",children:"Standard"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday-Tuesday"}),e.jsx("span",{className:"font-medium text-blue-600",children:"Business Focus"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Wednesday"}),e.jsx("span",{className:"font-medium text-orange-600",children:"Lowest"})]})]})]})]})})})]})]})}),e.jsx(hc,{value:"occupancy",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Overall Occupancy"}),e.jsx(zl,{children:"Current occupancy rate across all properties"})]}),e.jsxs(Bl,{children:[e.jsx(et,{width:"100%",height:200,children:e.jsxs(ct,{children:[e.jsx(dt,{data:j,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"value",children:j.map((t,s)=>e.jsx(ut,{fill:t.color},`cell-${s}`))}),e.jsx(at,{formatter:e=>[`${e}%`,""]})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[(null==l?void 0:l.occupancyRate)||0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Occupied"})]})})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Occupancy Insights"}),e.jsx(zl,{children:"Performance metrics and optimization recommendations"})]}),e.jsxs(Bl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Peak Season"}),e.jsx("span",{className:"font-medium",children:"Jun - Aug (89%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Low Season"}),e.jsx("span",{className:"font-medium",children:"Jan - Mar (62%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Stay"}),e.jsx("span",{className:"font-medium",children:"3.2 nights"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Booking Lead Time"}),e.jsx("span",{className:"font-medium",children:"28 days"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Recommendations"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Implement dynamic pricing to increase low-season occupancy"}),e.jsx("li",{children:" Offer 7+ day discounts to increase average stay"}),e.jsx("li",{children:" Target last-minute bookings with flash sales"}),e.jsx("li",{children:" Consider corporate partnerships for midweek bookings"})]})]})]})]})]})})]})]})}function fg({...t}){return e.jsx(Oe,{"data-slot":"dropdown-menu",...t})}function vg({...t}){return e.jsx(Te,{"data-slot":"dropdown-menu-trigger",...t})}function xg({className:t,sideOffset:s=4,...r}){return e.jsx(Me,{children:e.jsx(Re,{"data-slot":"dropdown-menu-content",sideOffset:s,className:wr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function bg({className:t,inset:s,variant:r="default",...n}){return e.jsx(Ae,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:wr("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}const yg=e=>{switch(e){case"confirmed":return"default";case"pending":default:return"secondary";case"cancelled":case"no_show":return"destructive";case"completed":return"outline"}};function wg(){const{bookings:t,loadBookings:s,properties:r,loadProperties:n}=Il(),[a,o]=qe.useState(""),[i,l]=qe.useState("all"),[c,d]=qe.useState("all"),[u,h]=qe.useState(!0);qe.useEffect(()=>{!async function(){try{h(!0),await Promise.all([s(),n()])}catch(e){console.error("Failed to load booking data:",e)}finally{h(!1)}}()},[]);const p=t.map(e=>{var t;return{...e,property_title:(null==(t=r.find(t=>t.id===e.property_id))?void 0:t.title)||"Unknown Property"}}),m=p.filter(e=>{var t;const s=e.guest_name.toLowerCase().includes(a.toLowerCase())||(null==(t=e.property_title)?void 0:t.toLowerCase().includes(a.toLowerCase()))||e.id.toLowerCase().includes(a.toLowerCase()),r="all"===i||e.status===i,n="all"===c||e.status===c;return s&&r&&n}),g=p.filter(e=>"confirmed"===e.status&&new Date(e.check_in)>new Date),f=p.filter(e=>{const t=(new Date).toISOString().split("T")[0];return e.check_in===t&&"confirmed"===e.status}),v=p.filter(e=>{const t=(new Date).toISOString().split("T")[0];return e.check_out===t&&"confirmed"===e.status});async function x(e,t){try{console.log("Updating booking",e,"to status",t)}catch(s){console.error("Failed to update booking:",s)}}return u?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[...Array(3)].map((t,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Booking Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage reservations and guest communications for all your properties."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm",children:"Upcoming Bookings"}),e.jsx(F,{className:"h-4 w-4 text-krib-lime"})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm",children:"Check-ins Today"}),e.jsx(D,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests arriving"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm",children:"Check-outs Today"}),e.jsx(D,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:v.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests departing"})]})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Nr,{placeholder:"Search bookings...",className:"pl-10",value:a,onChange:e=>o(e.target.value)})]}),e.jsxs(iu,{value:i,onValueChange:l,children:[e.jsx(cu,{className:"w-[180px]",children:e.jsx(lu,{placeholder:"Filter by status"})}),e.jsxs(du,{children:[e.jsx(uu,{value:"all",children:"All Statuses"}),e.jsx(uu,{value:"confirmed",children:"Confirmed"}),e.jsx(uu,{value:"pending",children:"Pending"}),e.jsx(uu,{value:"completed",children:"Completed"}),e.jsx(uu,{value:"cancelled",children:"Cancelled"}),e.jsx(uu,{value:"no_show",children:"No Show"})]})]}),e.jsxs(kr,{variant:"outline",size:"sm",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),e.jsxs(cc,{value:c,onValueChange:d,children:[e.jsxs(dc,{children:[e.jsx(uc,{value:"all",children:"All Bookings"}),e.jsx(uc,{value:"confirmed",children:"Confirmed"}),e.jsx(uc,{value:"pending",children:"Pending"}),e.jsx(uc,{value:"completed",children:"Completed"})]}),e.jsx(hc,{value:c,className:"space-y-4",children:0===m.length?e.jsx(Dl,{children:e.jsxs(Bl,{className:"p-8 text-center",children:[e.jsx(F,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-muted-foreground",children:0===t.length?"You don't have any bookings yet. Create some properties to start receiving bookings!":"Try adjusting your search or filter criteria."})]})}):e.jsx("div",{className:"space-y-4",children:m.map(t=>{const s=(e=>{switch(e){case"confirmed":case"completed":return $e;case"pending":default:return C;case"cancelled":case"no_show":return Ue}})(t.status);return e.jsx(Dl,{children:e.jsx(Bl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(pe,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.property_title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Booking #",t.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Hc,{variant:yg(t.status),children:[e.jsx(s,{className:"h-3 w-3 mr-1"}),t.status]}),e.jsxs(fg,{children:[e.jsx(vg,{asChild:!0,children:e.jsx(kr,{variant:"ghost",size:"sm",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsxs(xg,{align:"end",children:[e.jsx(bg,{children:"View Details"}),e.jsx(bg,{children:"Contact Guest"}),e.jsx(bg,{children:"Modify Booking"}),"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(bg,{onClick:()=>x(t.id,"confirmed"),children:"Confirm Booking"}),e.jsx(bg,{onClick:()=>x(t.id,"cancelled"),children:"Decline Booking"})]}),"confirmed"===t.status&&e.jsx(bg,{onClick:()=>x(t.id,"cancelled"),className:"text-destructive",children:"Cancel Booking"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Guest Information"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_email})]}),t.guest_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Stay Details"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:["Check-in: ",new Date(t.check_in).toLocaleDateString()]}),e.jsxs("div",{children:["Check-out: ",new Date(t.check_out).toLocaleDateString()]}),e.jsxs("div",{children:[t.nights," nights  ",t.guests," guests"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:["Total: $",t.total_amount]}),e.jsxs("div",{children:["Booked: ",new Date(t.created_at).toLocaleDateString()]}),t.special_requests&&e.jsxs("div",{className:"text-xs",children:["Special: ",t.special_requests]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(kr,{variant:"outline",size:"sm",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Message Guest"]}),e.jsx(kr,{variant:"outline",size:"sm",children:"View Property"}),"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(kr,{size:"sm",onClick:()=>x(t.id,"confirmed"),children:"Confirm"}),e.jsx(kr,{variant:"outline",size:"sm",onClick:()=>x(t.id,"cancelled"),children:"Decline"})]})]})]})]})})},t.id)})})})]})]})}function jg(){var t;const{createStripeAccount:s,getStripeOnboardingLink:r,getStripeAccountStatus:n,getStripeDashboardLink:a}=Il(),[o,i]=qe.useState(null),[l,c]=qe.useState(!0),[d,u]=qe.useState(!1);async function h(){try{u(!0),(null==o?void 0:o.stripe_account_id)||await s();const{url:e}=await r();window.location.href=e}catch(e){console.error("Setup payouts error:",e),alert("Failed to start payout setup. Please try again."),u(!1)}}if(qe.useEffect(()=>{!async function(){var e,t;try{c(!0);const e=await n();i(e)}catch(s){((null==(e=s.message)?void 0:e.includes("not found"))||(null==(t=s.message)?void 0:t.includes("404")))&&i({status:"not_connected",charges_enabled:!1,payouts_enabled:!1,details_submitted:!1,onboarding_completed:!1})}finally{c(!1)}}()},[]),l)return e.jsxs(Dl,{children:[e.jsx(Ul,{children:e.jsx($l,{children:"Payout Setup"})}),e.jsx(Bl,{children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]});const p=(null==o?void 0:o.requirements)&&(o.requirements.currently_due.length>0||o.requirements.past_due.length>0);return e.jsxs(Dl,{children:[e.jsxs(Ul,{children:[e.jsxs($l,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Payout Account"}),o?o.payouts_enabled?e.jsxs(Hc,{className:"bg-green-100 text-green-800",children:[e.jsx($e,{className:"h-3 w-3 mr-1"})," Active"]}):o.details_submitted?e.jsxs(Hc,{className:"bg-blue-100 text-blue-800",children:[e.jsx(C,{className:"h-3 w-3 mr-1"})," Pending Verification"]}):e.jsxs(Hc,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(je,{className:"h-3 w-3 mr-1"})," Setup Required"]}):null]}),e.jsx(zl,{children:"Powered by Stripe - Secure bank account setup for receiving payouts"})]}),e.jsx(Bl,{className:"space-y-4",children:"not_connected"===(null==o?void 0:o.status)?e.jsxs(e.Fragment,{children:[e.jsxs(Gu,{children:[e.jsx($,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Set up your bank account to receive payouts from bookings. Stripe handles all KYC verification and bank details securely."})]}),e.jsxs(kr,{onClick:h,disabled:d,className:"w-full",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),d?"Redirecting...":"Set Up Payouts"]})]}):(null==o?void 0:o.payouts_enabled)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($e,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"Payouts Enabled"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Your account is fully verified and ready to receive payouts."}),o.bank_account_last4&&e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Bank account ending in ****",o.bank_account_last4]})]}),e.jsxs(kr,{variant:"outline",onClick:async function(){try{u(!0);const{url:e}=await a();window.open(e,"_blank")}catch(e){console.error("Open dashboard error:",e),alert("Failed to open Stripe dashboard")}finally{u(!1)}},disabled:d,className:"w-full",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Open Stripe Dashboard"]})]}):e.jsxs(e.Fragment,{children:[p&&e.jsxs(Gu,{children:[e.jsx(je,{className:"h-4 w-4"}),e.jsxs(Ku,{children:["Additional information required to activate payouts.",(null==(t=null==o?void 0:o.requirements)?void 0:t.past_due)&&o.requirements.past_due.length>0&&e.jsx("span",{className:"text-red-600 font-medium",children:" Action required!"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[(null==o?void 0:o.details_submitted)?e.jsx($e,{className:"h-4 w-4 text-green-600"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Information submitted"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[(null==o?void 0:o.charges_enabled)?e.jsx($e,{className:"h-4 w-4 text-green-600"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Charges enabled"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[(null==o?void 0:o.payouts_enabled)?e.jsx($e,{className:"h-4 w-4 text-green-600"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Payouts enabled"})]})]}),e.jsx(kr,{onClick:h,disabled:d,className:"w-full",children:d?"Redirecting...":"Continue Setup"})]})})]})}function kg(){const{getFinancialSummary:t,getHostPayouts:s}=Il(),[r,n]=qe.useState(null),[a,o]=qe.useState(null),[i,l]=qe.useState(!0);qe.useEffect(()=>{!async function(){try{l(!0);const[e,r]=await Promise.all([t().catch(()=>({total_balance:0,pending_earnings:0,total_earnings:0,total_payouts:0,platform_fees:0,recent_transactions:[]})),s().catch(()=>({payouts:[],total_paid:0,total_pending:0,total_in_transit:0}))]);n(e),o(r)}catch(e){console.error("Failed to load financial data:",e)}finally{l(!1)}}()},[]);const c=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=t=>{switch(t){case"completed":return e.jsx($e,{className:"h-4 w-4"});case"processing":default:return e.jsx(C,{className:"h-4 w-4"});case"pending":case"failed":return e.jsx(je,{className:"h-4 w-4"})}};return i?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Financial Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your earnings, payouts, and financial settings"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Pending Earnings"}),e.jsx(W,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Bl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==a?void 0:a.total_pending.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting payout"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsx(J,{className:"h-4 w-4 text-krib-lime"})]}),e.jsxs(Bl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==r?void 0:r.total_earnings.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time earnings"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Total Payouts"}),e.jsx(Be,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(Bl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==a?void 0:a.total_paid.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Money transferred"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Platform Fees"}),e.jsx(X,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(Bl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==r?void 0:r.platform_fees.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fees paid"})]})]})]}),e.jsxs(cc,{defaultValue:"payouts",className:"w-full",children:[e.jsxs(dc,{className:"grid w-full grid-cols-3",children:[e.jsx(uc,{value:"payouts",children:"Payouts"}),e.jsx(uc,{value:"transactions",children:"Transactions"}),e.jsx(uc,{value:"settings",children:"Settings"})]}),e.jsxs(hc,{value:"payouts",className:"space-y-4",children:[e.jsxs(Gu,{children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Payouts are automatically processed 1 day after guest checkout. Platform fee: 15%"})]}),e.jsxs(Dl,{children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Payout History"}),e.jsx(zl,{children:"Your recent payouts and transfers"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"space-y-4",children:(null==a?void 0:a.payouts)&&a.payouts.length>0?a.payouts.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(t.status),e.jsxs("span",{className:"font-medium",children:["$",t.amount.toFixed(2)," AED"]}),e.jsx(Hc,{className:c(t.status),children:t.status})]}),e.jsx("p",{className:"text-sm font-medium",children:t.property_title||"Property payout"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(t.initiated_at).toLocaleDateString(),t.completed_at&&`  Completed ${new Date(t.completed_at).toLocaleDateString()}`]}),t.failure_message&&e.jsx("p",{className:"text-sm text-red-600",children:t.failure_message})]}),e.jsx("div",{className:"text-right text-sm",children:t.platform_fee&&e.jsxs("p",{className:"text-muted-foreground",children:["Platform fee: $",t.platform_fee.toFixed(2)]})})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No payouts yet"})})})]})]}),e.jsx(hc,{value:"transactions",className:"space-y-4",children:e.jsxs(Dl,{children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Recent Transactions"}),e.jsx(zl,{children:"Your earning transactions from bookings"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"space-y-4",children:(null==r?void 0:r.recent_transactions.length)?r.recent_transactions.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:t.property_title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.guest_name,"  ",new Date(t.date).toLocaleDateString()]}),e.jsx(Hc,{variant:"completed"===t.status?"default":"secondary",children:t.status})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-green-600",children:["+$",t.amount.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.type})]})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No transactions yet"})})})]})}),e.jsx(hc,{value:"settings",className:"space-y-4",children:e.jsx(jg,{})})]})]})}var Ng="Switch",[Sg,_g]=u(Ng),[Cg,Eg]=Sg(Ng),Pg=qe.forwardRef((t,r)=>{const{__scopeSwitch:n,name:a,checked:o,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...p}=t,[g,v]=qe.useState(null),b=f(r,e=>v(e)),y=qe.useRef(!1),w=!g||(h||!!g.closest("form")),[j,k]=m({prop:o,defaultProp:i??!1,onChange:u,caller:Ng});return e.jsxs(Cg,{scope:n,checked:j,disabled:c,children:[e.jsx(s.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":Mg(j),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:b,onClick:x(t.onClick,e=>{k(e=>!e),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&e.jsx(Tg,{control:g,bubbles:!y.current,name:a,value:d,checked:j,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});Pg.displayName=Ng;var Lg="SwitchThumb",Og=qe.forwardRef((t,r)=>{const{__scopeSwitch:n,...a}=t,o=Eg(Lg,n);return e.jsx(s.span,{"data-state":Mg(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:r})});Og.displayName=Lg;var Tg=qe.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},o)=>{const i=qe.useRef(null),l=f(i,o),c=qc(r),d=fe(s);return qe.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==r&&s){const t=new Event("click",{bubbles:n});s.call(e,r),e.dispatchEvent(t)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Mg(e){return e?"checked":"unchecked"}Tg.displayName="SwitchBubbleInput";var Rg=Pg,Ag=Og;function Ig({className:t,...s}){return e.jsx(Rg,{"data-slot":"switch",className:wr("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Ag,{"data-slot":"switch-thumb",className:wr("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Dg(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>({...t,...s(e)[`__scope${r}`]}),{});return qe.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var Ug=Symbol.for("react.lazy"),$g=Ke[" use ".trim().toString()];function zg(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Ug&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function Bg(t){const s=Fg(t),r=qe.forwardRef((t,r)=>{let{children:n,...a}=t;zg(n)&&"function"==typeof $g&&(n=$g(n._payload));const o=qe.Children.toArray(n),i=o.find(Hg);if(i){const t=i.props.children,n=o.map(e=>e===i?qe.Children.count(t)>1?qe.Children.only(null):qe.isValidElement(t)?t.props.children:null:e);return e.jsx(s,{...a,ref:r,children:qe.isValidElement(t)?qe.cloneElement(t,void 0,n):null})}return e.jsx(s,{...a,ref:r,children:n})});return r.displayName=`${t}.Slot`,r}function Fg(e){const t=qe.forwardRef((e,t)=>{let{children:s,...r}=e;if(zg(s)&&"function"==typeof $g&&(s=$g(s._payload)),qe.isValidElement(s)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(s),n=function(e,t){const s={...t};for(const r in t){const n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{const t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]={...n,...a}:"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==qe.Fragment&&(n.ref=t?Z(t,e):e),qe.cloneElement(s,n)}return qe.Children.count(s)>1?qe.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Wg=Symbol("radix.slottable");function Hg(e){return qe.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Wg}var Vg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,s)=>{const r=Bg(`Primitive.${s}`),n=qe.forwardRef((t,n)=>{const{asChild:a,...o}=t,i=a?r:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(i,{...o,ref:n})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),Gg={exports:{}},qg={},Kg=qe;var Zg="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Jg=Kg.useState,Yg=Kg.useEffect,Xg=Kg.useLayoutEffect,Qg=Kg.useDebugValue;function ef(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Zg(e,s)}catch(r){return!0}}var tf="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),r=Jg({inst:{value:s,getSnapshot:t}}),n=r[0].inst,a=r[1];return Xg(function(){n.value=s,n.getSnapshot=t,ef(n)&&a({inst:n})},[e,s,t]),Yg(function(){return ef(n)&&a({inst:n}),e(function(){ef(n)&&a({inst:n})})},[e]),Qg(s),s};qg.useSyncExternalStore=void 0!==Kg.useSyncExternalStore?Kg.useSyncExternalStore:tf,Gg.exports=qg;var sf=Gg.exports;function rf(){return()=>{}}var nf="Avatar",[af,of]=function(t,s=[]){let r=[];const n=()=>{const e=r.map(e=>qe.createContext(e));return function(s){const r=(null==s?void 0:s[t])||e;return qe.useMemo(()=>({[`__scope${t}`]:{...s,[t]:r}}),[s,r])}};return n.scopeName=t,[function(s,n){const a=qe.createContext(n);a.displayName=s+"Context";const o=r.length;r=[...r,n];const i=s=>{var r;const{scope:n,children:i,...l}=s,c=(null==(r=null==n?void 0:n[t])?void 0:r[o])||a,d=qe.useMemo(()=>l,Object.values(l));return e.jsx(c.Provider,{value:d,children:i})};return i.displayName=s+"Provider",[i,function(e,r){var i;const l=(null==(i=null==r?void 0:r[t])?void 0:i[o])||a,c=qe.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${e}\` must be used within \`${s}\``)}]},Dg(n,...s)]}(nf),[lf,cf]=af(nf),df=qe.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,o]=qe.useState("idle");return e.jsx(lf,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:e.jsx(Vg.span,{...n,ref:s})})});df.displayName=nf;var uf="AvatarImage",hf=qe.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=t,i=cf(uf,r),l=function(e,{referrerPolicy:t,crossOrigin:s}){const r=sf.useSyncExternalStore(rf,()=>!0,()=>!1),n=qe.useRef(null),a=r?(n.current||(n.current=new window.Image),n.current):null,[o,i]=qe.useState(()=>gf(a,e));return ee(()=>{i(gf(a,e))},[a,e]),ee(()=>{const e=e=>()=>{i(e)};if(!a)return;const r=e("loaded"),n=e("error");return a.addEventListener("load",r),a.addEventListener("error",n),t&&(a.referrerPolicy=t),"string"==typeof s&&(a.crossOrigin=s),()=>{a.removeEventListener("load",r),a.removeEventListener("error",n)}},[a,s,t]),o}(n,o),c=te(e=>{a(e),i.onImageLoadingStatusChange(e)});return ee(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?e.jsx(Vg.img,{...o,ref:s,src:n}):null});hf.displayName=uf;var pf="AvatarFallback",mf=qe.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,o=cf(pf,r),[i,l]=qe.useState(void 0===n);return qe.useEffect(()=>{if(void 0!==n){const e=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(e)}},[n]),i&&"loaded"!==o.imageLoadingStatus?e.jsx(Vg.span,{...a,ref:s}):null});function gf(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}mf.displayName=pf;var ff=df,vf=hf,xf=mf;const bf=qe.forwardRef(({className:t,...s},r)=>e.jsx(ff,{ref:r,className:wr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));bf.displayName=ff.displayName;const yf=qe.forwardRef(({className:t,...s},r)=>e.jsx(vf,{ref:r,className:wr("aspect-square h-full w-full",t),...s}));yf.displayName=vf.displayName;const wf=qe.forwardRef(({className:t,...s},r)=>e.jsx(xf,{ref:r,className:wr("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));wf.displayName=xf.displayName;var jf=Array(12).fill(0),kf=({visible:e,className:t})=>Ye.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ye.createElement("div",{className:"sonner-spinner"},jf.map((e,t)=>Ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Nf=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Sf=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_f=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Cf=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ef=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Pf=1,Lf=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,n="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Pf++,a=this.toasts.find(e=>e.id===n),o=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),a?this.toasts=this.toasts.map(t=>t.id===n?(this.publish({...t,...e,id:n,title:s}),{...t,...e,id:n,dismissible:o,title:s}):t):this.addToast({title:s,...r,dismissible:o,id:n}),n},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r,n=e instanceof Promise?e:e(),a=void 0!==s,o=n.then(async e=>{if(r=["resolve",e],Ye.isValidElement(e))a=!1,this.create({id:s,type:"default",message:e});else if(Of(e)&&!e.ok){a=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,n="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:r,description:n})}else if(void 0!==t.success){a=!1;let r="function"==typeof t.success?await t.success(e):t.success,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"success",message:r,description:n})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){a=!1;let r="function"==typeof t.error?await t.error(e):t.error,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"error",message:r,description:n})}}).finally(()=>{var e;a&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),i=()=>new Promise((e,t)=>o.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:i}:Object.assign(s,{unwrap:i})},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||Pf++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Of=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Tf=(e,t)=>{let s=(null==t?void 0:t.id)||Pf++;return Lf.addToast({title:e,...t,id:s}),s},Mf=Object.assign(Tf,{success:Lf.success,info:Lf.info,warning:Lf.warning,error:Lf.error,custom:Lf.custom,message:Lf.message,promise:Lf.promise,dismiss:Lf.dismiss,loading:Lf.loading},{getHistory:()=>Lf.toasts,getToasts:()=>Lf.getActiveToasts()});function Rf(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Af=3,If=14;function Df(...e){return e.filter(Boolean).join(" ")}var Uf=e=>{var t,s,r,n,a,o,i,l,c,d,u;let{invert:h,toast:p,unstyled:m,interacting:g,setHeights:f,visibleToasts:v,heights:x,index:b,toasts:y,expanded:w,removeToast:j,defaultRichColors:k,closeButton:N,style:S,cancelButtonStyle:_,actionButtonStyle:C,className:E="",descriptionClassName:P="",duration:L,position:O,gap:T,loadingIcon:M,expandByDefault:R,classNames:A,icons:I,closeButtonAriaLabel:D="Close toast",pauseWhenPageIsHidden:U}=e,[$,z]=Ye.useState(null),[B,F]=Ye.useState(null),[W,H]=Ye.useState(!1),[V,G]=Ye.useState(!1),[q,K]=Ye.useState(!1),[Z,J]=Ye.useState(!1),[Y,X]=Ye.useState(!1),[Q,ee]=Ye.useState(0),[te,se]=Ye.useState(0),re=Ye.useRef(p.duration||L||4e3),ne=Ye.useRef(null),ae=Ye.useRef(null),oe=0===b,ie=b+1<=v,le=p.type,ce=!1!==p.dismissible,de=p.className||"",ue=p.descriptionClassName||"",he=Ye.useMemo(()=>x.findIndex(e=>e.toastId===p.id)||0,[x,p.id]),pe=Ye.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:N},[p.closeButton,N]),me=Ye.useMemo(()=>p.duration||L||4e3,[p.duration,L]),ge=Ye.useRef(0),fe=Ye.useRef(0),ve=Ye.useRef(0),xe=Ye.useRef(null),[be,ye]=O.split("-"),we=Ye.useMemo(()=>x.reduce((e,t,s)=>s>=he?e:e+t.height,0),[x,he]),je=(()=>{let[e,t]=Ye.useState(document.hidden);return Ye.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ke=p.invert||h,Ne="loading"===le;fe.current=Ye.useMemo(()=>he*T+we,[he,we]),Ye.useEffect(()=>{re.current=me},[me]),Ye.useEffect(()=>{H(!0)},[]),Ye.useEffect(()=>{let e=ae.current;if(e){let t=e.getBoundingClientRect().height;return se(t),f(e=>[{toastId:p.id,height:t,position:p.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==p.id))}},[f,p.id]),Ye.useLayoutEffect(()=>{if(!W)return;let e=ae.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,se(s),f(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?{...e,height:s}:e):[{toastId:p.id,height:s,position:p.position},...e])},[W,p.title,p.description,f,p.id]);let Se=Ye.useCallback(()=>{G(!0),ee(fe.current),f(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{j(p)},200)},[p,j,f,fe]);return Ye.useEffect(()=>{if(p.promise&&"loading"===le||p.duration===1/0||"loading"===p.type)return;let e;return w||g||U&&je?(()=>{if(ve.current<ge.current){let e=(new Date).getTime()-ge.current;re.current=re.current-e}ve.current=(new Date).getTime()})():re.current!==1/0&&(ge.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=p.onAutoClose)||e.call(p,p),Se()},re.current)),()=>clearTimeout(e)},[w,g,p,le,U,je,Se]),Ye.useEffect(()=>{p.delete&&Se()},[Se,p.delete]),Ye.createElement("li",{tabIndex:0,ref:ae,className:Df(E,de,null==A?void 0:A.toast,null==(t=null==p?void 0:p.classNames)?void 0:t.toast,null==A?void 0:A.default,null==A?void 0:A[le],null==(s=null==p?void 0:p.classNames)?void 0:s[le]),"data-sonner-toast":"","data-rich-colors":null!=(r=p.richColors)?r:k,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":W,"data-promise":!!p.promise,"data-swiped":Y,"data-removed":V,"data-visible":ie,"data-y-position":be,"data-x-position":ye,"data-index":b,"data-front":oe,"data-swiping":q,"data-dismissible":ce,"data-type":le,"data-invert":ke,"data-swipe-out":Z,"data-swipe-direction":B,"data-expanded":!!(w||R&&W),style:{"--index":b,"--toasts-before":b,"--z-index":y.length-b,"--offset":`${V?Q:fe.current}px`,"--initial-height":R?"auto":`${te}px`,...S,...p.style},onDragEnd:()=>{K(!1),z(null),xe.current=null},onPointerDown:e=>{Ne||!ce||(ne.current=new Date,ee(fe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(K(!0),xe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,r;if(Z||!ce)return;xe.current=null;let n=Number((null==(e=ae.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),a=Number((null==(t=ae.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),o=(new Date).getTime()-(null==(s=ne.current)?void 0:s.getTime()),i="x"===$?n:a,l=Math.abs(i)/o;if(Math.abs(i)>=20||l>.11)return ee(fe.current),null==(r=p.onDismiss)||r.call(p,p),F("x"===$?n>0?"right":"left":a>0?"down":"up"),Se(),J(!0),void X(!1);K(!1),z(null)},onPointerMove:t=>{var s,r,n,a;if(!xe.current||!ce||(null==(s=window.getSelection())?void 0:s.toString().length)>0)return;let o=t.clientY-xe.current.y,i=t.clientX-xe.current.x,l=null!=(r=e.swipeDirections)?r:function(e){let[t,s]=e.split("-"),r=[];return t&&r.push(t),s&&r.push(s),r}(O);!$&&(Math.abs(i)>1||Math.abs(o)>1)&&z(Math.abs(i)>Math.abs(o)?"x":"y");let c={x:0,y:0};"y"===$?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&o<0||l.includes("bottom")&&o>0)&&(c.y=o):"x"===$&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&i<0||l.includes("right")&&i>0)&&(c.x=i),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&X(!0),null==(n=ae.current)||n.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(a=ae.current)||a.style.setProperty("--swipe-amount-y",`${c.y}px`)}},pe&&!p.jsx?Ye.createElement("button",{"aria-label":D,"data-disabled":Ne,"data-close-button":!0,onClick:Ne||!ce?()=>{}:()=>{var e;Se(),null==(e=p.onDismiss)||e.call(p,p)},className:Df(null==A?void 0:A.closeButton,null==(n=null==p?void 0:p.classNames)?void 0:n.closeButton)},null!=(a=null==I?void 0:I.close)?a:Ef):null,p.jsx||qe.isValidElement(p.title)?p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title:Ye.createElement(Ye.Fragment,null,le||p.icon||p.promise?Ye.createElement("div",{"data-icon":"",className:Df(null==A?void 0:A.icon,null==(o=null==p?void 0:p.classNames)?void 0:o.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||(null!=I&&I.loading?Ye.createElement("div",{className:Df(null==A?void 0:A.loader,null==(_e=null==p?void 0:p.classNames)?void 0:_e.loader,"sonner-loader"),"data-visible":"loading"===le},I.loading):M?Ye.createElement("div",{className:Df(null==A?void 0:A.loader,null==(Ce=null==p?void 0:p.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===le},M):Ye.createElement(kf,{className:Df(null==A?void 0:A.loader,null==(Ee=null==p?void 0:p.classNames)?void 0:Ee.loader),visible:"loading"===le})):null,"loading"!==p.type?p.icon||(null==I?void 0:I[le])||(e=>{switch(e){case"success":return Nf;case"info":return _f;case"warning":return Sf;case"error":return Cf;default:return null}})(le):null):null,Ye.createElement("div",{"data-content":"",className:Df(null==A?void 0:A.content,null==(i=null==p?void 0:p.classNames)?void 0:i.content)},Ye.createElement("div",{"data-title":"",className:Df(null==A?void 0:A.title,null==(l=null==p?void 0:p.classNames)?void 0:l.title)},"function"==typeof p.title?p.title():p.title),p.description?Ye.createElement("div",{"data-description":"",className:Df(P,ue,null==A?void 0:A.description,null==(c=null==p?void 0:p.classNames)?void 0:c.description)},"function"==typeof p.description?p.description():p.description):null),qe.isValidElement(p.cancel)?p.cancel:p.cancel&&Rf(p.cancel)?Ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||_,onClick:e=>{var t,s;Rf(p.cancel)&&ce&&(null==(s=(t=p.cancel).onClick)||s.call(t,e),Se())},className:Df(null==A?void 0:A.cancelButton,null==(d=null==p?void 0:p.classNames)?void 0:d.cancelButton)},p.cancel.label):null,qe.isValidElement(p.action)?p.action:p.action&&Rf(p.action)?Ye.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:e=>{var t,s;Rf(p.action)&&(null==(s=(t=p.action).onClick)||s.call(t,e),!e.defaultPrevented&&Se())},className:Df(null==A?void 0:A.actionButton,null==(u=null==p?void 0:p.classNames)?void 0:u.actionButton)},p.action.label):null));var _e,Ce,Ee};function $f(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function zf(e,t){let s={};return[e,t].forEach((e,t)=>{let r=1===t,n=r?"--mobile-offset":"--offset",a=r?"16px":"32px";function o(e){["top","right","bottom","left"].forEach(t=>{s[`${n}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?o(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s[`${n}-${t}`]=a:s[`${n}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):o(a)}),s}var Bf=qe.forwardRef(function(e,t){let{invert:s,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:o,className:i,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:p,visibleToasts:m=Af,toastOptions:g,dir:f=$f(),gap:v=If,loadingIcon:x,icons:b,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w}=e,[j,k]=Ye.useState([]),N=Ye.useMemo(()=>Array.from(new Set([r].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,r]),[S,_]=Ye.useState([]),[C,E]=Ye.useState(!1),[P,L]=Ye.useState(!1),[O,T]=Ye.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=Ye.useRef(null),R=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=Ye.useRef(null),I=Ye.useRef(!1),D=Ye.useCallback(e=>{k(t=>{var s;return null!=(s=t.find(t=>t.id===e.id))&&s.delete||Lf.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return Ye.useEffect(()=>Lf.subscribe(e=>{e.dismiss?k(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Xe.flushSync(()=>{k(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[]),Ye.useEffect(()=>{if("system"!==d)return void T(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{T(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{T(e?"dark":"light")}catch(t){console.error(t)}})}},[d]),Ye.useEffect(()=>{j.length<=1&&E(!1)},[j]),Ye.useEffect(()=>{let e=e=>{var t,s;n.every(t=>e[t]||e.code===t)&&(E(!0),null==(t=M.current)||t.focus()),"Escape"===e.code&&(document.activeElement===M.current||null!=(s=M.current)&&s.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),Ye.useEffect(()=>{if(M.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,I.current=!1)}},[M.current]),Ye.createElement("section",{ref:t,"aria-label":`${y} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((t,r)=>{var n;let[d,y]=t.split("-");return j.length?Ye.createElement("ol",{key:t,dir:"auto"===f?$f():f,tabIndex:-1,ref:M,className:i,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":d,"data-lifted":C&&j.length>1&&!a,"data-x-position":y,style:{"--front-toast-height":`${(null==(n=S[0])?void 0:n.height)||0}px`,"--width":"356px","--gap":`${v}px`,...p,...zf(l,c)},onBlur:e=>{I.current&&!e.currentTarget.contains(e.relatedTarget)&&(I.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||I.current||(I.current=!0,A.current=e.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{P||E(!1)},onDragEnd:()=>E(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||L(!0)},onPointerUp:()=>L(!1)},j.filter(e=>!e.position&&0===r||e.position===t).map((r,n)=>{var i,l;return Ye.createElement(Uf,{key:r.id,icons:b,index:n,toast:r,defaultRichColors:u,duration:null!=(i=null==g?void 0:g.duration)?i:h,className:null==g?void 0:g.className,descriptionClassName:null==g?void 0:g.descriptionClassName,invert:s,visibleToasts:m,closeButton:null!=(l=null==g?void 0:g.closeButton)?l:o,interacting:P,position:t,style:null==g?void 0:g.style,unstyled:null==g?void 0:g.unstyled,classNames:null==g?void 0:g.classNames,cancelButtonStyle:null==g?void 0:g.cancelButtonStyle,actionButtonStyle:null==g?void 0:g.actionButtonStyle,removeToast:D,toasts:j.filter(e=>e.position==r.position),heights:S.filter(e=>e.position==r.position),setHeights:_,expandByDefault:a,gap:v,loadingIcon:x,expanded:C,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});function Ff(){var t;const{user:s,signOut:r,updateUserProfile:n,updateUserSettings:a,changePassword:o,getUserNotifications:i,updateUserNotifications:l}=Il(),[c,d]=qe.useState(!1),[u,h]=qe.useState(!1),[p,m]=qe.useState({current:"",new:"",confirm:""}),[g,f]=qe.useState((null==s?void 0:s.avatar_url)||""),[v,x]=qe.useState(!1),b=qe.useRef(null),[y,w]=qe.useState({displayName:(null==s?void 0:s.name)||"",email:(null==s?void 0:s.email)||"",phoneNumber:(null==s?void 0:s.phone)||"",notifications:{bookings:!0,marketing:!1,systemUpdates:!0},preferences:{currency:"AED",timezone:"Asia/Dubai",language:"English"}});qe.useEffect(()=>{j()},[s]);const j=async()=>{if(s)try{const e=await i();w(t=>({...t,displayName:s.name||"",email:s.email||"",phoneNumber:(null==s?void 0:s.phone)||"",notifications:e.notifications||t.notifications}))}catch(e){console.error("Failed to load user settings:",e)}},k=(null==s?void 0:s.email)&&"email"!==(null==(t=null==s?void 0:s.app_metadata)?void 0:t.provider);return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Profile Information"}),e.jsx(zl,{children:"Update your personal information and contact details"})]}),e.jsxs(Bl,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(bf,{className:"h-24 w-24",children:[e.jsx(yf,{src:g,alt:y.displayName}),e.jsx(wf,{className:"text-2xl",children:y.displayName.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{children:"Profile Picture"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(kr,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},disabled:v,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),v?"Uploading...":"Upload Photo"]}),g&&e.jsx(kr,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{await n({avatar_url:""}),f(""),Mf.success("Profile picture removed")}catch(e){Mf.error("Failed to remove picture")}},children:"Remove"})]}),e.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s)if(s.size>5242880)Mf.error("Image must be less than 5MB");else{x(!0);try{const e=new FileReader;e.onloadend=async()=>{const t=e.result;await n({avatar_url:t}),f(t),Mf.success("Profile picture updated")},e.readAsDataURL(s)}catch(r){Mf.error("Failed to upload picture")}finally{x(!1)}}}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG or GIF. Max size 5MB."})]})]}),e.jsx(Pr,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"displayName",children:"Display Name"}),e.jsx(Nr,{id:"displayName",value:y.displayName,onChange:e=>w({...y,displayName:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"email",children:"Email Address"}),e.jsx(Nr,{id:"email",type:"email",value:y.email,onChange:e=>w({...y,email:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"phone",children:"Phone Number"}),e.jsx(Nr,{id:"phone",type:"tel",value:y.phoneNumber,onChange:e=>w({...y,phoneNumber:e.target.value})})]})]})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Notifications"}),e.jsx(zl,{children:"Choose what notifications you'd like to receive"})]}),e.jsxs(Bl,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Su,{children:"Booking Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new bookings, cancellations, and updates"})]}),e.jsx(Ig,{checked:y.notifications.bookings,onCheckedChange:e=>w({...y,notifications:{...y.notifications,bookings:e}})})]}),e.jsx(Pr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Su,{children:"Marketing Communications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive tips, product updates, and promotional content"})]}),e.jsx(Ig,{checked:y.notifications.marketing,onCheckedChange:e=>w({...y,notifications:{...y.notifications,marketing:e}})})]}),e.jsx(Pr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Su,{children:"System Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about system maintenance and important updates"})]}),e.jsx(Ig,{checked:y.notifications.systemUpdates,onCheckedChange:e=>w({...y,notifications:{...y.notifications,systemUpdates:e}})})]})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Preferences"}),e.jsx(zl,{children:"Customize your dashboard experience"})]}),e.jsx(Bl,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"currency",children:"Currency"}),e.jsxs("select",{id:"currency",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:y.preferences.currency,onChange:e=>w({...y,preferences:{...y.preferences,currency:e.target.value}}),children:[e.jsx("option",{value:"AED",children:"AED (.)"}),e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"EUR",children:"EUR ()"}),e.jsx("option",{value:"GBP",children:"GBP ()"}),e.jsx("option",{value:"SAR",children:"SAR ()"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"timezone",children:"Timezone"}),e.jsxs("select",{id:"timezone",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:y.preferences.timezone,onChange:e=>w({...y,preferences:{...y.preferences,timezone:e.target.value}}),children:[e.jsx("option",{value:"Asia/Dubai",children:"UAE / Gulf Standard Time (GST)"}),e.jsx("option",{value:"Asia/Riyadh",children:"Saudi Arabia (AST)"}),e.jsx("option",{value:"Europe/London",children:"London (GMT)"}),e.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),e.jsx("option",{value:"America/New_York",children:"New York (EST)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles (PST)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"language",children:"Language"}),e.jsxs("select",{id:"language",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:y.preferences.language,onChange:e=>w({...y,preferences:{...y.preferences,language:e.target.value}}),children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Spanish",children:"Spanish"}),e.jsx("option",{value:"French",children:"French"}),e.jsx("option",{value:"German",children:"German"})]})]})]})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Account Actions"}),e.jsx(zl,{children:"Manage your account and security settings"})]}),e.jsx(Bl,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(kr,{onClick:async()=>{d(!0);try{await n({name:y.displayName,phone:y.phoneNumber}),await l(y.notifications),await a({notifications:y.notifications,preferences:y.preferences}),Mf.success("Settings saved successfully")}catch(e){console.error("Settings save error:",e),Mf.error(e.message||"Failed to save settings")}finally{d(!1)}},disabled:c,className:"krib-button-primary",children:c?"Saving...":"Save Changes"}),e.jsxs(mu,{open:u,onOpenChange:h,children:[e.jsx(gu,{asChild:!0,children:e.jsx(kr,{variant:"outline",children:"Change Password"})}),e.jsxs(xu,{className:"krib-card",children:[e.jsxs(bu,{children:[e.jsx(yu,{children:k?"Set Password":"Change Password"}),e.jsx(wu,{children:k?"Set a password for your account to enable email/password sign-in.":"Enter your current password and choose a new one."})]}),e.jsxs("div",{className:"space-y-4",children:[!k&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"current-password",className:"text-sm font-medium text-gray-700",children:"Current Password"}),e.jsx(Nr,{id:"current-password",type:"password",placeholder:"Enter current password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:p.current,onChange:e=>m(t=>({...t,current:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"new-password",className:"text-sm font-medium text-gray-700",children:"New Password"}),e.jsx(Nr,{id:"new-password",type:"password",placeholder:"Enter new password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:p.new,onChange:e=>m(t=>({...t,new:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Su,{htmlFor:"confirm-password",className:"text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx(Nr,{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:p.confirm,onChange:e=>m(t=>({...t,confirm:e.target.value}))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(kr,{onClick:async()=>{if(p.new!==p.confirm)return void Mf.error("New passwords do not match");if(p.new.length<6)return void Mf.error("Password must be at least 6 characters long");const e=(null==s?void 0:s.email)&&!p.current;try{await o(p.current||"",p.new,p.confirm),Mf.success(e?"Password set successfully":"Password changed successfully"),h(!1),m({current:"",new:"",confirm:""})}catch(t){console.error("Password change error:",t),Mf.error(t.message||"Failed to change password")}},className:"flex-1 krib-button-primary",disabled:!k&&!p.current||!p.new||!p.confirm,children:k?"Set Password":"Change Password"}),e.jsx(kr,{variant:"outline",onClick:()=>h(!1),className:"flex-1",children:"Cancel"})]})]})]})]}),e.jsx(kr,{variant:"destructive",onClick:async()=>{try{await r(),Mf.success("Signed out successfully")}catch(e){Mf.error("Failed to sign out")}},children:"Sign Out"})]})})]})]})]})}function Wf(){var t,s,r,n,a,o;const{checkSuperhostEligibility:i,getSuperhostStatus:l,requestSuperhostVerification:c}=Il(),[d,u]=qe.useState(!0),[h,p]=qe.useState(null),[m,g]=qe.useState(null),[f,v]=qe.useState(""),[x,b]=qe.useState(!1);qe.useEffect(()=>{y()},[]);const y=async()=>{try{u(!0);const[e,t]=await Promise.all([i(),l()]);p(e),g(t)}catch(e){console.error("[Superhost] Error loading data:",e)}finally{u(!1)}};if(d)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-krib-lime border-t-transparent"})})});const w=null==h?void 0:h.metrics;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Superhost Verification"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Become a verified superhost and stand out to guests"})]}),(null==m?void 0:m.is_superhost)&&e.jsxs(Hc,{className:"bg-krib-lime text-krib-dark-teal px-4 py-2 text-lg",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Superhost"]})]}),"pending"===(null==m?void 0:m.status)&&e.jsx(Dl,{className:"p-6 bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(C,{className:"w-8 h-8 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-100",children:"Verification Pending"}),e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 mt-1",children:"Your superhost request is being reviewed by our team. You'll be notified once it's processed."}),(null==(t=m.pending_request)?void 0:t.created_at)&&e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-2",children:["Requested on ",new Date(m.pending_request.created_at).toLocaleDateString()]})]})]})}),"rejected"===(null==m?void 0:m.status)&&(null==(s=m.pending_request)?void 0:s.rejection_reason)&&e.jsx(Dl,{className:"p-6 bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Ue,{className:"w-8 h-8 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Request Not Approved"}),e.jsx("p",{className:"text-red-800 dark:text-red-200 mt-1",children:m.pending_request.rejection_reason}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-2",children:"Keep improving your metrics and try again later."})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx(Dl,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Pe,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:(null==w?void 0:w.total_properties)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 1"})]})]})}),e.jsx(Dl,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Se,{className:"w-6 h-6 text-green-600 dark:text-green-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bookings"}),e.jsx("p",{className:"text-2xl font-bold",children:(null==w?void 0:w.total_bookings)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 5"})]})]})}),e.jsx(Dl,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(G,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold",children:(null==(r=null==w?void 0:w.average_rating)?void 0:r.toFixed(1))||"0.0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 4.5"})]})]})})]}),e.jsxs(Dl,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Response Rate"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(n=null==w?void 0:w.response_rate)?void 0:n.toFixed(1))||0,"%"]})]}),e.jsx(Fc,{value:(null==w?void 0:w.response_rate)||0,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum: 90%"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Cancellation Rate"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(a=null==w?void 0:w.cancellation_rate)?void 0:a.toFixed(1))||0,"%"]})]}),e.jsx(Fc,{value:100-((null==w?void 0:w.cancellation_rate)||0),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum: 5%"})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Revenue"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["AED ",(null==(o=null==w?void 0:w.total_revenue)?void 0:o.toFixed(2))||"0.00"]})]})})]})]}),!(null==m?void 0:m.is_superhost)&&"pending"!==(null==m?void 0:m.status)&&e.jsxs(Dl,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:(null==h?void 0:h.eligible)?"Request Verification":"Eligibility Requirements"}),(null==h?void 0:h.eligible)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(Fe,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:"Congratulations! You're eligible for superhost status"}),e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200 mt-1",children:"Submit your request and our team will review it within 2-3 business days."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message to Admin (Optional)"}),e.jsx(ju,{value:f,onChange:e=>v(e.target.value),placeholder:"Tell us why you'd be a great superhost...",rows:4,maxLength:500}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.length,"/500 characters"]})]}),e.jsx(kr,{onClick:async()=>{if(null==h?void 0:h.eligible)try{b(!0),await c(f||void 0),await y(),v("")}catch(e){console.error("[Superhost] Error requesting verification:",e)}finally{b(!1)}},disabled:x,className:"w-full bg-krib-lime text-krib-dark-teal hover:bg-krib-lime/90",children:x?"Submitting...":"Request Superhost Verification"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx(J,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Keep growing to unlock superhost status"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:"Complete the requirements below to become eligible."})]})]}),(null==h?void 0:h.reasons)&&h.reasons.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"What you need to work on:"}),e.jsx("ul",{className:"space-y-2",children:h.reasons.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(Ue,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t})]},s))})]})]})]}),(null==m?void 0:m.is_superhost)&&e.jsx(Dl,{className:"p-6 bg-gradient-to-r from-krib-lime/20 to-krib-lime/10",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(H,{className:"w-12 h-12 text-krib-lime flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"You're a Superhost!"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Your properties are now marked with a superhost badge, helping you stand out to guests."}),m.approved_at&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Verified on ",new Date(m.approved_at).toLocaleDateString()]})]})]})})]})}var Hf="ScrollArea",[Vf,Gf]=u(Hf),[qf,Kf]=Vf(Hf),Zf=qe.forwardRef((t,r)=>{const{__scopeScrollArea:n,type:a="hover",dir:o,scrollHideDelay:i=600,...l}=t,[c,d]=qe.useState(null),[u,h]=qe.useState(null),[p,m]=qe.useState(null),[g,v]=qe.useState(null),[x,b]=qe.useState(null),[y,w]=qe.useState(0),[j,k]=qe.useState(0),[N,S]=qe.useState(!1),[_,C]=qe.useState(!1),P=f(r,e=>d(e)),L=E(o);return e.jsx(qf,{scope:n,type:a,dir:L,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:h,content:p,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:x,onScrollbarYChange:b,scrollbarYEnabled:_,onScrollbarYEnabledChange:C,onCornerWidthChange:w,onCornerHeightChange:k,children:e.jsx(s.div,{dir:L,...l,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});Zf.displayName=Hf;var Jf="ScrollAreaViewport",Yf=qe.forwardRef((t,r)=>{const{__scopeScrollArea:n,children:a,nonce:o,...i}=t,l=Kf(Jf,n),c=qe.useRef(null),d=f(r,c,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(s.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});Yf.displayName=Jf;var Xf="ScrollAreaScrollbar",Qf=qe.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Kf(Xf,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l="horizontal"===t.orientation;return qe.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),"hover"===a.type?e.jsx(ev,{...n,ref:s,forceMount:r}):"scroll"===a.type?e.jsx(tv,{...n,ref:s,forceMount:r}):"auto"===a.type?e.jsx(sv,{...n,ref:s,forceMount:r}):"always"===a.type?e.jsx(rv,{...n,ref:s}):null});Qf.displayName=Xf;var ev=qe.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Kf(Xf,t.__scopeScrollArea),[o,i]=qe.useState(!1);return qe.useEffect(()=>{const e=a.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),i(!0)},r=()=>{t=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(b,{present:r||o,children:e.jsx(sv,{"data-state":o?"visible":"hidden",...n,ref:s})})}),tv=qe.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Kf(Xf,t.__scopeScrollArea),o="horizontal"===t.orientation,i=jv(()=>c("SCROLL_END"),100),[l,c]=(d="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},qe.useReducer((e,t)=>u[e][t]??e,d));var d,u;return qe.useEffect(()=>{if("idle"===l){const e=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[l,a.scrollHideDelay,c]),qe.useEffect(()=>{const e=a.viewport,t=o?"scrollLeft":"scrollTop";if(e){let s=e[t];const r=()=>{const r=e[t];s!==r&&(c("SCROLL"),i()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[a.viewport,o,c,i]),e.jsx(b,{present:r||"hidden"!==l,children:e.jsx(rv,{"data-state":"hidden"===l?"hidden":"visible",...n,ref:s,onPointerEnter:x(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:x(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),sv=qe.forwardRef((t,s)=>{const r=Kf(Xf,t.__scopeScrollArea),{forceMount:n,...a}=t,[o,i]=qe.useState(!1),l="horizontal"===t.orientation,c=jv(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?e:t)}},10);return kv(r.viewport,c),kv(r.content,c),e.jsx(b,{present:n||o,children:e.jsx(rv,{"data-state":o?"visible":"hidden",...a,ref:s})})}),rv=qe.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=Kf(Xf,t.__scopeScrollArea),o=qe.useRef(null),i=qe.useRef(0),[l,c]=qe.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=fv(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function h(e,t){return function(e,t,s,r="ltr"){const n=vv(s),a=n/2,o=t||a,i=n-o,l=s.scrollbar.paddingStart+o,c=s.scrollbar.size-s.scrollbar.paddingEnd-i,d=s.content-s.viewport,u="ltr"===r?[0,d]:[-1*d,0];return bv([l,c],u)(e)}(e,i.current,l,t)}return"horizontal"===r?e.jsx(nv,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&o.current){const e=xv(a.viewport.scrollLeft,l,a.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=h(e,a.dir))}}):"vertical"===r?e.jsx(av,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&o.current){const e=xv(a.viewport.scrollTop,l);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=h(e))}}):null}),nv=qe.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,o=Kf(Xf,t.__scopeScrollArea),[i,l]=qe.useState(),c=qe.useRef(null),d=f(s,c,o.onScrollbarXChange);return qe.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(lv,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":vv(r)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.x),onDragScroll:e=>t.onDragScroll(e.x),onWheelScroll:(e,s)=>{if(o.viewport){const r=o.viewport.scrollLeft+e.deltaX;t.onWheelScroll(r),yv(r,s)&&e.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:gv(i.paddingLeft),paddingEnd:gv(i.paddingRight)}})}})}),av=qe.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,o=Kf(Xf,t.__scopeScrollArea),[i,l]=qe.useState(),c=qe.useRef(null),d=f(s,c,o.onScrollbarYChange);return qe.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(lv,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":vv(r)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.y),onDragScroll:e=>t.onDragScroll(e.y),onWheelScroll:(e,s)=>{if(o.viewport){const r=o.viewport.scrollTop+e.deltaY;t.onWheelScroll(r),yv(r,s)&&e.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:gv(i.paddingTop),paddingEnd:gv(i.paddingBottom)}})}})}),[ov,iv]=Vf(Xf),lv=qe.forwardRef((t,r)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:o,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:p,...m}=t,g=Kf(Xf,n),[v,b]=qe.useState(null),y=f(r,e=>b(e)),w=qe.useRef(null),j=qe.useRef(""),k=g.viewport,N=a.content-a.viewport,S=te(h),_=te(d),C=jv(p,10);function E(e){if(w.current){const t=e.clientX-w.current.left,s=e.clientY-w.current.top;u({x:t,y:s})}}return qe.useEffect(()=>{const e=e=>{const t=e.target;(null==v?void 0:v.contains(t))&&S(e,N)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[k,v,N,S]),qe.useEffect(_,[a,_]),kv(v,C),kv(g.content,C),e.jsx(ov,{scope:n,scrollbar:v,hasThumb:o,onThumbChange:te(i),onThumbPointerUp:te(l),onThumbPositionChange:_,onThumbPointerDown:te(c),children:e.jsx(s.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:x(t.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),w.current=v.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),E(e)}}),onPointerMove:x(t.onPointerMove,E),onPointerUp:x(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=j.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),cv="ScrollAreaThumb",dv=qe.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=iv(cv,t.__scopeScrollArea);return e.jsx(b,{present:r||a.hasThumb,children:e.jsx(uv,{ref:s,...n})})}),uv=qe.forwardRef((t,r)=>{const{__scopeScrollArea:n,style:a,...o}=t,i=Kf(cv,n),l=iv(cv,n),{onThumbPositionChange:c}=l,d=f(r,e=>l.onThumbChange(e)),u=qe.useRef(void 0),h=jv(()=>{u.current&&(u.current(),u.current=void 0)},100);return qe.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(h(),!u.current){const t=wv(e,c);u.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,h,c]),e.jsx(s.div,{"data-state":l.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:x(t.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;l.onThumbPointerDown({x:s,y:r})}),onPointerUp:x(t.onPointerUp,l.onThumbPointerUp)})});dv.displayName=cv;var hv="ScrollAreaCorner",pv=qe.forwardRef((t,s)=>{const r=Kf(hv,t.__scopeScrollArea),n=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?e.jsx(mv,{...t,ref:s}):null});pv.displayName=hv;var mv=qe.forwardRef((t,r)=>{const{__scopeScrollArea:n,...a}=t,o=Kf(hv,n),[i,l]=qe.useState(0),[c,d]=qe.useState(0),u=Boolean(i&&c);return kv(o.scrollbarX,()=>{var e;const t=(null==(e=o.scrollbarX)?void 0:e.offsetHeight)||0;o.onCornerHeightChange(t),d(t)}),kv(o.scrollbarY,()=>{var e;const t=(null==(e=o.scrollbarY)?void 0:e.offsetWidth)||0;o.onCornerWidthChange(t),l(t)}),u?e.jsx(s.div,{...a,ref:r,style:{width:i,height:c,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0,...t.style}}):null});function gv(e){return e?parseInt(e,10):0}function fv(e,t){const s=e/t;return isNaN(s)?0:s}function vv(e){const t=fv(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function xv(e,t,s="ltr"){const r=vv(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-n,o=t.content-t.viewport,i=a-r,l=Gc(e,"ltr"===s?[0,o]:[-1*o,0]);return bv([0,o],[0,i])(l)}function bv(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function yv(e,t){return e>0&&e<t}var wv=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function n(){const a={left:e.scrollLeft,top:e.scrollTop},o=s.left!==a.left,i=s.top!==a.top;(o||i)&&t(),s=a,r=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(r)};function jv(e,t){const s=te(e),r=qe.useRef(0);return qe.useEffect(()=>()=>window.clearTimeout(r.current),[]),qe.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function kv(e,t){const s=te(t);ee(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}var Nv=Zf,Sv=Yf,_v=pv;const Cv=qe.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Nv,{ref:n,className:wr("relative overflow-hidden",t),...r,children:[e.jsx(Sv,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Ev,{}),e.jsx(_v,{})]}));Cv.displayName=Nv.displayName;const Ev=qe.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(Qf,{ref:n,orientation:s,className:wr("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(dv,{className:"relative flex-1 rounded-full bg-border"})}));function Pv(){const{apiCall:t}=Il(),[s,r]=qe.useState([]),[n,a]=qe.useState(null),[o,i]=qe.useState([]),[l,c]=qe.useState(""),[d,u]=qe.useState(""),[h,p]=qe.useState(!1),[m,g]=qe.useState("");async function f(){try{const e=await t("/messages/conversations","GET");r(e||[])}catch(e){console.error("Failed to load conversations:",e)}}async function v(e){try{const s=await t(`/messages/conversations/${e}/messages`,"GET");i(s||[])}catch(s){console.error("Failed to load messages:",s)}}async function x(){if(l.trim()&&n){p(!0);try{await t(`/messages/conversations/${n.id}/messages`,"POST",{content:l}),c(""),u(""),await v(n.id),await f()}catch(e){console.error("Failed to send message:",e)}finally{p(!1)}}}qe.useEffect(()=>{f()},[]),qe.useEffect(()=>{n&&v(n.id)},[n]);const b=s.filter(e=>e.guest_name.toLowerCase().includes(m.toLowerCase())||e.guest_email.toLowerCase().includes(m.toLowerCase()));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Communicate with your guests"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 h-[calc(100vh-200px)]",children:[e.jsxs(Dl,{className:"col-span-1",children:[e.jsxs(Ul,{children:[e.jsx($l,{children:"Conversations"}),e.jsxs(zl,{children:[s.filter(e=>"active"===e.status).length," active"]}),e.jsxs("div",{className:"relative mt-4",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Nr,{placeholder:"Search conversations...",value:m,onChange:e=>g(e.target.value),className:"pl-10"})]})]}),e.jsx(Bl,{className:"p-0",children:e.jsxs(Cv,{className:"h-[calc(100vh-380px)]",children:[b.map(t=>e.jsxs("div",{onClick:()=>a(t),className:"p-4 border-b cursor-pointer hover:bg-accent transition-colors "+((null==n?void 0:n.id)===t.id?"bg-accent":""),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bf,{children:e.jsx(wf,{children:t.guest_name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.guest_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.guest_email})]})]}),t.unread_count_host>0&&e.jsx(Hc,{variant:"destructive",children:t.unread_count_host})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(t.last_message_at).toLocaleString()})]},t.id)),0===b.length&&e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(V,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No conversations found"})]})]})})]}),e.jsx(Dl,{className:"col-span-2 flex flex-col",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ul,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx($l,{children:n.guest_name}),e.jsx(zl,{children:n.guest_email})]}),e.jsxs(kr,{variant:"outline",size:"sm",onClick:()=>async function(e){try{await t(`/messages/conversations/${e}/archive`,"POST"),await f(),(null==n?void 0:n.id)===e&&(a(null),i([]))}catch(s){console.error("Failed to archive conversation:",s)}}(n.id),children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Archive"]})]})}),e.jsx(Cv,{className:"flex-1 p-4",children:e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsx("div",{className:"flex "+("host"===t.sender_type?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[70%] rounded-lg p-3 "+("host"===t.sender_type?"bg-primary text-primary-foreground":"bg-muted"),children:[t.is_ai_generated&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(ye,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs opacity-70",children:"AI Generated"})]}),e.jsx("p",{className:"text-sm",children:t.content}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(t.created_at).toLocaleTimeString()})]})},t.id))})}),d&&e.jsx("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-950 border-t border-b",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 mb-1",children:"AI Suggestion"}),e.jsx("p",{className:"text-sm",children:d}),e.jsx(kr,{size:"sm",variant:"link",onClick:()=>c(d),className:"mt-1 p-0 h-auto",children:"Use this response"})]})]})}),e.jsxs("div",{className:"p-4 border-t",children:[e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsxs(kr,{variant:"outline",size:"sm",onClick:async function(){if(!n||0===o.length)return;const e=[...o].reverse().find(e=>"guest"===e.sender_type);if(e){p(!0);try{const s=await t(`/messages/conversations/${n.id}/ai-response`,"POST",{message:e.content});u(s.ai_response)}catch(s){console.error("Failed to generate AI response:",s)}finally{p(!1)}}},disabled:h||0===o.length,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Generate AI Response"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ju,{placeholder:"Type your message...",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())},className:"resize-none",rows:3}),e.jsx(kr,{onClick:x,disabled:h||!l.trim(),children:e.jsx(He,{className:"h-4 w-4"})})]})]})]}):e.jsx(Bl,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(V,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"Select a conversation to start messaging"})]})})})]})]})}Ev.displayName=Qf.displayName;var Lv="Popover",[Ov,Tv]=u(Lv,[h]),Mv=h(),[Rv,Av]=Ov(Lv),Iv=t=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!1}=t,l=Mv(s),c=qe.useRef(null),[d,u]=qe.useState(!1),[h,f]=m({prop:n,defaultProp:a??!1,onChange:o,caller:Lv});return e.jsx(g,{...l,children:e.jsx(Rv,{scope:s,contentId:p(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:qe.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:d,onCustomAnchorAdd:qe.useCallback(()=>u(!0),[]),onCustomAnchorRemove:qe.useCallback(()=>u(!1),[]),modal:i,children:r})})};Iv.displayName=Lv;var Dv="PopoverAnchor";qe.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Av(Dv,r),o=Mv(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return qe.useEffect(()=>(i(),()=>l()),[i,l]),e.jsx(v,{...o,...n,ref:s})}).displayName=Dv;var Uv="PopoverTrigger",$v=qe.forwardRef((t,r)=>{const{__scopePopover:n,...a}=t,o=Av(Uv,n),i=Mv(n),l=f(r,o.triggerRef),c=e.jsx(s.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Yv(o.open),...a,ref:l,onClick:x(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:e.jsx(v,{asChild:!0,...i,children:c})});$v.displayName=Uv;var zv="PopoverPortal",[Bv,Fv]=Ov(zv,{forceMount:void 0}),Wv=t=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=t,o=Av(zv,s);return e.jsx(Bv,{scope:s,forceMount:r,children:e.jsx(b,{present:r||o.open,children:e.jsx(y,{asChild:!0,container:a,children:n})})})};Wv.displayName=zv;var Hv="PopoverContent",Vv=qe.forwardRef((t,s)=>{const r=Fv(Hv,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,o=Av(Hv,t.__scopePopover);return e.jsx(b,{present:n||o.open,children:o.modal?e.jsx(qv,{...a,ref:s}):e.jsx(Kv,{...a,ref:s})})});Vv.displayName=Hv;var Gv=ae("PopoverContent.RemoveScroll"),qv=qe.forwardRef((t,s)=>{const r=Av(Hv,t.__scopePopover),n=qe.useRef(null),a=f(s,n),o=qe.useRef(!1);return qe.useEffect(()=>{const e=n.current;if(e)return se(e)},[]),e.jsx(ne,{as:Gv,allowPinchZoom:!0,children:e.jsx(Zv,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:x(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),o.current||null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:x(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,r=2===t.button||s;o.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:x(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Kv=qe.forwardRef((t,s)=>{const r=Av(Hv,t.__scopePopover),n=qe.useRef(!1),a=qe.useRef(!1);return e.jsx(Zv,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var s,o;null==(s=t.onCloseAutoFocus)||s.call(t,e),e.defaultPrevented||(n.current||null==(o=r.triggerRef.current)||o.focus(),e.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:e=>{var s,o;null==(s=t.onInteractOutside)||s.call(t,e),e.defaultPrevented||(n.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const i=e.target;(null==(o=r.triggerRef.current)?void 0:o.contains(i))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}})}),Zv=qe.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=t,p=Av(Hv,r),m=Mv(r);return re(),e.jsx(oe,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(j,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:e.jsx(k,{"data-state":Yv(p.open),role:"dialog",id:p.contentId,...m,...h,ref:s,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Jv="PopoverClose";qe.forwardRef((t,r)=>{const{__scopePopover:n,...a}=t,o=Av(Jv,n);return e.jsx(s.button,{type:"button",...a,ref:r,onClick:x(t.onClick,()=>o.onOpenChange(!1))})}).displayName=Jv;function Yv(e){return e?"open":"closed"}qe.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Mv(r);return e.jsx(w,{...a,...n,ref:s})}).displayName="PopoverArrow";var Xv=Iv,Qv=$v,ex=Wv,tx=Vv;function sx({...t}){return e.jsx(Xv,{"data-slot":"popover",...t})}function rx({...t}){return e.jsx(Qv,{"data-slot":"popover-trigger",...t})}function nx({className:t,align:s="center",sideOffset:r=4,...n}){return e.jsx(ex,{children:e.jsx(tx,{"data-slot":"popover-content",align:s,sideOffset:r,className:wr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}function ax(){const{user:t}=Il(),s=os(),[r,n]=qe.useState([]),[a,o]=qe.useState(0),[i,l]=qe.useState(!1),[c,d]=qe.useState(!1),u=async()=>{if(t)try{d(!0);const e=await fetch(`https://api.host.krib.ae/api/v1/hosts/${t.id}/notifications?limit=20`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();t.success&&t.data.notifications&&(n(t.data.notifications),o(t.data.unread_count||0))}}catch(e){console.error("Failed to load notifications:",e)}finally{d(!1)}},h=async e=>{if(e.is_read||await(async e=>{if(t)try{(await fetch(`https://api.host.krib.ae/api/v1/hosts/${t.id}/notifications/${e}/read`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).ok&&(n(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),o(e=>Math.max(0,e-1)))}catch(s){console.error("Failed to mark notification as read:",s)}})(e.id),l(!1),e.action_url)s(e.action_url);else switch(e.type){case"new_booking":case"booking_update":s("/dashboard/bookings");break;case"payment_received":s("/dashboard/financials");break;case"guest_message":s("/dashboard/messages");break;case"urgent":e.message.includes("settings")&&s("/dashboard/settings")}},p=t=>{const s="w-2 h-2 rounded-full";switch(t){case"urgent":return e.jsx("div",{className:`${s} bg-red-500`});case"new_booking":return e.jsx("div",{className:`${s} bg-green-500`});case"payment_received":return e.jsx("div",{className:`${s} bg-blue-500`});case"guest_message":return e.jsx("div",{className:`${s} bg-purple-500`});default:return e.jsx("div",{className:`${s} bg-gray-400`})}},m=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/6e4),n=Math.floor(r/60),a=Math.floor(n/24);return r<1?"Just now":r<60?`${r}m ago`:n<24?`${n}h ago`:a<7?`${a}d ago`:t.toLocaleDateString()};return qe.useEffect(()=>{u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[t]),qe.useEffect(()=>{i&&u()},[i]),e.jsxs(sx,{open:i,onOpenChange:l,children:[e.jsx(rx,{asChild:!0,children:e.jsxs(kr,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Ve,{className:"h-5 w-5"}),a>0&&e.jsx(Hc,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 hover:bg-red-600",variant:"destructive",children:a>9?"9+":a})]})}),e.jsxs(nx,{className:"w-96 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),a>0&&e.jsxs(Hc,{variant:"secondary",children:[a," new"]})]}),e.jsx(Cv,{className:"h-[400px]",children:c?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Loading notifications..."}):0===r.length?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications"})]}):e.jsx("div",{className:"divide-y",children:r.map(t=>e.jsx("button",{onClick:()=>h(t),className:"w-full p-4 text-left hover:bg-accent transition-colors "+(t.is_read?"":"bg-accent/50"),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:p(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium "+(t.is_read?"text-muted-foreground":"text-foreground"),children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:m(t.created_at)})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.message})]})]})},t.id))})})]})]})}function ox(){const{user:t}=Il(),[s,r]=qe.useState([]),[n,a]=qe.useState(null),[o,i]=qe.useState(!1),[l,c]=qe.useState("all"),[d,u]=qe.useState([]),[h,p]=qe.useState(null),[m,g]=qe.useState(""),[f,v]=qe.useState(1),[x,b]=qe.useState(0),y=async()=>{if(t)try{i(!0);const e="all"!==l?`&property_id=${l}`:"",t=await fetch(`https://api.host.krib.ae/api/v1/reviews?page=${f}&page_size=20${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();r(e.reviews||[]),b(e.total||0)}}catch(e){console.error("Failed to load reviews:",e)}finally{i(!1)}},w=async()=>{if(t)try{const e=await fetch("https://api.host.krib.ae/api/v1/reviews/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();a(t)}}catch(e){console.error("Failed to load stats:",e)}};qe.useEffect(()=>{(async()=>{try{const e=await fetch("https://api.host.krib.ae/api/properties",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();u(t||[])}}catch(e){console.error("Failed to load properties:",e)}})(),w()},[t]),qe.useEffect(()=>{y()},[t,l,f]);const j=t=>e.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(s=>e.jsx(G,{className:"w-4 h-4 "+(s<=t?"fill-yellow-400 text-yellow-400":"text-gray-300")},s))}),k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and respond to guest reviews"})]})}),n&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Dl,{children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Total Reviews"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.total_reviews})})]}),e.jsxs(Dl,{children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Average Rating"}),e.jsx(G,{className:"h-4 w-4 text-yellow-400"})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.average_rating.toFixed(1)}),e.jsx("div",{className:"flex mt-2",children:j(n.average_rating)})]})]}),e.jsxs(Dl,{children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Pending Responses"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Bl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.pending_responses}),n.pending_responses>0&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Needs your attention"})]})]}),e.jsxs(Dl,{children:[e.jsxs(Ul,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($l,{className:"text-sm font-medium",children:"Rating Distribution"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Bl,{children:e.jsx("div",{className:"space-y-1",children:Object.entries(n.ratings_breakdown).reverse().map(([t,s])=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-3",children:t}),e.jsx(G,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),e.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-400",style:{width:(n.total_reviews>0?s/n.total_reviews*100:0)+"%"}})}),e.jsx("span",{className:"text-muted-foreground w-8 text-right",children:s})]},t))})})]})]}),e.jsxs(Dl,{children:[e.jsx(Ul,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx($l,{children:"All Reviews"}),e.jsx(zl,{children:"View and respond to guest feedback"})]}),e.jsxs(iu,{value:l,onValueChange:c,children:[e.jsx(cu,{className:"w-[250px]",children:e.jsx(lu,{placeholder:"Filter by property"})}),e.jsxs(du,{children:[e.jsx(uu,{value:"all",children:"All Properties"}),d.map(t=>e.jsx(uu,{value:t.id,children:t.title},t.id))]})]})]})}),e.jsx(Bl,{children:o?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading reviews..."}):0===s.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(V,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No reviews yet"}),e.jsx("p",{className:"text-sm",children:"Reviews from guests will appear here"})]}):e.jsxs("div",{className:"space-y-4",children:[s.map(t=>e.jsx(Dl,{children:e.jsx(Bl,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold",children:t.guest_name||"Guest"}),t.property_title&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:""}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.property_title})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j(t.rating),e.jsx("span",{className:"text-sm text-muted-foreground",children:k(t.created_at)})]})]}),!t.host_response&&e.jsx(Hc,{variant:"secondary",children:"Pending Response"})]}),t.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.comment}),t.cleanliness_rating&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cleanliness"}),j(t.cleanliness_rating)]}),t.communication_rating&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Communication"}),j(t.communication_rating)]}),t.location_rating&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Location"}),j(t.location_rating)]})]}),t.host_response&&e.jsxs("div",{className:"bg-accent/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Your Response"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.host_response}),t.responded_at&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Responded on ",k(t.responded_at)]})]}),!t.host_response&&e.jsx("div",{children:h===t.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ju,{placeholder:"Write your response (min 10 characters)...",value:m,onChange:e=>g(e.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(kr,{onClick:()=>(async e=>{if(!m.trim()||m.length<10)alert("Response must be at least 10 characters");else try{(await fetch(`https://api.host.krib.ae/api/v1/reviews/${e}/respond`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify({response:m})})).ok?(p(null),g(""),y(),w()):alert("Failed to submit response")}catch(t){console.error("Failed to submit response:",t),alert("Failed to submit response")}})(t.id),disabled:m.length<10,children:"Submit Response"}),e.jsx(kr,{variant:"outline",onClick:()=>{p(null),g("")},children:"Cancel"})]})]}):e.jsx(kr,{variant:"outline",onClick:()=>p(t.id),children:"Respond to Review"})})]})})},t.id)),x>20&&e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[e.jsx(kr,{variant:"outline",onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===f,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Page ",f," of ",Math.ceil(x/20)]}),e.jsx(kr,{variant:"outline",onClick:()=>v(e=>e+1),disabled:f>=Math.ceil(x/20),children:"Next"})]})]})})]})]})}function ix(){const{user:t,isLoading:s}=Il(),r=ns(),n=os(),a=r.pathname.startsWith("/dashboard")||["overview","properties","add-property","analytics","bookings","financials","superhost","messages","settings"].some(e=>r.pathname===`/${e}`),o=e=>{const t=e.replace("/dashboard/","").replace("/","")||"overview";return["overview","properties","add-property","analytics","bookings","financials","superhost","messages","settings"].includes(t)?t:"overview"},[i,l]=qe.useState(o(r.pathname));qe.useEffect(()=>{l(o(r.pathname))},[r.pathname]);return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})}):"/auth/callback"===r.pathname?e.jsx(mc,{}):t||r.pathname.startsWith("/auth")?r.pathname.startsWith("/auth")&&"/auth/callback"!==r.pathname?e.jsx(pc,{}):t&&"/"===r.pathname?(n("/dashboard"),null):!t&&a?(n("/auth"),null):e.jsx(Cn,{children:e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx(fc,{activeSection:i,onSectionChange:e=>{l(e),n("overview"===e?"/dashboard":`/dashboard/${e}`)}}),e.jsxs("main",{className:"flex-1 overflow-auto krib-dashboard-background",style:{marginLeft:"16rem"},children:[e.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:e.jsx("div",{className:"flex items-center justify-end h-16 px-6",children:e.jsx(ax,{})})}),e.jsxs(xs,{children:[e.jsx(fs,{path:"/dashboard",element:e.jsx(Vc,{})}),e.jsx(fs,{path:"/dashboard/overview",element:e.jsx(Vc,{})}),e.jsx(fs,{path:"/dashboard/properties",element:e.jsx(Cu,{})}),e.jsx(fs,{path:"/dashboard/add-property",element:e.jsx(mg,{})}),e.jsx(fs,{path:"/dashboard/analytics",element:e.jsx(gg,{})}),e.jsx(fs,{path:"/dashboard/bookings",element:e.jsx(wg,{})}),e.jsx(fs,{path:"/dashboard/financials",element:e.jsx(kg,{})}),e.jsx(fs,{path:"/dashboard/superhost",element:e.jsx(Wf,{})}),e.jsx(fs,{path:"/dashboard/messages",element:e.jsx(Pv,{})}),e.jsx(fs,{path:"/dashboard/reviews",element:e.jsx(ox,{})}),e.jsx(fs,{path:"/dashboard/settings",element:e.jsx(Ff,{})})]})]})]})}):e.jsxs(xs,{children:[e.jsx(fs,{path:"/",element:e.jsx(Wl,{})}),e.jsx(fs,{path:"/auth",element:e.jsx(pc,{})}),e.jsx(fs,{path:"/auth/callback",element:e.jsx(mc,{})}),e.jsx(fs,{path:"*",element:e.jsx(Wl,{})})]})}function lx(){return e.jsx(ws,{children:e.jsx(ix,{})})}function cx(){return e.jsx(Al,{children:e.jsx(lx,{})})}const dx=qe.createContext(void 0),ux={setTheme:e=>{},themes:[]},hx=({...t})=>{const{theme:s="system"}=null!==(r=qe.useContext(dx))&&void 0!==r?r:ux;var r;return e.jsx(Bf,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};mt.createRoot(document.getElementById("root")).render(e.jsx(Ye.StrictMode,{children:e.jsxs(Al,{children:[e.jsx(cx,{}),e.jsx(hx,{})]})}));
