import{j as e,S as t,P as s,R as r,C as a,a as n,X as i,T as o,D as l,b as c,O as d,c as u,d as h,u as m,e as p,f,g,A as x,h as v,i as b,k as y,l as w,m as j,n as N,o as k,Z as _,p as S,q as C,r as E,s as P,t as T,I as A,M as R,L as O,E as I,v as $,w as D,U as L,H as U,B as M,x as z,y as B,z as F,F as W,G as q,J as G,K as H,N as K,Q as V,V as J,W as Y,Y as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as se,a3 as re,a4 as ae,a5 as ne,a6 as ie,a7 as oe,a8 as le,a9 as ce,aa as de,ab as ue,ac as he,ad as me,ae as pe,af as fe,ag as ge,ah as xe,ai as ve,aj as be,ak as ye,al as we,am as je,an as Ne,ao as ke,ap as _e,aq as Se,ar as Ce,as as Ee,at as Pe,au as Te,av as Ae,aw as Re,ax as Oe,ay as Ie,az as $e,aA as De,aB as Le,aC as Ue,aD as Me,aE as ze,aF as Be,aG as Fe,aH as We,aI as qe}from"./ui-BK_xwgYS.js";import{a as Ge,r as He,R as Ke,d as Ve,c as Je,b as Ye,v as Xe}from"./vendor-BKjmSbiz.js";import{c as Qe,R as Ze,L as et,C as tt,X as st,Y as rt,T as at,a as nt,A as it,b as ot,P as lt,d as ct,e as dt}from"./charts-DyXe_cX1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ut,ht,mt={},pt=Ge;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ft.apply(this,arguments)}mt.createRoot=pt.createRoot,mt.hydrateRoot=pt.hydrateRoot,(ht=ut||(ut={})).Pop="POP",ht.Push="PUSH",ht.Replace="REPLACE";const gt="popstate";function xt(e){return void 0===e&&(e={}),function(e,t,s,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:n=!1}=r,i=a.history,o=ut.Pop,l=null,c=d();null==c&&(c=0,i.replaceState(ft({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){o=ut.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e,t){o=ut.Push;let s=wt(f.location,e,t);c=d()+1;let r=yt(s,c),u=f.createHref(s);try{i.pushState(r,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;a.location.assign(u)}n&&l&&l({action:o,location:f.location,delta:1})}function m(e,t){o=ut.Replace;let s=wt(f.location,e,t);c=d();let r=yt(s,c),a=f.createHref(s);i.replaceState(r,"",a),n&&l&&l({action:o,location:f.location,delta:0})}function p(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,s="string"==typeof e?e:jt(e);return s=s.replace(/ $/,"%20"),vt(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}let f={get action(){return o},get location(){return e(a,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(gt,u),l=e,()=>{a.removeEventListener(gt,u),l=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:m,go:e=>i.go(e)};return f}(function(e,t){let{pathname:s,search:r,hash:a}=e.location;return wt("",{pathname:s,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:jt(t)},0,e)}function vt(e,t){if(!1===e||null==e)throw new Error(t)}function bt(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function yt(e,t){return{usr:e.state,key:e.key,idx:t}}function wt(e,t,s,r){return void 0===s&&(s=null),ft({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Nt(t):t,{state:s,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function jt(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Nt(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var kt,_t;function St(e,t,s){return void 0===s&&(s="/"),function(e,t,s){let r="string"==typeof t?Nt(t):t,a=zt(r.pathname||"/",s);if(null==a)return null;let n=Ct(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let i=null;for(let o=0;null==i&&o<n.length;++o){let e=Mt(a);i=Lt(n[o],e)}return i}(e,t,s)}function Ct(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===r&&(r="");let a=(e,a,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(vt(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=Wt([r,i.relativePath]),l=s.concat(i);e.children&&e.children.length>0&&(vt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Ct(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Dt(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let r of Et(e.path))a(e,t,r);else a(e,t)}),t}function Et(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,a=s.endsWith("?"),n=s.replace(/\?$/,"");if(0===r.length)return a?[n,""]:[n];let i=Et(r.join("/")),o=[];return o.push(...i.map(e=>""===e?n:[n,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(_t=kt||(kt={})).data="data",_t.deferred="deferred",_t.redirect="redirect",_t.error="error";const Pt=/^:[\w-]+$/,Tt=3,At=2,Rt=1,Ot=10,It=-2,$t=e=>"*"===e;function Dt(e,t){let s=e.split("/"),r=s.length;return s.some($t)&&(r+=It),t&&(r+=At),s.filter(e=>!$t(e)).reduce((e,t)=>e+(Pt.test(t)?Tt:""===t?Rt:Ot),r)}function Lt(e,t,s){let{routesMeta:r}=e,a={},n="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],s=o===r.length-1,l="/"===n?t:t.slice(n.length)||"/",c=Ut({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l),d=e.route;if(!c)return null;Object.assign(a,c.params),i.push({params:a,pathname:Wt([n,c.pathname]),pathnameBase:qt(Wt([n,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(n=Wt([n,c.pathnameBase]))}return i}function Ut(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);bt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let n=new RegExp(a,t?void 0:"i");return[n,r]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,t,s)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[s]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[s];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:i,pattern:e}}function Mt(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return bt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function zt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function Bt(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ft(e,t,s,r){let a;void 0===r&&(r=!1),"string"==typeof e?a=Nt(e):(a=ft({},e),vt(!a.pathname||!a.pathname.includes("?"),Bt("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),Bt("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),Bt("#","search","hash",a)));let n,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)n=s;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:s,search:r="",hash:a=""}="string"==typeof e?Nt(e):e,n=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:n,search:Gt(r),hash:Ht(a)}}(a,n),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&s.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const Wt=e=>e.join("/").replace(/\/\/+/g,"/"),qt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ht=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const Kt=["post","put","patch","delete"];new Set(Kt);const Vt=["get",...Kt];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Jt.apply(this,arguments)}new Set(Vt);const Yt=He.createContext(null),Xt=He.createContext(null),Qt=He.createContext(null),Zt=He.createContext(null),es=He.createContext({outlet:null,matches:[],isDataRoute:!1}),ts=He.createContext(null);function ss(){return null!=He.useContext(Zt)}function rs(){return ss()||vt(!1),He.useContext(Zt).location}function as(e){He.useContext(Qt).static||He.useLayoutEffect(e)}function ns(){let{isDataRoute:e}=He.useContext(es);return e?function(){let{router:e}=function(){let e=He.useContext(Yt);return e||vt(!1),e}(us.UseNavigateStable),t=ms(hs.UseNavigateStable),s=He.useRef(!1);return as(()=>{s.current=!0}),He.useCallback(function(r,a){void 0===a&&(a={}),s.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Jt({fromRouteId:t},a)))},[e,t])}():function(){ss()||vt(!1);let e=He.useContext(Yt),{basename:t,future:s,navigator:r}=He.useContext(Qt),{matches:a}=He.useContext(es),{pathname:n}=rs(),i=JSON.stringify(function(e,t){let s=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}(a,s.v7_relativeSplatPath)),o=He.useRef(!1);return as(()=>{o.current=!0}),He.useCallback(function(s,a){if(void 0===a&&(a={}),!o.current)return;if("number"==typeof s)return void r.go(s);let l=Ft(s,JSON.parse(i),n,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Wt([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,i,n,e])}()}function is(e,t){return function(e,t,s,r){ss()||vt(!1);let{navigator:a}=He.useContext(Qt),{matches:n}=He.useContext(es),i=n[n.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c,d=rs();if(t){var u;let e="string"==typeof t?Nt(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||vt(!1),c=e}else c=d;let h=c.pathname||"/",m=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=St(e,{pathname:m}),f=function(e,t,s,r){var a;void 0===t&&(t=[]);void 0===s&&(s=null);void 0===r&&(r=null);if(null==e){var n;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(n=r)&&n.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let i=e,o=null==(a=s)?void 0:a.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||vt(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(s&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:r}=s,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,r,a)=>{let n,d=!1,u=null,h=null;var m;s&&(n=o&&r.route.id?o[r.route.id]:void 0,u=r.route.errorElement||ls,l&&(c<0&&0===a?(ps[m="route-fallback"]||(ps[m]=!0),d=!0,h=null):c===a&&(d=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,a+1)),f=()=>{let t;return t=n?u:d?h:r.route.Component?He.createElement(r.route.Component,null):r.route.element?r.route.element:e,He.createElement(ds,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?He.createElement(cs,{location:s.location,revalidation:s.revalidation,component:u,error:n,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:Wt([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Wt([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),n,s,r);if(t&&f)return He.createElement(Zt.Provider,{value:{location:Jt({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ut.Pop}},f);return f}(e,t)}function os(){let e=function(){var e;let t=He.useContext(ts),s=function(){let e=He.useContext(Xt);return e||vt(!1),e}(),r=ms();if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return He.createElement(He.Fragment,null,He.createElement("h2",null,"Unexpected Application Error!"),He.createElement("h3",{style:{fontStyle:"italic"}},t),s?He.createElement("pre",{style:r},s):null,null)}const ls=He.createElement(os,null);class cs extends He.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?He.createElement(es.Provider,{value:this.props.routeContext},He.createElement(ts.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ds(e){let{routeContext:t,match:s,children:r}=e,a=He.useContext(Yt);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),He.createElement(es.Provider,{value:t},r)}var us=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(us||{}),hs=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(hs||{});function ms(e){let t=function(){let e=He.useContext(es);return e||vt(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||vt(!1),s.route.id}const ps={};function fs(e){vt(!1)}function gs(e){let{basename:t="/",children:s=null,location:r,navigationType:a=ut.Pop,navigator:n,static:i=!1,future:o}=e;ss()&&vt(!1);let l=t.replace(/^\/*/,"/"),c=He.useMemo(()=>({basename:l,navigator:n,static:i,future:Jt({v7_relativeSplatPath:!1},o)}),[l,o,n,i]);"string"==typeof r&&(r=Nt(r));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=r,f=He.useMemo(()=>{let e=zt(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:p},navigationType:a}},[l,d,u,h,m,p,a]);return null==f?null:He.createElement(Qt.Provider,{value:c},He.createElement(Zt.Provider,{children:s,value:f}))}function xs(e){let{children:t,location:s}=e;return is(vs(t),s)}function vs(e,t){void 0===t&&(t=[]);let s=[];return He.Children.forEach(e,(e,r)=>{if(!He.isValidElement(e))return;let a=[...t,r];if(e.type===He.Fragment)return void s.push.apply(s,vs(e.props.children,a));e.type!==fs&&vt(!1),e.props.index&&e.props.children&&vt(!1);let n={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=vs(e.props.children,a)),s.push(n)}),s}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */new Promise(()=>{});try{window.__reactRouterVersion="6"}catch(Kp){}const bs=Ke.startTransition;function ys(e){let{basename:t,children:s,future:r,window:a}=e,n=He.useRef();null==n.current&&(n.current=xt({window:a,v5Compat:!0}));let i=n.current,[o,l]=He.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=He.useCallback(e=>{c&&bs?bs(()=>l(e)):l(e)},[l,c]);return He.useLayoutEffect(()=>i.listen(d),[i,d]),He.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),He.createElement(gs,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:i,future:r})}var ws,js,Ns,ks;(js=ws||(ws={})).UseScrollRestoration="useScrollRestoration",js.UseSubmit="useSubmit",js.UseSubmitFetcher="useSubmitFetcher",js.UseFetcher="useFetcher",js.useViewTransitionState="useViewTransitionState",(ks=Ns||(Ns={})).UseFetcher="useFetcher",ks.UseFetchers="useFetchers",ks.UseScrollRestoration="useScrollRestoration";const _s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Ss=Qe,Cs=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return Ss(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:n}=t,i=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const i=_s(t)||_s(r);return a[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...o}[t]):{...n,...o}[t]===s})?[...e,s,r]:e},[]);return Ss(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)};const Es=e=>{const t=Rs(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),Ps(s,t)||As(e)},getConflictingClassGroupIds:(e,t)=>{const a=s[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},Ps=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),n=a?Ps(e.slice(1),a):void 0;if(n)return n;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},Ts=/^\[(.+)\]$/,As=e=>{if(Ts.test(e)){const t=Ts.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Rs=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return Ds(Object.entries(e.classGroups),s).forEach(([e,s])=>{Os(s,r,e,t)}),r},Os=(e,t,s,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Is(t,e)).classGroupId=s)}if("function"==typeof e)return $s(e)?void Os(e(r),t,s,r):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,a])=>{Os(a,Is(t,e),s,r)})})},Is=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},$s=e=>e.isThemeGetter,Ds=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Ls=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const a=(a,n)=>{s.set(a,n),t++,t>e&&(t=0,r=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):a(e,t)}}},Us=e=>{const{separator:t,experimentalParseClassName:s}=e,r=1===t.length,a=t[0],n=t.length,i=e=>{const s=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(r||e.slice(u,u+n)===t)){s.push(e.slice(l,u)),l=u+n;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===s.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return s?e=>s({className:e,parseClassName:i}):i},Ms=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},zs=/\s+/;function Bs(){let e,t,s=0,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Fs(e))&&(r&&(r+=" "),r+=t);return r}const Fs=e=>{if("string"==typeof e)return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=Fs(e[r]))&&(s&&(s+=" "),s+=t);return s};function Ws(e,...t){let s,r,a,n=function(o){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Ls(e.cacheSize),parseClassName:Us(e),...Es(e)}))(l),r=s.cache.get,a=s.cache.set,n=i,i(o)};function i(e){const t=r(e);if(t)return t;const n=((e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a}=t,n=[],i=e.trim().split(zs);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let h=Boolean(u),m=r(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=r(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=Ms(t).join(":"),f=c?p+"!":p,g=f+m;if(n.includes(g))continue;n.push(g);const x=a(m,h);for(let s=0;s<x.length;++s){const e=x[s];n.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return a(e,n),n}return function(){return n(Bs.apply(null,arguments))}}const qs=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Gs=/^\[(?:([a-z-]+):)?(.+)\]$/i,Hs=/^\d+\/\d+$/,Ks=new Set(["px","full","screen"]),Vs=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Js=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ys=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xs=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Qs=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zs=e=>tr(e)||Ks.has(e)||Hs.test(e),er=e=>pr(e,"length",fr),tr=e=>Boolean(e)&&!Number.isNaN(Number(e)),sr=e=>pr(e,"number",tr),rr=e=>Boolean(e)&&Number.isInteger(Number(e)),ar=e=>e.endsWith("%")&&tr(e.slice(0,-1)),nr=e=>Gs.test(e),ir=e=>Vs.test(e),or=new Set(["length","size","percentage"]),lr=e=>pr(e,or,gr),cr=e=>pr(e,"position",gr),dr=new Set(["image","url"]),ur=e=>pr(e,dr,vr),hr=e=>pr(e,"",xr),mr=()=>!0,pr=(e,t,s)=>{const r=Gs.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):s(r[2]))},fr=e=>Js.test(e)&&!Ys.test(e),gr=()=>!1,xr=e=>Xs.test(e),vr=e=>Qs.test(e),br=Ws(()=>{const e=qs("colors"),t=qs("spacing"),s=qs("blur"),r=qs("brightness"),a=qs("borderColor"),n=qs("borderRadius"),i=qs("borderSpacing"),o=qs("borderWidth"),l=qs("contrast"),c=qs("grayscale"),d=qs("hueRotate"),u=qs("invert"),h=qs("gap"),m=qs("gradientColorStops"),p=qs("gradientColorStopPositions"),f=qs("inset"),g=qs("margin"),x=qs("opacity"),v=qs("padding"),b=qs("saturate"),y=qs("scale"),w=qs("sepia"),j=qs("skew"),N=qs("space"),k=qs("translate"),_=()=>["auto",nr,t],S=()=>[nr,t],C=()=>["",Zs,er],E=()=>["auto",tr,nr],P=()=>["","0",nr],T=()=>[tr,nr];return{cacheSize:500,separator:":",theme:{colors:[mr],spacing:[Zs,er],blur:["none","",ir,nr],brightness:T(),borderColor:[e],borderRadius:["none","","full",ir,nr],borderSpacing:S(),borderWidth:C(),contrast:T(),grayscale:P(),hueRotate:T(),invert:P(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[ar,er],inset:_(),margin:_(),opacity:T(),padding:S(),saturate:T(),scale:T(),sepia:P(),skew:T(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",nr]}],container:["container"],columns:[{columns:[ir]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",nr]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rr,nr]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nr]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",rr,nr]}],"grid-cols":[{"grid-cols":[mr]}],"col-start-end":[{col:["auto",{span:["full",rr,nr]},nr]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[mr]}],"row-start-end":[{row:["auto",{span:[rr,nr]},nr]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nr]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nr,t]}],"min-w":[{"min-w":[nr,t,"min","max","fit"]}],"max-w":[{"max-w":[nr,t,"none","full","min","max","fit","prose",{screen:[ir]},ir]}],h:[{h:[nr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ir,er]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sr]}],"font-family":[{font:[mr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nr]}],"line-clamp":[{"line-clamp":["none",tr,sr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zs,nr]}],"list-image":[{"list-image":["none",nr]}],"list-style-type":[{list:["none","disc","decimal",nr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zs,er]}],"underline-offset":[{"underline-offset":["auto",Zs,nr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",cr]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lr]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ur]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Zs,nr]}],"outline-w":[{outline:[Zs,er]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Zs,er]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ir,hr]}],"shadow-color":[{shadow:[mr]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ir,nr]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nr]}],duration:[{duration:T()}],ease:[{ease:["linear","in","out","in-out",nr]}],delay:[{delay:T()}],animate:[{animate:["none","spin","ping","pulse","bounce",nr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[rr,nr]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zs,er,sr]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function yr(...e){return br(Qe(e))}const wr=Cs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-white shadow-sm hover:bg-destructive/90 hover:shadow-md focus-visible:ring-destructive dark:bg-destructive/80",outline:"border-2 border-input bg-background text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-accent-foreground/20 dark:bg-background/50 dark:border-input dark:hover:bg-accent/50",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80"},size:{default:"h-10 px-5 py-2.5 has-[>svg]:px-4",sm:"h-9 rounded-md gap-1.5 px-3 text-xs has-[>svg]:px-2.5",lg:"h-12 rounded-lg px-8 text-base has-[>svg]:px-6",icon:"size-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}});function jr({className:s,variant:r,size:a,asChild:n=!1,...i}){const o=n?t:"button";return e.jsx(o,{"data-slot":"button",className:yr(wr({variant:r,size:a,className:s})),...i})}function Nr({className:t,type:s,...r}){return e.jsx("input",{type:s,"data-slot":"input",className:yr("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var kr="horizontal",_r=["horizontal","vertical"],Sr=He.forwardRef((t,r)=>{const{decorative:a,orientation:n=kr,...i}=t,o=function(e){return _r.includes(e)}(n)?n:kr,l=a?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return e.jsx(s.div,{"data-orientation":o,...l,...i,ref:r})});Sr.displayName="Separator";var Cr=Sr;function Er({className:t,orientation:s="horizontal",decorative:r=!0,...a}){return e.jsx(Cr,{"data-slot":"separator-root",decorative:r,orientation:s,className:yr("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...a})}function Pr({...t}){return e.jsx(r,{"data-slot":"sheet",...t})}function Tr({...t}){return e.jsx(c,{"data-slot":"sheet-portal",...t})}function Ar({className:t,...s}){return e.jsx(d,{"data-slot":"sheet-overlay",className:yr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Rr({className:t,children:s,side:r="right",...o}){return e.jsxs(Tr,{children:[e.jsx(Ar,{}),e.jsxs(a,{"data-slot":"sheet-content",className:yr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...o,children:[s,e.jsxs(n,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(i,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Or({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:yr("flex flex-col gap-1.5 p-4",t),...s})}function Ir({className:t,...s}){return e.jsx(o,{"data-slot":"sheet-title",className:yr("text-foreground font-semibold",t),...s})}function $r({className:t,...s}){return e.jsx(l,{"data-slot":"sheet-description",className:yr("text-muted-foreground text-sm",t),...s})}var Dr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Lr=He.forwardRef((t,r)=>e.jsx(s.span,{...t,ref:r,style:{...Dr,...t.style}}));Lr.displayName="VisuallyHidden";var Ur=Lr,[Mr,zr]=u("Tooltip",[h]),Br=h(),Fr="TooltipProvider",Wr=700,qr="tooltip.open",[Gr,Hr]=Mr(Fr),Kr=t=>{const{__scopeTooltip:s,delayDuration:r=Wr,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=t,o=He.useRef(!0),l=He.useRef(!1),c=He.useRef(0);return He.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),e.jsx(Gr,{scope:s,isOpenDelayedRef:o,delayDuration:r,onOpen:He.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:He.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:He.useCallback(e=>{l.current=e},[]),disableHoverableContent:n,children:i})};Kr.displayName=Fr;var Vr="Tooltip",[Jr,Yr]=Mr(Vr),Xr=t=>{const{__scopeTooltip:s,children:r,open:a,defaultOpen:n,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Hr(Vr,t.__scopeTooltip),d=Br(s),[u,h]=He.useState(null),g=m(),x=He.useRef(0),v=o??c.disableHoverableContent,b=l??c.delayDuration,y=He.useRef(!1),[w,j]=p({prop:a,defaultProp:n??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(qr))):c.onClose(),null==i||i(e)},caller:Vr}),N=He.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),k=He.useCallback(()=>{window.clearTimeout(x.current),x.current=0,y.current=!1,j(!0)},[j]),_=He.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j(!1)},[j]),S=He.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{y.current=!0,j(!0),x.current=0},b)},[b,j]);return He.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(f,{...d,children:e.jsx(Jr,{scope:s,contentId:g,open:w,stateAttribute:N,trigger:u,onTriggerChange:h,onTriggerEnter:He.useCallback(()=>{c.isOpenDelayedRef.current?S():k()},[c.isOpenDelayedRef,S,k]),onTriggerLeave:He.useCallback(()=>{v?_():(window.clearTimeout(x.current),x.current=0)},[_,v]),onOpen:k,onClose:_,disableHoverableContent:v,children:r})})};Xr.displayName=Vr;var Qr="TooltipTrigger",Zr=He.forwardRef((t,r)=>{const{__scopeTooltip:a,...n}=t,i=Yr(Qr,a),o=Hr(Qr,a),l=Br(a),c=He.useRef(null),d=g(r,c,i.onTriggerChange),u=He.useRef(!1),h=He.useRef(!1),m=He.useCallback(()=>u.current=!1,[]);return He.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(x,{asChild:!0,...l,children:e.jsx(s.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:d,onPointerMove:v(t.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||o.isPointerInTransitRef.current||(i.onTriggerEnter(),h.current=!0))}),onPointerLeave:v(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:v(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:v(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:v(t.onBlur,i.onClose),onClick:v(t.onClick,i.onClose)})})});Zr.displayName=Qr;var ea="TooltipPortal",[ta,sa]=Mr(ea,{forceMount:void 0}),ra=t=>{const{__scopeTooltip:s,forceMount:r,children:a,container:n}=t,i=Yr(ea,s);return e.jsx(ta,{scope:s,forceMount:r,children:e.jsx(b,{present:r||i.open,children:e.jsx(y,{asChild:!0,container:n,children:a})})})};ra.displayName=ea;var aa="TooltipContent",na=He.forwardRef((t,s)=>{const r=sa(aa,t.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...i}=t,o=Yr(aa,t.__scopeTooltip);return e.jsx(b,{present:a||o.open,children:o.disableHoverableContent?e.jsx(da,{side:n,...i,ref:s}):e.jsx(ia,{side:n,...i,ref:s})})}),ia=He.forwardRef((t,s)=>{const r=Yr(aa,t.__scopeTooltip),a=Hr(aa,t.__scopeTooltip),n=He.useRef(null),i=g(s,n),[o,l]=He.useState(null),{trigger:c,onClose:d}=r,u=n.current,{onPointerInTransitChange:h}=a,m=He.useCallback(()=>{l(null),h(!1)},[h]),p=He.useCallback((e,t)=>{const s=e.currentTarget,r={x:e.clientX,y:e.clientY},a=function(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s})}return r}(r,function(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),n=Math.abs(t.left-e.x);switch(Math.min(s,r,a,n)){case n:return"left";case a:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,s.getBoundingClientRect())),n=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(s.y-r.y)>=(e.y-r.y)*(s.x-r.x)))break;t.pop()}t.push(s)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;s.length>=2;){const e=s[s.length-1],r=s[s.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;s.pop()}s.push(t)}return s.pop(),1===t.length&&1===s.length&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}(t)}([...a,...function(e){const{top:t,right:s,bottom:r,left:a}=e;return[{x:a,y:t},{x:s,y:t},{x:s,y:r},{x:a,y:r}]}(t.getBoundingClientRect())]);l(n),h(!0)},[h]);return He.useEffect(()=>()=>m(),[m]),He.useEffect(()=>{if(c&&u){const e=e=>p(e,u),t=e=>p(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,p,m]),He.useEffect(()=>{if(o){const e=e=>{const t=e.target,s={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),a=!function(e,t){const{x:s,y:r}=e;let a=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){const e=t[n],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>r!=u>r&&s<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}(s,o);r?m():a&&(m(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,o,d,m]),e.jsx(da,{...t,ref:i})}),[oa,la]=Mr(Vr,{isInside:!1}),ca=k("TooltipContent"),da=He.forwardRef((t,s)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Yr(aa,r),d=Br(r),{onClose:u}=c;return He.useEffect(()=>(document.addEventListener(qr,u),()=>document.removeEventListener(qr,u)),[u]),He.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),e.jsx(j,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:e.jsxs(N,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(ca,{children:a}),e.jsx(oa,{scope:r,isInside:!0,children:e.jsx(Ur,{id:c.contentId,role:"tooltip",children:n||a})})]})})});na.displayName=aa;var ua="TooltipArrow",ha=He.forwardRef((t,s)=>{const{__scopeTooltip:r,...a}=t,n=Br(r);return la(ua,r).isInside?null:e.jsx(w,{...n,...a,ref:s})});ha.displayName=ua;var ma=Kr,pa=Xr,fa=Zr,ga=ra,xa=na,va=ha;function ba({delayDuration:t=0,...s}){return e.jsx(ma,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function ya({...t}){return e.jsx(ba,{children:e.jsx(pa,{"data-slot":"tooltip",...t})})}function wa({...t}){return e.jsx(fa,{"data-slot":"tooltip-trigger",...t})}function ja({className:t,sideOffset:s=0,children:r,...a}){return e.jsx(ga,{children:e.jsxs(xa,{"data-slot":"tooltip-content",sideOffset:s,className:yr("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...a,children:[r,e.jsx(va,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Na=He.createContext(null);function ka(){const e=He.useContext(Na);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function _a({defaultOpen:t=!0,open:s,onOpenChange:r,className:a,style:n,children:i,...o}){const l=function(){const[e,t]=He.useState(void 0);return He.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),s=()=>{t(window.innerWidth<768)};return e.addEventListener("change",s),t(window.innerWidth<768),()=>e.removeEventListener("change",s)},[]),!!e}(),[c,d]=He.useState(!1),[u,h]=He.useState(t),m=s??u,p=He.useCallback(e=>{const t="function"==typeof e?e(m):e;r?r(t):h(t),document.cookie=`sidebar_state=${t}; path=/; max-age=604800`},[r,m]),f=He.useCallback(()=>l?d(e=>!e):p(e=>!e),[l,p,d]);He.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),f())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f]);const g=m?"expanded":"collapsed",x=He.useMemo(()=>({state:g,open:m,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:f}),[g,m,p,l,c,d,f]);return e.jsx(Na.Provider,{value:x,children:e.jsx(ba,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...n},className:yr("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",a),...o,children:i})})})}function Sa({side:t="left",variant:s="sidebar",collapsible:r="offcanvas",className:a,children:n,...i}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=ka();return"none"===r?e.jsx("div",{"data-slot":"sidebar",className:yr("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",a),...i,children:n}):o?e.jsx(Pr,{open:c,onOpenChange:d,...i,children:e.jsxs(Rr,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:t,children:[e.jsxs(Or,{className:"sr-only",children:[e.jsx(Ir,{children:"Sidebar"}),e.jsx($r,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:n})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":"collapsed"===l?r:"","data-variant":s,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:yr("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===s||"inset"===s?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{"data-slot":"sidebar-container",className:yr("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===s||"inset"===s?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",a),...i,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:n})})]})}function Ca({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:yr("flex flex-col gap-2 p-2",t),...s})}function Ea({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:yr("flex flex-col gap-2 p-2",t),...s})}function Pa({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:yr("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s})}function Ta({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:yr("relative flex w-full min-w-0 flex-col p-2",t),...s})}function Aa({className:s,asChild:r=!1,...a}){const n=r?t:"div";return e.jsx(n,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:yr("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...a})}function Ra({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:yr("w-full text-sm",t),...s})}function Oa({className:t,...s}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:yr("flex w-full min-w-0 flex-col gap-1",t),...s})}function Ia({className:t,...s}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:yr("group/menu-item relative",t),...s})}const $a=Cs("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Da({asChild:s=!1,isActive:r=!1,variant:a="default",size:n="default",tooltip:i,className:o,...l}){const c=s?t:"button",{isMobile:d,state:u}=ka(),h=e.jsx(c,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":r,className:yr($a({variant:a,size:n}),o),...l});return i?("string"==typeof i&&(i={children:i}),e.jsxs(ya,{children:[e.jsx(wa,{asChild:!0,children:h}),e.jsx(ja,{side:"right",align:"center",hidden:"collapsed"!==u||d,...i})]})):h}const La={},Ua=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in La)return;La[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};class Ma extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class za extends Ma{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ba extends Ma{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fa extends Ma{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Wa,qa;(qa=Wa||(Wa={})).Any="any",qa.ApNortheast1="ap-northeast-1",qa.ApNortheast2="ap-northeast-2",qa.ApSouth1="ap-south-1",qa.ApSoutheast1="ap-southeast-1",qa.ApSoutheast2="ap-southeast-2",qa.CaCentral1="ca-central-1",qa.EuCentral1="eu-central-1",qa.EuWest1="eu-west-1",qa.EuWest2="eu-west-2",qa.EuWest3="eu-west-3",qa.SaEast1="sa-east-1",qa.UsEast1="us-east-1",qa.UsWest1="us-west-1",qa.UsWest2="us-west-2";var Ga=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Ha{constructor(e,{headers:t={},customFetch:s,region:r=Wa.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ua(async()=>{const{default:e}=await Promise.resolve().then(()=>nn);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Ga(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:n}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=n):"string"==typeof n?(i["Content-Type"]="text/plain",c=n):"undefined"!=typeof FormData&&n instanceof FormData?c=n:(i["Content-Type"]="application/json",c=JSON.stringify(n)));const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new za(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Ba(d);if(!d.ok)throw new Fa(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Fa||r instanceof Ba?r.context:void 0}}})}}var Ka={},Va={},Ja={},Ya={},Xa={},Qa={},Za=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const en=Za.fetch,tn=Za.fetch.bind(Za),sn=Za.Headers,rn=Za.Request,an=Za.Response,nn=Object.freeze(Object.defineProperty({__proto__:null,Headers:sn,Request:rn,Response:an,default:tn,fetch:en},Symbol.toStringTag,{value:"Module"})),on=Ve(nn);var ln={};Object.defineProperty(ln,"__esModule",{value:!0});let cn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ln.default=cn;var dn=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qa,"__esModule",{value:!0});const un=dn(on),hn=dn(ln);Qa.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=un.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r;let a=null,n=null,i=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(n="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&c&&c.length>1&&(i=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(a={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,i=null,o=406,l="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(n=[],a=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(r=null==a?void 0:a.details)||void 0===r?void 0:r.includes("0 rows"))&&(a=null,o=200,l="OK"),a&&this.shouldThrowOnError)throw new hn.default(a)}return{error:a,data:n,count:i,status:o,statusText:l}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var mn=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});const pn=mn(Qa);let fn=class extends pn.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const a=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:a=!1,format:n="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xa.default=fn;var gn=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ya,"__esModule",{value:!0});const xn=gn(Xa);let vn=class extends xn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Ya.default=vn;var bn=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ja,"__esModule",{value:!0});const yn=bn(Ya);Ja.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let a=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",n),s&&(this.headers.Prefer=`count=${s}`),new yn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new yn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:a=!0}={}){const n=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),a||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new yn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new yn.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new yn.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var wn={},jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.version=void 0,jn.version="0.0.0-automated",Object.defineProperty(wn,"__esModule",{value:!0}),wn.DEFAULT_HEADERS=void 0;const Nn=jn;wn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Nn.version}`};var kn=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Va,"__esModule",{value:!0});const _n=kn(Ja),Sn=kn(Ya),Cn=wn;Va.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Cn.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new _n.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:a}={}){let n;const i=new URL(`${this.url}/rpc/${e}`);let o;s||r?(n=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{i.searchParams.append(e,t)})):(n="POST",o=t);const l=Object.assign({},this.headers);return a&&(l.Prefer=`count=${a}`),new Sn.default({method:n,url:i,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var En=Je&&Je.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.PostgrestError=Ka.PostgrestBuilder=Ka.PostgrestTransformBuilder=Ka.PostgrestFilterBuilder=Ka.PostgrestQueryBuilder=Ka.PostgrestClient=void 0;const Pn=En(Va);Ka.PostgrestClient=Pn.default;const Tn=En(Ja);Ka.PostgrestQueryBuilder=Tn.default;const An=En(Ya);Ka.PostgrestFilterBuilder=An.default;const Rn=En(Xa);Ka.PostgrestTransformBuilder=Rn.default;const On=En(Qa);Ka.PostgrestBuilder=On.default;const In=En(ln);Ka.PostgrestError=In.default;var $n=Ka.default={PostgrestClient:Pn.default,PostgrestQueryBuilder:Tn.default,PostgrestFilterBuilder:An.default,PostgrestTransformBuilder:Rn.default,PostgrestBuilder:On.default,PostgrestError:In.default};const{PostgrestClient:Dn,PostgrestQueryBuilder:Ln,PostgrestFilterBuilder:Un,PostgrestTransformBuilder:Mn,PostgrestBuilder:zn,PostgrestError:Bn}=$n;class Fn{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Wn=1e4;var qn,Gn,Hn,Kn,Vn,Jn,Yn,Xn,Qn,Zn,ei;(Gn=qn||(qn={}))[Gn.connecting=0]="connecting",Gn[Gn.open=1]="open",Gn[Gn.closing=2]="closing",Gn[Gn.closed=3]="closed",(Kn=Hn||(Hn={})).closed="closed",Kn.errored="errored",Kn.joined="joined",Kn.joining="joining",Kn.leaving="leaving",(Jn=Vn||(Vn={})).close="phx_close",Jn.error="phx_error",Jn.join="phx_join",Jn.reply="phx_reply",Jn.leave="phx_leave",Jn.access_token="access_token",(Yn||(Yn={})).websocket="websocket",(Qn=Xn||(Xn={})).Connecting="connecting",Qn.Open="open",Qn.Closing="closing",Qn.Closed="closed";class ti{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2);let n=this.HEADER_LENGTH+2;const i=s.decode(e.slice(n,n+r));n+=r;const o=s.decode(e.slice(n,n+a));n+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class si{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(ei=Zn||(Zn={})).abstime="abstime",ei.bool="bool",ei.date="date",ei.daterange="daterange",ei.float4="float4",ei.float8="float8",ei.int2="int2",ei.int4="int4",ei.int4range="int4range",ei.int8="int8",ei.int8range="int8range",ei.json="json",ei.jsonb="jsonb",ei.money="money",ei.numeric="numeric",ei.oid="oid",ei.reltime="reltime",ei.text="text",ei.time="time",ei.timestamp="timestamp",ei.timestamptz="timestamptz",ei.timetz="timetz",ei.tsrange="tsrange",ei.tstzrange="tstzrange";const ri=(e,t,s={})=>{var r;const a=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=ai(r,e,t,a),s),{})},ai=(e,t,s,r)=>{const a=t.find(t=>t.name===e),n=null==a?void 0:a.type,i=s[e];return n&&!r.includes(n)?ni(n,i):ii(i)},ni=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return di(t,s)}switch(e){case Zn.bool:return oi(t);case Zn.float4:case Zn.float8:case Zn.int2:case Zn.int4:case Zn.int8:case Zn.numeric:case Zn.oid:return li(t);case Zn.json:case Zn.jsonb:return ci(t);case Zn.timestamp:return ui(t);case Zn.abstime:case Zn.date:case Zn.daterange:case Zn.int4range:case Zn.int8range:case Zn.money:case Zn.reltime:case Zn.text:case Zn.time:case Zn.timestamptz:case Zn.timetz:case Zn.tsrange:case Zn.tstzrange:default:return ii(t)}},ii=e=>e,oi=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},li=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ci=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},di=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(a){r=n?n.split(","):[]}return r.map(e=>ni(t,e))}return e},ui=e=>"string"==typeof e?e.replace(" ","T"):e,hi=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class mi{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pi,fi,gi,xi,vi,bi,yi,wi;(fi=pi||(pi={})).SYNC="sync",fi.JOIN="join",fi.LEAVE="leave";class ji{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ji.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=ji.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ji.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),n=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{const s=a[e];if(s){const r=t.map(e=>e.presence_ref),a=s.map(e=>e.presence_ref),n=t.filter(e=>a.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(i[e]=n),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const n=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let a=e[t];if(!a)return;const n=s.map(e=>e.presence_ref);a=a.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,s),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(xi=gi||(gi={})).ALL="*",xi.INSERT="INSERT",xi.UPDATE="UPDATE",xi.DELETE="DELETE",(bi=vi||(vi={})).BROADCAST="broadcast",bi.PRESENCE="presence",bi.POSTGRES_CHANGES="postgres_changes",bi.SYSTEM="system",(wi=yi||(yi={})).SUBSCRIBED="SUBSCRIBED",wi.TIMED_OUT="TIMED_OUT",wi.CLOSED="CLOSED",wi.CHANNEL_ERROR="CHANNEL_ERROR";class Ni{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new mi(this,Vn.join,this.params,this.timeout),this.rejoinTimer=new si(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hn.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vn.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ji(this),this.broadcastEndpointURL=hi(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Hn.closed){const{config:{broadcast:a,presence:n,private:i}}=this.params,o=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[vi.PRESENCE]&&this.bindings[vi.PRESENCE].length>0,c={},d={broadcast:a,presence:Object.assign(Object.assign({},n),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(yi.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(yi.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<a;s++){const a=r[s],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=Hn.errored,void(null==e||e(yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(yi.SUBSCRIBED))}null==e||e(yi.SUBSCRIBED)}).receive("error",t=>{this.state=Hn.errored,null==e||e(yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Hn.joined&&e===vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,a,n;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===n?void 0:n.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:n,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Hn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new mi(this,Vn.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Hn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new mi(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const n=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=Vn;if(s&&[i,o,l,c].indexOf(n)>=0&&s!==this._joinRef())return;let d=this._onMessage(n,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(d,s)):null===(a=this.bindings[n])||void 0===a||a.filter(e=>{var s,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:a,errors:n}=e,i={schema:t,table:s,commit_timestamp:r,eventType:a,new:{},old:{},errors:n};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===Hn.closed}_isJoined(){return this.state===Hn.joined}_isJoining(){return this.state===Hn.joining}_isLeaving(){return this.state===Hn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&Ni.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vn.close,{},e)}_onError(e){this._on(Vn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ri(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ri(e.columns,e.old_record)),t}}const ki=()=>{},_i=25e3,Si=10,Ci=100,Ei=[1e3,2e3,5e3,1e4];class Pi{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wn,this.transport=null,this.heartbeatIntervalMs=_i,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ki,this.ref=0,this.reconnectTimer=null,this.logger=ki,this.conn=null,this.sendBuffer=[],this.serializer=new ti,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ua(async()=>{const{default:e}=await Promise.resolve().then(()=>nn);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Yn.websocket}`,this.httpEndpoint=hi(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Fn.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case qn.connecting:return Xn.Connecting;case qn.open:return Xn.Open;case qn.closing:return Xn.Closing;default:return Xn.Closed}}isConnected(){return this.connectionState()===Xn.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new Ni(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Ci);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:a}=e,n=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(Vn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(Kp){this.log("error",`error in ${e} callback`,Kp)}})}catch(Kp){this.log("error",`error triggering ${e} callbacks`,Kp)}}_setupReconnectionTimer(){this.reconnectTimer=new si(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Si)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,a,n,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:Wn,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:_i,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>Ei[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Ti extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ai(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ri extends Ti{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Oi extends Ti{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ii=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const $i=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ua(async()=>{const{default:e}=await Promise.resolve().then(()=>nn);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Di=e=>{if(Array.isArray(e))return e.map(e=>Di(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Di(s)}),t};var Li=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ui=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Mi=(e,t,s)=>Li(void 0,void 0,void 0,function*(){const r=yield Ii(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Ua(()=>Promise.resolve().then(()=>nn),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,a=(null==s?void 0:s.statusCode)||r+"";t(new Ri(Ui(s),r,a))}).catch(e=>{t(new Oi(Ui(e),e))}):t(new Oi(Ui(e),e))}),zi=(e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),s)):a};function Bi(e,t,s,r,a,n){return Li(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,zi(t,r,a,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Mi(e,o,r))})})}function Fi(e,t,s,r){return Li(this,void 0,void 0,function*(){return Bi(e,"GET",t,s,r)})}function Wi(e,t,s,r,a){return Li(this,void 0,void 0,function*(){return Bi(e,"POST",t,r,a,s)})}function qi(e,t,s,r,a){return Li(this,void 0,void 0,function*(){return Bi(e,"PUT",t,r,a,s)})}function Gi(e,t,s,r,a){return Li(this,void 0,void 0,function*(){return Bi(e,"DELETE",t,r,a,s)})}var Hi=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ki={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ji{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=$i(r)}uploadOrUpdate(e,t,s,r){return Hi(this,void 0,void 0,function*(){try{let a;const n=Object.assign(Object.assign({},Vi),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const o=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(a=new FormData,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(a=s,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=s,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?qi:Wi)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(Ai(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Hi(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),n=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${n}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Vi.upsert},r),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield qi(this.fetch,i.toString(),e,{headers:n})).Key},error:null}}catch(o){if(Ai(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Hi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield Wi(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),n=new URL(this.url+a.url),i=n.searchParams.get("token");if(!i)throw new Ti("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Ai(s))return{data:null,error:s};throw s}})}update(e,t,s){return Hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Hi(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ai(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Hi(this,void 0,void 0,function*(){try{return{data:{path:(yield Wi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ai(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Hi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield Wi(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},{data:a,error:null}}catch(r){if(Ai(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Hi(this,void 0,void 0,function*(){try{const r=yield Wi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(Ai(r))return{data:null,error:r};throw r}})}download(e,t){return Hi(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Fi(this.fetch,`${this.url}/${s}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(n){if(Ai(n))return{data:null,error:n};throw n}})}info(e){return Hi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Fi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Di(e),error:null}}catch(s){if(Ai(s))return{data:null,error:s};throw s}})}exists(e){return Hi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return Li(this,void 0,void 0,function*(){return Bi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Ai(s)&&s instanceof Oi){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${o}`)}}}remove(e){return Hi(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ai(t))return{data:null,error:t};throw t}})}list(e,t,s){return Hi(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ki),t),{prefix:e||""});return{data:yield Wi(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Ai(r))return{data:null,error:r};throw r}})}listV2(e,t){return Hi(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Wi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(Ai(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Yi={"X-Client-Info":"storage-js/2.11.0"};var Xi=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Qi{constructor(e,t={},s,r){const a=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},Yi),t),this.fetch=$i(s)}listBuckets(){return Xi(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ai(e))return{data:null,error:e};throw e}})}getBucket(e){return Xi(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ai(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Xi(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ai(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Xi(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ai(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Xi(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ai(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xi(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ai(t))return{data:null,error:t};throw t}})}}class Zi extends Qi{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Ji(this.url,this.headers,e,this.fetch)}}let eo="";eo="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const to={headers:{"X-Client-Info":`supabase-js-${eo}/2.55.0`}},so={schema:"public"},ro={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ao={};var no=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const io=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?tn:fetch),(...e)=>t(...e)})(s),a="undefined"==typeof Headers?sn:Headers;return(s,n)=>no(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(s,Object.assign(Object.assign({},n),{headers:l}))})};var oo=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const lo="2.71.1",co=3e4,uo=9e4,ho={"X-Client-Info":`gotrue-js/${lo}`},mo="X-Supabase-Api-Version",po={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},fo=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class go extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function xo(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class vo extends go{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class bo extends go{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class yo extends go{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class wo extends yo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class jo extends yo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class No extends yo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ko extends yo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _o extends yo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class So extends yo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Co(e){return xo(e)&&"AuthRetryableFetchError"===e.name}class Eo extends yo{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Po extends yo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ao=" \t\n\r=".split(""),Ro=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ao.length;t+=1)e[Ao[t].charCodeAt(0)]=-2;for(let t=0;t<To.length;t+=1)e[To[t].charCodeAt(0)]=t;return e})();function Oo(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(To[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(To[e]),t.queuedBits-=6}}function Io(e,t,s){const r=Ro[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function $o(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)Io(e.charCodeAt(i),a,n);return t.join("")}function Do(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Lo(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Io(e.charCodeAt(a),s,r);return new Uint8Array(t)}function Uo(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Do(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Mo(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Oo(e,s,r)),Oo(null,s,r),t.join("")}const zo=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Bo={tested:!1,writable:!1},Fo=()=>{if(!zo())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Kp){return!1}if(Bo.tested)return Bo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bo.tested=!0,Bo.writable=!0}catch(Kp){Bo.tested=!0,Bo.writable=!1}return Bo.writable};const Wo=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Ua(async()=>{const{default:e}=await Promise.resolve().then(()=>nn);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},qo=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Go=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},Ho=async(e,t)=>{await e.removeItem(t)};class Ko{constructor(){this.promise=new Ko.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Vo(e){const t=e.split(".");if(3!==t.length)throw new Po("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!fo.test(t[s]))throw new Po("JWT not in base64url format");return{header:JSON.parse($o(t[0])),payload:JSON.parse($o(t[1])),signature:Lo(t[2]),raw:{header:t[0],payload:t[1]}}}function Jo(e){return("0"+e.toString(16)).substr(-2)}async function Yo(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xo(e,t,s=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Jo).join("")}();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await qo(e,`${t}-code-verifier`,a);const n=await Yo(r);return[n,r===n?"plain":"s256"]}Ko.promiseConstructor=Promise;const Qo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Zo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function el(e){if(!Zo.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tl(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sl(e){return JSON.parse(JSON.stringify(e))}const rl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),al=[502,503,504];async function nl(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new So(rl(e),0);if(al.includes(e.status))throw new So(rl(e),e.status);let r,a;try{r=await e.json()}catch(Kp){throw new bo(rl(Kp),Kp)}const n=function(e){const t=e.headers.get(mo);if(!t)return null;if(!t.match(Qo))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Kp){return null}}(e);if(n&&n.getTime()>=po.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new Eo(rl(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new wo}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Eo(rl(r),e.status,r.weak_password.reasons);throw new vo(rl(r),e.status||500,a)}async function il(e,t,s,r){var a;const n=Object.assign({},null==r?void 0:r.headers);n[mo]||(n[mo]=po.name),(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,r,a,n){const i=((e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))})(t,r,a,n);let o;try{o=await e(s,Object.assign({},i))}catch(Kp){throw console.error(Kp),new So(rl(Kp),0)}o.ok||await nl(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(Kp){await nl(Kp)}}(e,t,s+o,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function ol(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ll(e){const t=ol(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function cl(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function dl(e){return{data:e,error:null}}function ul(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n}=e,i=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n},user:Object.assign({},i)},error:null}}function hl(e){return e}const ml=["global","local","others"];class pl{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Wo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ml[0]){if(ml.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ml.join(", ")}`);try{return await il(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(xo(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await il(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:cl})}catch(s){if(xo(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await il(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ul,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(xo(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await il(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:cl})}catch(t){if(xo(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,a,n,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await il(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:hl});if(c.error)throw c.error;const d=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(xo(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){el(e);try{return await il(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:cl})}catch(t){if(xo(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){el(e);try{return await il(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:cl})}catch(s){if(xo(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){el(e);try{return await il(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:cl})}catch(s){if(xo(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){el(e.userId);try{const{data:t,error:s}=await il(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(xo(t))return{data:null,error:t};throw t}}async _deleteFactor(e){el(e.userId),el(e.id);try{return{data:await il(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xo(t))return{data:null,error:t};throw t}}}function fl(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const gl=!!(globalThis&&Fo()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class xl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vl extends xl{}async function bl(e,t,s){gl&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),gl&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw gl&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gl)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Kp){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Kp)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}gl&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{gl&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Kp){"undefined"!=typeof self&&(self.globalThis=self)}}();const yl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ho,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wl(e,t,s){return await s()}const jl={};class Nl{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Nl.nextInstanceID,Nl.nextInstanceID+=1,this.instanceID>0&&zo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},yl),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new pl({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Wo(r.fetch),this.lock=r.lock||wl,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:zo()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=bl:this.lock=wl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Fo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fl(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=fl(this.memoryStorage)),zo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Kp){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Kp)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=jl[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){jl[this.storageKey]=Object.assign(Object.assign({},jl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=jl[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){jl[this.storageKey]=Object.assign(Object.assign({},jl[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lo}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(Kp){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),zo()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return xo(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xo(t)?{error:t}:{error:new bo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const a=await il(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ol}),{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(xo(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,r;try{let a;if("email"in e){const{email:s,password:r,options:n}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Xo(this.storage,this.storageKey)),a=await il(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:o},xform:ol})}else{if(!("phone"in e))throw new No("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:i}=e;a=await il(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ol})}}const{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(xo(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:a}=e;t=await il(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:ll})}else{if(!("phone"in e))throw new No("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:a}=e;t=await il(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:ll})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new jo}}catch(t){if(xo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,a,n,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(zo())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await il(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Mo(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ol});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new jo}}catch(f){if(xo(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await Go(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await il(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ol});if(await Ho(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new jo}}catch(a){if(xo(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:a,nonce:n}=e,i=await il(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ol}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new jo}}catch(t){if(xo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,a,n;try{if("email"in e){const{email:r,options:a}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=await Xo(this.storage,this.storageKey));const{error:o}=await il(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(s=null==a?void 0:a.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await il(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(a=null==s?void 0:s.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new No("You must provide either an email or phone number.")}catch(i){if(xo(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:n,error:i}=await il(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:ol});if(i)throw i;if(!n)throw new Error("An error occurred on token verification.");const o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(xo(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let a=null,n=null;return"pkce"===this.flowType&&([a,n]=await Xo(this.storage,this.storageKey)),await il(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:n}),headers:this.headers,xform:dl})}catch(a){if(xo(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new wo;const{error:r}=await il(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(xo(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:n}=await il(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:a}=e,{data:n,error:i}=await il(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:i}}throw new No("You must provide either an email or phone number and a type")}catch(t){if(xo(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(Kp){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Kp){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Go(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<uo;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await Go(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=tl()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await il(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:cl}):await this._useSession(async e=>{var t,s,r;const{data:a,error:n}=e;if(n)throw n;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await il(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:cl}):{data:{user:null},error:new wo}})}catch(t){if(xo(t))return function(e){return xo(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Ho(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new wo;const n=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Xo(this.storage,this.storageKey));const{data:l,error:c}=await il(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:n.access_token,xform:cl});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(s){if(xo(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wo;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:n}=Vo(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:n}=await this._getUser(e.access_token);if(n)throw n;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(xo(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new wo;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(xo(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!zo())throw new ko("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ko(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new _o("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new ko("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _o("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:n,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&n&&l))throw new ko("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=co&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(a);if(f)throw f;const g={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:u,refresh_token:n,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(s){if(xo(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Go(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{error:a};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return xo(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ho(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=await Xo(this.storage,this.storageKey,!0));try{return await il(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(xo(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(xo(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,a,n,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await il(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return zo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(xo(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:n}=t;if(n)throw n;return await il(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(t){if(xo(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await il(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ol})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&Co(t)&&Date.now()+s-a<co},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await s(a);if(!r(a,null,t))return void e(t)}catch(Kp){if(!r(a,Kp))return void t(Kp)}})()}))}catch(a){if(this._debug(t,"error",a),xo(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),zo()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Go(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Go(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await qo(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:tl()}else if(a&&!a.user&&!a.user){const e=await Go(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await Ho(this.storage,this.storageKey+"-user"),await qo(this.storage,this.storageKey,a)):a.user=tl()}if(this._debug(s,"session from storage",a),!this._isValidSession(a))return this._debug(s,"session is not valid"),void(null!==a&&await this._removeSession());const n=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<uo;if(this._debug(s,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Co(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(s,"error",a),void console.error(a)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new wo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ko;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new wo;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),xo(a)){const e={session:null,error:a};return Co(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(Kp){r.push(Kp)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await qo(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=sl(e);await qo(this.storage,this.storageKey,r)}else{const e=sl(t);await qo(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Ho(this.storage,this.storageKey),await Ho(this.storage,this.storageKey+"-code-verifier"),await Ho(this.storage,this.storageKey+"-user"),this.userStorage&&await Ho(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Kp){console.error("removing visibilitychange callback failed",Kp)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),co);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-e)/co);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(Kp){console.error("Auto refresh tick failed with error. This is likely a transient error.",Kp)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Kp){if(!(Kp.isAcquireTimeout||Kp instanceof xl))throw Kp;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await Xo(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await il(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(xo(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:n}=t;if(n)return{data:null,error:n};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await il(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(xo(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:n,error:i}=await il(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:i})})}catch(t){if(xo(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await il(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(xo(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=Vo(r.access_token);let i=null;n.aal&&(i=n.aal);let o=i;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:a,error:n}=await il(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:a,signature:n,raw:{header:i,payload:o}}=Vo(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:r,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,n,Uo(`${i}.${o}`))))throw new Po("Invalid JWT signature");return{data:{claims:a,header:r,signature:n},error:null}}catch(s){if(xo(s))return{data:null,error:s};throw s}}}Nl.nextInstanceID=0;const kl=Nl;class _l extends kl{constructor(e){super(e)}}var Sl=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kp){n(Kp)}}function o(e){try{l(r.throw(e))}catch(Kp){n(Kp)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Cl{constructor(e,t,s){var r,a,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:a,auth:n,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>oo(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:so,realtime:ao,auth:Object.assign(Object.assign({},ro),{storageKey:c}),global:to});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=io(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Dn(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Zi(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ha(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Sl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:a,flowType:n,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _l({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Pi(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const El=new Cl("https://bpomacnqaqzgeuahhlka.supabase.co","",Pl);var Pl;const Tl=(()=>{if("undefined"==typeof window)return"https://api.host.krib.ae/api";return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:8000/api":"https://api.host.krib.ae/api"})(),Al=He.createContext(null);class Rl extends Error{constructor(e,t){super(t),this.status=e,this.name="APIError"}}async function Ol(e,t={}){const{data:{session:s}}=await El.auth.getSession(),r=null==s?void 0:s.access_token,a={...t,headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers}},n=`${Tl}${e}`,i=await fetch(n,a);if(!i.ok){const e=await i.json().catch(()=>({message:"Unknown error"}));throw new Rl(i.status,e.message||`HTTP ${i.status}`)}return i.json()}function Il({children:t}){const[s,r]=He.useState(null),[a,n]=He.useState(!0),[i,o]=He.useState([]),[l,c]=He.useState([]),[d,u]=He.useState(null);async function h(){var e;try{const{data:{session:s}}=await El.auth.getSession();if(null==s?void 0:s.user){r({id:s.user.id,email:s.user.email||"",name:(null==(e=s.user.user_metadata)?void 0:e.full_name)||s.user.email||"User",created_at:s.user.created_at}),console.log("User authenticated with Supabase:",s.user);try{await Promise.all([m(),p()]),console.log("User data loaded successfully")}catch(t){console.error("Error loading user data:",t)}}else console.log("No Supabase session found")}catch(s){console.error("Get current user error:",s),localStorage.removeItem("auth_token")}}async function m(){try{const e=await Ol("/properties");o(e)}catch(e){console.error("Load properties error:",e)}}async function p(){try{const e=await Ol("/bookings");c(e)}catch(e){console.error("Load bookings error:",e)}}He.useEffect(()=>{!async function(){try{const{data:{session:e}}=await El.auth.getSession();(null==e?void 0:e.access_token)&&(localStorage.setItem("auth_token",e.access_token),await h())}catch(e){console.error("Auth initialization error:",e)}finally{n(!1)}El.auth.onAuthStateChange(async(e,t)=>{"SIGNED_IN"===e&&(null==t?void 0:t.access_token)?(localStorage.setItem("auth_token",t.access_token),await h()):"SIGNED_OUT"===e&&(localStorage.removeItem("auth_token"),r(null),o([]),c([]),u(null))})}()},[]);const f={user:s,isLoading:a,properties:i,bookings:l,analytics:d,signIn:async function(e,t){var s;try{n(!0);const{data:r,error:a}=await El.auth.signInWithPassword({email:e,password:t});if(a)throw a;(null==(s=r.session)?void 0:s.access_token)&&(localStorage.setItem("auth_token",r.session.access_token),await h())}catch(r){throw new Error(r.message||"Failed to sign in")}finally{n(!1)}},signUp:async function(e,t,s){var r;try{n(!0);const{data:a,error:i}=await El.auth.signUp({email:e,password:t,options:{data:{name:s}}});if(i)throw i;(null==(r=a.session)?void 0:r.access_token)&&(localStorage.setItem("auth_token",a.session.access_token),await Ol("/auth/signup",{method:"POST",body:JSON.stringify({name:s,email:e})}),await h())}catch(a){throw new Error(a.message||"Failed to sign up")}finally{n(!1)}},signInWithGoogle:async function(){try{console.log("Starting Google OAuth..."),n(!0);const{data:e,error:t}=await El.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(console.log("Google OAuth response:",{data:e,error:t}),t)throw console.error("Google OAuth error:",t),t;console.log("Google OAuth initiated successfully")}catch(e){throw console.error("Google sign-in error:",e),n(!1),new Error(e.message||"Failed to sign in with Google")}},signOut:async function(){try{await El.auth.signOut(),localStorage.removeItem("auth_token"),r(null),o([]),c([]),u(null),window.location.href="/auth"}catch(e){throw console.error("Sign out error:",e),e}},apiCall:async function(e,t="GET",s){return Ol(e,{method:t,...s&&{body:JSON.stringify(s)}})},createProperty:async function(e){const t=await Ol("/properties",{method:"POST",body:JSON.stringify(e)});return o(e=>[t,...e]),t},updateProperty:async function(e,t){const s=await Ol(`/properties/${e}`,{method:"PUT",body:JSON.stringify(t)});return o(t=>t.map(t=>t.id===e?s:t)),s},deleteProperty:async function(e){await Ol(`/properties/${e}`,{method:"DELETE"}),o(t=>t.filter(t=>t.id!==e))},loadProperties:m,generateAIDescription:async function(e){const t={property_data:e,use_anthropic:!1};console.log("Sending AI description request:",t);const s=await Ol("/properties/ai/generate-description",{method:"POST",body:JSON.stringify(t)});return console.log("AI description response:",s),s.description},loadBookings:p,updateBooking:async function(e,t){const s=await Ol(`/bookings/${e}`,{method:"PUT",body:JSON.stringify(t)});return c(t=>t.map(t=>t.id===e?s:t)),s},getAnalytics:async function(){try{const e=await Ol("/analytics");return u(e),e}catch(e){throw console.error("Get analytics error:",e),e}},getFinancialSummary:async function(e="30days"){try{return await Ol(`/financials/summary?period=${e}`)}catch(t){throw console.error("Get financial summary error:",t),t}},getBankAccounts:async function(){try{return await Ol("/financials/bank-accounts")}catch(e){throw console.error("Get bank accounts error:",e),e}},addBankAccount:async function(e){try{return await Ol("/financials/bank-accounts",{method:"POST",body:JSON.stringify(e)})}catch(t){throw console.error("Add bank account error:",t),t}},requestPayout:async function(e){try{return await Ol("/financials/payouts/request",{method:"POST",body:JSON.stringify({amount:e})})}catch(t){throw console.error("Request payout error:",t),t}},getTransactions:async function(e=50){try{return await Ol(`/financials/transactions?limit=${e}`)}catch(t){throw console.error("Get transactions error:",t),t}},updatePayoutSettings:async function(e){try{return await Ol("/financials/payout-settings",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update payout settings error:",t),t}},getUserProfile:async function(){try{return await Ol("/users/profile")}catch(e){throw console.error("Get user profile error:",e),e}},updateUserProfile:async function(e){try{const t=await Ol("/users/profile",{method:"PUT",body:JSON.stringify(e)});return r(t),t}catch(t){throw console.error("Update user profile error:",t),t}},updateUserSettings:async function(e){try{await Ol("/users/settings",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update user settings error:",t),t}},changePassword:async function(e,t,s){try{await Ol("/users/change-password",{method:"POST",body:JSON.stringify({current_password:e,new_password:t,confirm_password:s})})}catch(r){throw console.error("Change password error:",r),r}},getUserNotifications:async function(){try{return await Ol("/users/notifications")}catch(e){throw console.error("Get user notifications error:",e),e}},updateUserNotifications:async function(e){try{await Ol("/users/notifications",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update user notifications error:",t),t}},getUAEEmirates:async function(){try{return await Ol("/locations/emirates")}catch(e){throw console.error("Get UAE emirates error:",e),e}},getEmirateAreas:async function(e){try{return await Ol(`/locations/emirates/${e}/areas`)}catch(t){throw console.error("Get emirate areas error:",t),t}},getPopularLocations:async function(){try{return await Ol("/locations/popular")}catch(e){throw console.error("Get popular locations error:",e),e}},searchLocations:async function(e){try{return await Ol(`/locations/search?q=${encodeURIComponent(e)}`)}catch(t){throw console.error("Search locations error:",t),t}},validateLocation:async function(e,t){try{const s=new URLSearchParams({emirate:e});return t&&s.append("area",t),await Ol(`/locations/validate?${s.toString()}`)}catch(s){throw console.error("Validate location error:",s),s}},getUAEAmenities:async function(){try{return await Ol("/locations/amenities")}catch(e){throw console.error("Get UAE amenities error:",e),e}},getUAEPropertyTypes:async function(){try{return await Ol("/locations/property-types")}catch(e){throw console.error("Get UAE property types error:",e),e}},createStripeAccount:async function(){try{return(await Ol("/v1/stripe/host/create-account",{method:"POST",body:JSON.stringify({country:"AE",email:(null==s?void 0:s.email)||"",business_type:"company"})})).data}catch(e){throw console.error("Create Stripe account error:",e),e}},getStripeOnboardingLink:async function(){try{return(await Ol("/v1/stripe/host/onboarding-link",{method:"POST"})).data}catch(e){throw console.error("Get Stripe onboarding link error:",e),e}},getStripeAccountStatus:async function(){try{return(await Ol("/v1/stripe/host/account-status")).data}catch(e){throw console.error("Get Stripe account status error:",e),e}},getStripeDashboardLink:async function(){try{return(await Ol("/v1/stripe/host/dashboard-link",{method:"POST"})).data}catch(e){throw console.error("Get Stripe dashboard link error:",e),e}},getHostPayouts:async function(){try{return(await Ol("/v1/payouts/host-payouts")).data}catch(e){throw console.error("Get host payouts error:",e),e}},checkSuperhostEligibility:async function(){try{return await Ol("/superhost/eligibility")}catch(e){throw console.error("Check superhost eligibility error:",e),e}},getSuperhostStatus:async function(){try{return await Ol("/superhost/status")}catch(e){throw console.error("Get superhost status error:",e),e}},requestSuperhostVerification:async function(e){try{return await Ol("/superhost/request",{method:"POST",body:JSON.stringify({request_message:e})})}catch(t){throw console.error("Request superhost verification error:",t),t}}};return e.jsx(Al.Provider,{value:f,children:t})}function $l(){const e=He.useContext(Al);if(!e)throw new Error("useApp must be used within an AppProvider");return e}function Dl({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:yr("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function Ll({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:yr("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function Ul({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:yr("leading-none",t),...s})}function Ml({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:yr("text-muted-foreground",t),...s})}function zl({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:yr("px-6 [&:last-child]:pb-6",t),...s})}const Bl="/assets/krib-logo-BqldiSXI.svg";function Fl(){const t=ns();return e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:"url(/assets/dubai-hero-bg-CsHj2d9q.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"#f8f9fa"},children:e.jsx("div",{className:"absolute inset-0 bg-black/20"})}),e.jsxs("nav",{className:"relative z-30 flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:Bl,alt:"Krib AI Logo",className:"h-10 w-auto filter drop-shadow-lg"}),e.jsxs("span",{className:"ml-3 text-2xl font-bold text-white drop-shadow-lg",children:["Krib ",e.jsx("span",{className:"text-krib-lime",children:"AI"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(jr,{variant:"ghost",onClick:()=>t("/auth"),className:"text-white hover:bg-white/20 hover:text-white border border-white/30 backdrop-blur-sm",children:"Sign In"}),e.jsx(jr,{onClick:()=>t("/auth"),className:"bg-krib-lime hover:bg-krib-lime-dark text-krib-black font-semibold px-6 shadow-lg",children:"Get Started"})]})]}),e.jsx("div",{className:"relative z-20 flex items-center justify-center min-h-[calc(100vh-120px)]",children:e.jsx("div",{className:"container mx-auto px-6 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 hero-text-shadow",children:["Smart Real Estate",e.jsx("br",{}),e.jsx("span",{className:"text-krib-lime hero-text-shadow",children:"Powered by AI"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-8 hero-text-shadow",children:"Revolutionizing property management with intelligent automation"}),e.jsx("p",{className:"text-lg text-white/80 mb-12 leading-relaxed hero-text-shadow max-w-3xl mx-auto",children:"From smart pricing to automated tenant screening, Krib AI transforms how you manage properties in the UAE market."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[e.jsx(jr,{size:"lg",onClick:()=>t("/auth"),className:"bg-krib-lime hover:bg-krib-lime-dark text-krib-black font-semibold text-lg px-8 py-4 shadow-xl",children:"Start Free Trial"}),e.jsx(jr,{variant:"outline",size:"lg",onClick:()=>t("/auth"),className:"border-white text-white hover:bg-white hover:text-krib-black text-lg px-8 py-4 backdrop-blur-sm",children:"Watch Demo"})]})]})})}),e.jsx("div",{className:"relative z-20 py-16 bg-white/10 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4 hero-text-shadow",children:"Why Choose Krib AI?"}),e.jsx("p",{className:"text-lg text-white/80 max-w-2xl mx-auto hero-text-shadow",children:"Experience the future of property management with our cutting-edge AI technology"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[e.jsxs(Dl,{className:"p-8 text-center bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-krib-lime rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(_,{className:"w-8 h-8 text-krib-black"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Smart Automation"}),e.jsx("p",{className:"text-white/80",children:"Automate repetitive tasks and focus on growing your portfolio"})]}),e.jsxs(Dl,{className:"p-8 text-center bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-krib-lime rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(S,{className:"w-8 h-8 text-krib-black"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"UAE Market Expert"}),e.jsx("p",{className:"text-white/80",children:"Built specifically for the UAE real estate market dynamics"})]}),e.jsxs(Dl,{className:"p-8 text-center bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-krib-lime rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(C,{className:"w-8 h-8 text-krib-black"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Save Time"}),e.jsx("p",{className:"text-white/80",children:"Reduce property management time by up to 70% with AI"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4 hero-text-shadow",children:"Ready to Transform Your Property Business?"}),e.jsx(jr,{size:"lg",onClick:()=>t("/auth"),className:"bg-krib-lime hover:bg-krib-lime-dark text-krib-black font-semibold text-lg px-8 py-4 shadow-xl",children:"Get Started Today"})]})]})})]})}var Wl="Tabs",[ql,Gl]=u(Wl,[P]),Hl=P(),[Kl,Vl]=ql(Wl),Jl=He.forwardRef((t,r)=>{const{__scopeTabs:a,value:n,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=t,h=E(c),[f,g]=p({prop:n,onChange:i,defaultProp:o??"",caller:Wl});return e.jsx(Kl,{scope:a,baseId:m(),value:f,onValueChange:g,orientation:l,dir:h,activationMode:d,children:e.jsx(s.div,{dir:h,"data-orientation":l,...u,ref:r})})});Jl.displayName=Wl;var Yl="TabsList",Xl=He.forwardRef((t,r)=>{const{__scopeTabs:a,loop:n=!0,...i}=t,o=Vl(Yl,a),l=Hl(a);return e.jsx(T,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(s.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:r})})});Xl.displayName=Yl;var Ql="TabsTrigger",Zl=He.forwardRef((t,r)=>{const{__scopeTabs:a,value:n,disabled:i=!1,...o}=t,l=Vl(Ql,a),c=Hl(a),d=sc(l.baseId,n),u=rc(l.baseId,n),h=n===l.value;return e.jsx(A,{asChild:!0,...c,focusable:!i,active:h,children:e.jsx(s.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...o,ref:r,onMouseDown:v(t.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(n)}),onKeyDown:v(t.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(n)}),onFocus:v(t.onFocus,()=>{const e="manual"!==l.activationMode;h||i||!e||l.onValueChange(n)})})})});Zl.displayName=Ql;var ec="TabsContent",tc=He.forwardRef((t,r)=>{const{__scopeTabs:a,value:n,forceMount:i,children:o,...l}=t,c=Vl(ec,a),d=sc(c.baseId,n),u=rc(c.baseId,n),h=n===c.value,m=He.useRef(h);return He.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),e.jsx(b,{present:i||h,children:({present:a})=>e.jsx(s.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!a,id:u,tabIndex:0,...l,ref:r,style:{...t.style,animationDuration:m.current?"0s":void 0},children:a&&o})})});function sc(e,t){return`${e}-trigger-${t}`}function rc(e,t){return`${e}-content-${t}`}tc.displayName=ec;var ac=Jl,nc=Xl,ic=Zl,oc=tc;function lc({className:t,...s}){return e.jsx(ac,{"data-slot":"tabs",className:yr("flex flex-col gap-2",t),...s})}function cc({className:t,...s}){return e.jsx(nc,{"data-slot":"tabs-list",className:yr("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function dc({className:t,...s}){return e.jsx(ic,{"data-slot":"tabs-trigger",className:yr("inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-4 py-2 text-sm font-semibold whitespace-nowrap transition-all focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","text-muted-foreground hover:text-foreground hover:bg-accent/50","data-[state=active]:bg-card data-[state=active]:text-foreground data-[state=active]:shadow-sm data-[state=active]:border-border","dark:data-[state=active]:bg-card dark:data-[state=active]:text-foreground dark:data-[state=active]:border-border",t),...s})}function uc({className:t,...s}){return e.jsx(oc,{"data-slot":"tabs-content",className:yr("flex-1 outline-none",t),...s})}function hc(){const{signIn:t,signUp:s,signInWithGoogle:r,isLoading:a}=$l(),[n,i]=He.useState(!1),[o,l]=He.useState(!1),[c,d]=He.useState(""),[u,h]=He.useState("signin"),[m,p]=He.useState({email:"",password:""}),[f,g]=He.useState({name:"",email:"",password:"",confirmPassword:""});return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})}):e.jsxs("div",{className:"min-h-screen bauhaus-auth-background flex",children:[e.jsx("div",{className:"bauhaus-grid-overlay"}),e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 xl:w-3/5 relative bauhaus-left-panel",children:[e.jsx("div",{className:"bauhaus-red-square"}),e.jsxs("div",{className:"bauhaus-text-block",children:[e.jsx("div",{className:"bauhaus-title",children:"KRIB"}),e.jsx("div",{className:"bauhaus-subtitle",children:"AI PROPERTY MANAGEMENT"}),e.jsx("div",{className:"bauhaus-line"}),e.jsxs("div",{className:"bauhaus-tagline",children:["FORM FOLLOWS",e.jsx("br",{}),"FUNCTION"]})]}),e.jsx("div",{className:"bauhaus-circle"}),e.jsx("div",{className:"bauhaus-triangle"}),e.jsx("div",{className:"bauhaus-small-square"}),e.jsxs("div",{className:"bauhaus-grid-numbers",children:[e.jsx("span",{className:"bauhaus-number",children:"01"}),e.jsx("span",{className:"bauhaus-number",children:"02"}),e.jsx("span",{className:"bauhaus-number",children:"03"})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 xl:w-2/5 flex items-center justify-center p-8 bauhaus-form-area",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"bauhaus-form-header",children:[e.jsxs("div",{className:"bauhaus-logo-section",children:[e.jsx("div",{className:"bauhaus-logo-square",children:e.jsx("img",{src:Bl,alt:"Krib",className:"h-8 w-8"})}),e.jsx("div",{className:"bauhaus-system-text",children:"SYSTEM"})]}),e.jsx("h1",{className:"bauhaus-main-title",children:"ACCESS"}),e.jsx("div",{className:"bauhaus-red-line"})]}),e.jsxs("div",{className:"bauhaus-mode-selector",children:[e.jsxs("div",{className:"bauhaus-tabs",children:[e.jsx("button",{onClick:()=>h("signin"),className:"bauhaus-tab "+("signin"===u?"bauhaus-tab-active":""),children:"SIGN IN"}),e.jsx("button",{onClick:()=>h("signup"),className:"bauhaus-tab "+("signup"===u?"bauhaus-tab-active":""),children:"REGISTER"})]}),e.jsx("div",{className:"bauhaus-tab-indicator"})]}),c&&e.jsxs("div",{className:"bauhaus-error",children:[e.jsx("div",{className:"bauhaus-error-symbol",children:"!"}),e.jsx("div",{className:"bauhaus-error-text",children:c})]}),e.jsxs(lc,{value:u,onValueChange:h,className:"bauhaus-form-container",children:[e.jsxs("div",{className:"bauhaus-separator",children:[e.jsx("div",{className:"bauhaus-separator-line"}),e.jsx("div",{className:"bauhaus-separator-text",children:"AUTHENTICATION"}),e.jsx("div",{className:"bauhaus-separator-line"})]}),e.jsx(uc,{value:"signin",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),d("");try{await t(m.email,m.password)}catch(s){d("An error occurred during sign in. Please try again.")}finally{i(!1)}},className:"bauhaus-form",children:[e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"01"}),e.jsx("span",{children:"EMAIL"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(R,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signin-email",type:"email",placeholder:"your.email@domain.com",className:"bauhaus-input",value:m.email,onChange:e=>p(t=>({...t,email:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"02"}),e.jsx("span",{children:"PASSWORD"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(O,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signin-password",type:o?"text":"password",placeholder:"",className:"bauhaus-input",value:m.password,onChange:e=>p(t=>({...t,password:e.target.value})),required:!0}),e.jsx("button",{type:"button",className:"bauhaus-input-toggle",onClick:()=>l(!o),children:o?e.jsx(I,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsx("div",{className:"bauhaus-action-section",children:e.jsxs("button",{type:"submit",className:"bauhaus-primary-button",disabled:n,children:[e.jsx("span",{className:"bauhaus-button-text",children:n?"AUTHENTICATING":"ACCESS SYSTEM"}),e.jsx(D,{className:"bauhaus-button-icon"}),e.jsx("div",{className:"bauhaus-button-bg"})]})})]})}),e.jsx(uc,{value:"signup",children:e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i(!0),d(""),f.password!==f.confirmPassword)return d("Passwords do not match."),void i(!1);if(f.password.length<6)return d("Password must be at least 6 characters long."),void i(!1);try{await s(f.email,f.password,f.name)}catch(t){d("An error occurred during sign up. Please try again.")}finally{i(!1)}},className:"bauhaus-form",children:[e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"01"}),e.jsx("span",{children:"FULL NAME"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(L,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-name",type:"text",placeholder:"john.doe",className:"bauhaus-input",value:f.name,onChange:e=>g(t=>({...t,name:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"02"}),e.jsx("span",{children:"EMAIL"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(R,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-email",type:"email",placeholder:"john.doe@company.com",className:"bauhaus-input",value:f.email,onChange:e=>g(t=>({...t,email:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"03"}),e.jsx("span",{children:"PASSWORD"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(O,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-password",type:o?"text":"password",placeholder:"",className:"bauhaus-input",value:f.password,onChange:e=>g(t=>({...t,password:e.target.value})),required:!0}),e.jsx("button",{type:"button",className:"bauhaus-input-toggle",onClick:()=>l(!o),children:o?e.jsx(I,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsxs("div",{className:"bauhaus-field-group",children:[e.jsxs("div",{className:"bauhaus-field-label",children:[e.jsx("span",{children:"04"}),e.jsx("span",{children:"CONFIRM"})]}),e.jsxs("div",{className:"bauhaus-input-container",children:[e.jsx(O,{className:"bauhaus-input-icon"}),e.jsx(Nr,{id:"signup-confirm-password",type:o?"text":"password",placeholder:"",className:"bauhaus-input",value:f.confirmPassword,onChange:e=>g(t=>({...t,confirmPassword:e.target.value})),required:!0}),e.jsx("div",{className:"bauhaus-input-line"})]})]}),e.jsx("div",{className:"bauhaus-action-section",children:e.jsxs("button",{type:"submit",className:"bauhaus-primary-button",disabled:n,children:[e.jsx("span",{className:"bauhaus-button-text",children:n?"CREATING ACCOUNT":"CREATE ACCOUNT"}),e.jsx(D,{className:"bauhaus-button-icon"}),e.jsx("div",{className:"bauhaus-button-bg"})]})})]})})]}),e.jsxs("div",{className:"bauhaus-alternative-access",children:[e.jsxs("div",{className:"bauhaus-separator",children:[e.jsx("div",{className:"bauhaus-separator-line"}),e.jsx("div",{className:"bauhaus-separator-text",children:"OR"}),e.jsx("div",{className:"bauhaus-separator-line"})]}),e.jsxs("button",{onClick:async()=>{i(!0),d("");try{await r()}catch(e){e.message.includes("Google authentication is not properly configured")?d("Google authentication needs to be configured in your Supabase project. Please see the setup instructions below."):d("An error occurred during Google sign-in. Please try again.")}finally{i(!1)}},disabled:n,className:"bauhaus-google-button",children:[e.jsx("div",{className:"bauhaus-google-icon",children:e.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),e.jsx("span",{className:"bauhaus-google-text",children:n?"CONNECTING...":"GOOGLE ACCESS"})]})]}),c.includes("Google authentication needs to be configured")&&e.jsxs("div",{className:"bauhaus-debug-info",children:[e.jsx("div",{className:"bauhaus-debug-title",children:"CONFIGURATION REQUIRED"}),e.jsx("div",{className:"bauhaus-debug-text",children:"Configure Google OAuth in Supabase Dashboard"})]})]})})]})}function mc(){const t=ns(),[s,r]=He.useState(!0);return He.useEffect(()=>{const e=setTimeout(async()=>{var e;try{0,r(!0);const{data:s,error:a}=await El.auth.getSession();if(a)return console.error("[Auth] Callback error:",a),void t("/auth?error="+encodeURIComponent(a.message));if(null==(e=s.session)?void 0:e.user)setTimeout(()=>{t("/dashboard",{replace:!0})},500);else{0;const e=new URLSearchParams(window.location.hash.substring(1));if(e.get("access_token")){const{data:e,error:s}=await El.auth.getSession();if(null==e?void 0:e.session)return void t("/dashboard",{replace:!0})}t("/auth",{replace:!0})}}catch(s){console.error("[Auth] Callback error:",s),t("/auth?error="+encodeURIComponent("Authentication failed"),{replace:!0})}finally{r(!1)}},100);return()=>clearTimeout(e)},[t]),e.jsx("div",{className:"min-h-screen flex items-center justify-center krib-auth-real-estate-background",children:e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-krib-lime border-t-transparent mx-auto mb-6"}),e.jsx("p",{className:"text-white text-lg font-semibold hero-text-shadow",children:s?"Completing authentication...":"Redirecting to dashboard..."}),e.jsx("p",{className:"text-white/70 text-sm mt-2 hero-text-shadow",children:"Please wait while we sign you in"})]})})}const pc=[{id:"overview",title:"Overview",icon:U,description:"Dashboard overview"},{id:"properties",title:"My Properties",icon:M,description:"Manage your listings"},{id:"add-property",title:"Add Property",icon:z,description:"AI-powered listing creation"},{id:"analytics",title:"Analytics",icon:B,description:"Performance insights"},{id:"bookings",title:"Bookings",icon:F,description:"Manage reservations"},{id:"financials",title:"Financials",icon:W,description:"Earnings & payouts"},{id:"superhost",title:"Superhost",icon:q,description:"Verification status"},{id:"messages",title:"Messages",icon:G,description:"Guest communications"},{id:"reviews",title:"Reviews",icon:H,description:"Guest feedback"},{id:"settings",title:"Settings",icon:K,description:"Account preferences"}];function fc({activeSection:t,onSectionChange:s}){const{user:r,signOut:a}=$l();return e.jsxs(Sa,{className:"krib-sidebar",children:[e.jsx(Ca,{className:"krib-sidebar-header border-b border-sidebar-border p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl krib-logo-container",children:e.jsx("img",{src:Bl,alt:"Krib",className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-sidebar-foreground bg-gradient-to-r from-krib-gray-dark to-krib-black bg-clip-text",children:"Krib"}),e.jsx("p",{className:"text-sm text-sidebar-foreground/70 font-medium",children:"Property Dashboard"})]})]})}),e.jsx(Pa,{children:e.jsxs(Ta,{children:[e.jsx(Aa,{className:"krib-sidebar-group-label",children:"Navigation"}),e.jsx(Ra,{children:e.jsx(Oa,{className:"krib-sidebar-menu",children:pc.map(r=>e.jsx(Ia,{children:e.jsxs(Da,{onClick:()=>s(r.id),isActive:t===r.id,tooltip:r.description,className:"transition-all duration-300 krib-sidebar-item "+(t===r.id?"krib-sidebar-active":""),children:[e.jsx(r.icon,{className:"h-4 w-4"}),e.jsx("span",{children:r.title})]})},r.id))})})]})}),e.jsx(Ea,{className:"border-t border-sidebar-border p-4 krib-sidebar-header",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-white/50 border border-krib-lime/10",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-krib-lime/20 to-krib-lime-light/10",children:e.jsx(L,{className:"h-4 w-4 text-krib-gray-dark"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:(null==r?void 0:r.name)||"User"}),e.jsx("p",{className:"text-xs text-sidebar-foreground/70 truncate",children:null==r?void 0:r.email})]})]}),e.jsxs(jr,{variant:"ghost",size:"sm",onClick:a,className:"w-full justify-start text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-red-50 transition-all duration-200",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})})]})}function gc(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>({...t,...s(e)[`__scope${r}`]}),{});return He.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var xc=Symbol.for("react.lazy"),vc=Ke[" use ".trim().toString()];function bc(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===xc&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function yc(t){const s=wc(t),r=He.forwardRef((t,r)=>{let{children:a,...n}=t;bc(a)&&"function"==typeof vc&&(a=vc(a._payload));const i=He.Children.toArray(a),o=i.find(Nc);if(o){const t=o.props.children,a=i.map(e=>e===o?He.Children.count(t)>1?He.Children.only(null):He.isValidElement(t)?t.props.children:null:e);return e.jsx(s,{...n,ref:r,children:He.isValidElement(t)?He.cloneElement(t,void 0,a):null})}return e.jsx(s,{...n,ref:r,children:a})});return r.displayName=`${t}.Slot`,r}function wc(e){const t=He.forwardRef((e,t)=>{let{children:s,...r}=e;if(bc(s)&&"function"==typeof vc&&(s=vc(s._payload)),He.isValidElement(s)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(s),a=function(e,t){const s={...t};for(const r in t){const a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{const t=n(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==He.Fragment&&(a.ref=t?J(t,e):e),He.cloneElement(s,a)}return He.Children.count(s)>1?He.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jc=Symbol("radix.slottable");function Nc(e){return He.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===jc}var kc=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,s)=>{const r=yc(`Primitive.${s}`),a=He.forwardRef((t,a)=>{const{asChild:n,...i}=t,o=n?r:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...i,ref:a})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{}),_c="Progress",Sc=100,[Cc,Ec]=function(t,s=[]){let r=[];const a=()=>{const e=r.map(e=>He.createContext(e));return function(s){const r=(null==s?void 0:s[t])||e;return He.useMemo(()=>({[`__scope${t}`]:{...s,[t]:r}}),[s,r])}};return a.scopeName=t,[function(s,a){const n=He.createContext(a);n.displayName=s+"Context";const i=r.length;r=[...r,a];const o=s=>{var r;const{scope:a,children:o,...l}=s,c=(null==(r=null==a?void 0:a[t])?void 0:r[i])||n,d=He.useMemo(()=>l,Object.values(l));return e.jsx(c.Provider,{value:d,children:o})};return o.displayName=s+"Provider",[o,function(e,r){var o;const l=(null==(o=null==r?void 0:r[t])?void 0:o[i])||n,c=He.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${e}\` must be used within \`${s}\``)}]},gc(a,...s)]}(_c),[Pc,Tc]=Cc(_c),Ac=He.forwardRef((t,s)=>{const{__scopeProgress:r,value:a=null,max:n,getValueLabel:i=Ic,...o}=t;!n&&0!==n||Lc(n)||console.error(`Invalid prop \`max\` of value \`${`${n}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const l=Lc(n)?n:Sc;null===a||Uc(a,l)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${a}`,"Progress"));const c=Uc(a,l)?a:null,d=Dc(c)?i(c,l):void 0;return e.jsx(Pc,{scope:r,value:c,max:l,children:e.jsx(kc.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Dc(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":$c(c,l),"data-value":c??void 0,"data-max":l,...o,ref:s})})});Ac.displayName=_c;var Rc="ProgressIndicator",Oc=He.forwardRef((t,s)=>{const{__scopeProgress:r,...a}=t,n=Tc(Rc,r);return e.jsx(kc.div,{"data-state":$c(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:s})});function Ic(e,t){return`${Math.round(e/t*100)}%`}function $c(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Dc(e){return"number"==typeof e}function Lc(e){return Dc(e)&&!isNaN(e)&&e>0}function Uc(e,t){return Dc(e)&&!isNaN(e)&&e<=t&&e>=0}Oc.displayName=Rc;var Mc=Ac,zc=Oc;const Bc=He.forwardRef(({className:t,value:s,...r},a)=>e.jsx(Mc,{ref:a,className:yr("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(zc,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Bc.displayName=Mc.displayName;const Fc=Cs("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Wc({className:s,variant:r,asChild:a=!1,...n}){const i=a?t:"span";return e.jsx(i,{"data-slot":"badge",className:yr(Fc({variant:r}),s),...n})}function qc(){const{properties:t,bookings:s,analytics:r,getAnalytics:a,loadProperties:n,loadBookings:i}=$l(),o=ns();He.useEffect(()=>{(async()=>{await Promise.all([n(),i(),a()])})()},[]);const l=t.reduce((e,t)=>e+(t.total_revenue||0),0),c=t.reduce((e,t)=>e+(t.booking_count||0),0),d=t.length>0?t.reduce((e,t)=>e+(t.rating||0),0)/t.length:0,u=(()=>{if(0===t.length)return 0;const e=new Date((new Date).getTime()-2592e6),r=s.filter(t=>new Date(t.created_at)>=e&&"confirmed"===t.status);if(0===r.length)return 0;const a=r.reduce((e,t)=>e+t.nights,0),n=30*t.length;return n>0?Math.round(a/n*100):0})(),h=[{title:"Total Properties",value:t.length.toString(),change:t.length>0?`${t.length} active`:"No properties yet",icon:M,color:"text-krib-lime"},{title:"Total Revenue",value:`$${l.toLocaleString()}`,change:l>0?"From confirmed bookings":"No revenue yet",icon:W,color:"text-green-600"},{title:"Total Bookings",value:c.toString(),change:c>0?`${c} confirmed`:"No bookings yet",icon:F,color:"text-purple-600"},{title:"Occupancy Rate",value:`${u}%`,change:u>0?"Last 30 days":"No bookings to calculate",icon:Y,color:"text-orange-600"}],m=s.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,3),p=t.sort((e,t)=>(t.total_revenue||0)-(e.total_revenue||0)).slice(0,3);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your rental properties."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:h.map(t=>e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.change})]})]},t.title))}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Recent Bookings"}),e.jsx(Ml,{children:"Latest reservations for your properties"})]}),e.jsx(zl,{children:e.jsx("div",{className:"space-y-4",children:m.length>0?m.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:t.property_title||"Property"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.guest_name,"  ",new Date(t.check_in).toLocaleDateString()," - ",new Date(t.check_out).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",t.total_amount]}),e.jsx(Wc,{variant:"confirmed"===t.status?"default":"secondary",children:t.status})]})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No bookings yet"})})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Top Performing Properties"}),e.jsx(Ml,{children:"Your best properties by revenue"})]}),e.jsx(zl,{children:e.jsx("div",{className:"space-y-4",children:p.length>0?p.map(t=>{const s=t.booking_count>0?Math.min(Math.round(t.booking_count/30*100),100):0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[t.booking_count||0," bookings"]}),e.jsx("span",{children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3 fill-current text-yellow-500"}),e.jsx("span",{children:t.rating||0})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",t.total_revenue||0]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s,"% occupied"]})]})]}),e.jsx(Bc,{value:s,className:"h-2"})]},t.id)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No properties yet"})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Quick Actions"}),e.jsx(Ml,{children:"Common tasks to manage your properties"})]}),e.jsxs(zl,{className:"space-y-3",children:[e.jsx(jr,{className:"w-full justify-start h-auto p-4 text-left krib-button-primary group",onClick:()=>o("/add-property"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-black/10 mr-3 group-hover:bg-krib-black/20 transition-colors",children:e.jsx(z,{className:"h-5 w-5 text-krib-black"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Add New Property"}),e.jsx("div",{className:"text-sm opacity-80",children:"List a new rental property"})]})]})}),e.jsx(jr,{variant:"outline",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft border-krib-lime/20 group",onClick:()=>o("/analytics"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime/10 mr-3 group-hover:bg-krib-lime/20 transition-colors",children:e.jsx(B,{className:"h-5 w-5 text-krib-lime"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"View Analytics"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Performance insights"})]})]})}),e.jsx(jr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>o("/bookings"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime/5 mr-3 group-hover:bg-krib-lime/10 transition-colors",children:e.jsx(X,{className:"h-5 w-5 text-krib-lime"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Manage Bookings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Reservations & guests"})]})]})}),e.jsx(jr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>o("/financials"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime-light/5 mr-3 group-hover:bg-krib-lime-light/10 transition-colors",children:e.jsx(Q,{className:"h-5 w-5 text-krib-lime-light"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Financial Dashboard"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Earnings & payouts"})]})]})}),e.jsx(jr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>o("/settings"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-black/5 mr-3 group-hover:bg-krib-black/10 transition-colors",children:e.jsx(K,{className:"h-5 w-5 text-krib-black"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Settings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Account preferences"})]})]})})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Property Performance"}),e.jsx(Ml,{children:"Overall portfolio metrics"})]}),e.jsxs(zl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Portfolio Occupancy"}),e.jsxs("span",{children:[u,"%"]})]}),e.jsx(Bc,{value:u})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Active Properties"}),e.jsx("span",{children:t.filter(e=>"active"===e.status).length})]}),e.jsx(Bc,{value:t.length>0?t.filter(e=>"active"===e.status).length/t.length*100:0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Average Rating"}),e.jsxs("span",{children:[d.toFixed(1),"/5.0"]})]}),e.jsx(Bc,{value:d/5*100})]})]})]})]})]})}function Gc(e,[t,s]){return Math.min(s,Math.max(t,e))}function Hc(e){const t=He.useRef({value:e,previous:e});return He.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Kc=[" ","Enter","ArrowUp","ArrowDown"],Vc=[" ","Enter"],Jc="Select",[Yc,Xc,Qc]=Z(Jc),[Zc,ed]=u(Jc,[Qc,h]),td=h(),[sd,rd]=Zc(Jc),[ad,nd]=Zc(Jc),id=t=>{const{__scopeSelect:s,children:r,open:a,defaultOpen:n,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:g,required:x,form:v}=t,b=td(s),[y,w]=He.useState(null),[j,N]=He.useState(null),[k,_]=He.useState(!1),S=E(d),[C,P]=p({prop:a,defaultProp:n??!1,onChange:i,caller:Jc}),[T,A]=p({prop:o,defaultProp:l,onChange:c,caller:Jc}),R=He.useRef(null),O=!y||(v||!!y.closest("form")),[I,$]=He.useState(new Set),D=Array.from(I).map(e=>e.props.value).join(";");return e.jsx(f,{...b,children:e.jsxs(sd,{required:x,scope:s,trigger:y,onTriggerChange:w,valueNode:j,onValueNodeChange:N,valueNodeHasChildren:k,onValueNodeHasChildrenChange:_,contentId:m(),value:T,onValueChange:A,open:C,onOpenChange:P,dir:S,triggerPointerDownPosRef:R,disabled:g,children:[e.jsx(Yc.Provider,{scope:s,children:e.jsx(ad,{scope:t.__scopeSelect,onNativeOptionAdd:He.useCallback(e=>{$(t=>new Set(t).add(e))},[]),onNativeOptionRemove:He.useCallback(e=>{$(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:r})}),O?e.jsxs(qd,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:h,value:T,onChange:e=>A(e.target.value),disabled:g,form:v,children:[void 0===T?e.jsx("option",{value:""}):null,Array.from(I)]},D):null]})})};id.displayName=Jc;var od="SelectTrigger",ld=He.forwardRef((t,r)=>{const{__scopeSelect:a,disabled:n=!1,...i}=t,o=td(a),l=rd(od,a),c=l.disabled||n,d=g(r,l.onTriggerChange),u=Xc(a),h=He.useRef("touch"),[m,p,f]=Hd(e=>{const t=u().filter(e=>!e.disabled),s=t.find(e=>e.value===l.value),r=Kd(t,e,s);void 0!==r&&l.onValueChange(r.value)}),b=e=>{c||(l.onOpenChange(!0),f()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return e.jsx(x,{asChild:!0,...o,children:e.jsx(s.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Gd(l.value)?"":void 0,...i,ref:d,onClick:v(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&b(e)}),onPointerDown:v(i.onPointerDown,e=>{h.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(b(e),e.preventDefault())}),onKeyDown:v(i.onKeyDown,e=>{const t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),t&&" "===e.key||Kc.includes(e.key)&&(b(),e.preventDefault())})})})});ld.displayName=od;var cd="SelectValue",dd=He.forwardRef((t,r)=>{const{__scopeSelect:a,className:n,style:i,children:o,placeholder:l="",...c}=t,d=rd(cd,a),{onValueNodeHasChildrenChange:u}=d,h=void 0!==o,m=g(r,d.onValueNodeChange);return ee(()=>{u(h)},[u,h]),e.jsx(s.span,{...c,ref:m,style:{pointerEvents:"none"},children:Gd(d.value)?e.jsx(e.Fragment,{children:l}):o})});dd.displayName=cd;var ud=He.forwardRef((t,r)=>{const{__scopeSelect:a,children:n,...i}=t;return e.jsx(s.span,{"aria-hidden":!0,...i,ref:r,children:n||""})});ud.displayName="SelectIcon";var hd=t=>e.jsx(y,{asChild:!0,...t});hd.displayName="SelectPortal";var md="SelectContent",pd=He.forwardRef((t,s)=>{const r=rd(md,t.__scopeSelect),[a,n]=He.useState();if(ee(()=>{n(new DocumentFragment)},[]),!r.open){const s=a;return s?Ge.createPortal(e.jsx(gd,{scope:t.__scopeSelect,children:e.jsx(Yc.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),s):null}return e.jsx(bd,{...t,ref:s})});pd.displayName=md;var fd=10,[gd,xd]=Zc(md),vd=ne("SelectContent.RemoveScroll"),bd=He.forwardRef((t,s)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:x,avoidCollisions:b,...y}=t,w=rd(md,r),[N,k]=He.useState(null),[_,S]=He.useState(null),C=g(s,e=>k(e)),[E,P]=He.useState(null),[T,A]=He.useState(null),R=Xc(r),[O,I]=He.useState(!1),$=He.useRef(!1);He.useEffect(()=>{if(N)return se(N)},[N]),re();const D=He.useCallback(e=>{const[t,...s]=R().map(e=>e.ref.current),[r]=s.slice(-1),a=document.activeElement;for(const n of e){if(n===a)return;if(null==n||n.scrollIntoView({block:"nearest"}),n===t&&_&&(_.scrollTop=0),n===r&&_&&(_.scrollTop=_.scrollHeight),null==n||n.focus(),document.activeElement!==a)return}},[R,_]),L=He.useCallback(()=>D([E,N]),[D,E,N]);He.useEffect(()=>{O&&L()},[O,L]);const{onOpenChange:U,triggerPointerDownPosRef:M}=w;He.useEffect(()=>{if(N){let e={x:0,y:0};const t=t=>{var s,r;e={x:Math.abs(Math.round(t.pageX)-((null==(s=M.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=M.current)?void 0:r.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():N.contains(s.target)||U(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[N,U,M]),He.useEffect(()=>{const e=()=>U(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[U]);const[z,B]=Hd(e=>{const t=R().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=Kd(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),F=He.useCallback((e,t,s)=>{const r=!$.current&&!s;(void 0!==w.value&&w.value===t||r)&&(P(e),r&&($.current=!0))},[w.value]),W=He.useCallback(()=>null==N?void 0:N.focus(),[N]),q=He.useCallback((e,t,s)=>{const r=!$.current&&!s;(void 0!==w.value&&w.value===t||r)&&A(e)},[w.value]),G="popper"===a?wd:yd,H=G===wd?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:x,avoidCollisions:b}:{};return e.jsx(gd,{scope:r,content:N,viewport:_,onViewportChange:S,itemRefCallback:F,selectedItem:E,onItemLeave:W,itemTextRefCallback:q,focusSelectedItem:L,selectedItemText:T,position:a,isPositioned:O,searchRef:z,children:e.jsx(ae,{as:vd,allowPinchZoom:!0,children:e.jsx(ie,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:v(n,e=>{var t;null==(t=w.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:e.jsx(j,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:e.jsx(G,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault(),...y,...H,onPlaced:()=>I(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:v(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});bd.displayName="SelectContentImpl";var yd=He.forwardRef((t,r)=>{const{__scopeSelect:a,onPlaced:n,...i}=t,o=rd(md,a),l=xd(md,a),[c,d]=He.useState(null),[u,h]=He.useState(null),m=g(r,e=>h(e)),p=Xc(a),f=He.useRef(!1),x=He.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:y,focusSelectedItem:w}=l,j=He.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&u&&v&&b&&y){const e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),s=o.valueNode.getBoundingClientRect(),r=y.getBoundingClientRect();if("rtl"!==o.dir){const a=r.left-t.left,n=s.left-a,i=e.left-n,o=e.width+i,l=Math.max(o,t.width),d=window.innerWidth-fd,u=Gc(n,[fd,Math.max(fd,d-l)]);c.style.minWidth=o+"px",c.style.left=u+"px"}else{const a=t.right-r.right,n=window.innerWidth-s.right-a,i=window.innerWidth-e.right-n,o=e.width+i,l=Math.max(o,t.width),d=window.innerWidth-fd,u=Gc(n,[fd,Math.max(fd,d-l)]);c.style.minWidth=o+"px",c.style.right=u+"px"}const a=p(),i=window.innerHeight-2*fd,l=v.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),x=h+m+l+parseInt(d.paddingBottom,10)+g,w=Math.min(5*b.offsetHeight,x),j=window.getComputedStyle(v),N=parseInt(j.paddingTop,10),k=parseInt(j.paddingBottom,10),_=e.top+e.height/2-fd,S=i-_,C=b.offsetHeight/2,E=h+m+(b.offsetTop+C),P=x-E;if(E<=_){const e=a.length>0&&b===a[a.length-1].ref.current;c.style.bottom="0px";const t=u.clientHeight-v.offsetTop-v.offsetHeight,s=E+Math.max(S,C+(e?k:0)+t+g);c.style.height=s+"px"}else{const e=a.length>0&&b===a[0].ref.current;c.style.top="0px";const t=Math.max(_,h+v.offsetTop+(e?N:0)+C)+P;c.style.height=t+"px",v.scrollTop=E-_+v.offsetTop}c.style.margin=`${fd}px 0`,c.style.minHeight=w+"px",c.style.maxHeight=i+"px",null==n||n(),requestAnimationFrame(()=>f.current=!0)}},[p,o.trigger,o.valueNode,c,u,v,b,y,o.dir,n]);ee(()=>j(),[j]);const[N,k]=He.useState();ee(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const _=He.useCallback(e=>{e&&!0===x.current&&(j(),null==w||w(),x.current=!1)},[j,w]);return e.jsx(jd,{scope:a,contentWrapper:c,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(s.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});yd.displayName="SelectItemAlignedPosition";var wd=He.forwardRef((t,s)=>{const{__scopeSelect:r,align:a="start",collisionPadding:n=fd,...i}=t,o=td(r);return e.jsx(N,{...o,...i,ref:s,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wd.displayName="SelectPopperPosition";var[jd,Nd]=Zc(md,{}),kd="SelectViewport",_d=He.forwardRef((t,r)=>{const{__scopeSelect:a,nonce:n,...i}=t,o=xd(kd,a),l=Nd(kd,a),c=g(r,o.onViewportChange),d=He.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Yc.Slot,{scope:a,children:e.jsx(s.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:v(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=l;if((null==r?void 0:r.current)&&s){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*fd,a=parseFloat(s.style.minHeight),n=parseFloat(s.style.height),i=Math.max(a,n);if(i<r){const a=i+e,n=Math.min(r,a),o=a-n;s.style.height=n+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});_d.displayName=kd;var Sd="SelectGroup",[Cd,Ed]=Zc(Sd);He.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t,i=m();return e.jsx(Cd,{scope:a,id:i,children:e.jsx(s.div,{role:"group","aria-labelledby":i,...n,ref:r})})}).displayName=Sd;var Pd="SelectLabel";He.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t,i=Ed(Pd,a);return e.jsx(s.div,{id:i.id,...n,ref:r})}).displayName=Pd;var Td="SelectItem",[Ad,Rd]=Zc(Td),Od=He.forwardRef((t,r)=>{const{__scopeSelect:a,value:n,disabled:i=!1,textValue:o,...l}=t,c=rd(Td,a),d=xd(Td,a),u=c.value===n,[h,p]=He.useState(o??""),[f,x]=He.useState(!1),b=g(r,e=>{var t;return null==(t=d.itemRefCallback)?void 0:t.call(d,e,n,i)}),y=m(),w=He.useRef("touch"),j=()=>{i||(c.onValueChange(n),c.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Ad,{scope:a,value:n,disabled:i,textId:y,isSelected:u,onItemTextChange:He.useCallback(e=>{p(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:e.jsx(Yc.ItemSlot,{scope:a,value:n,disabled:i,textValue:h,children:e.jsx(s.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:b,onFocus:v(l.onFocus,()=>x(!0)),onBlur:v(l.onBlur,()=>x(!1)),onClick:v(l.onClick,()=>{"mouse"!==w.current&&j()}),onPointerUp:v(l.onPointerUp,()=>{"mouse"===w.current&&j()}),onPointerDown:v(l.onPointerDown,e=>{w.current=e.pointerType}),onPointerMove:v(l.onPointerMove,e=>{var t;w.current=e.pointerType,i?null==(t=d.onItemLeave)||t.call(d):"mouse"===w.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:v(l.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=d.onItemLeave)||t.call(d))}),onKeyDown:v(l.onKeyDown,e=>{var t;""!==(null==(t=d.searchRef)?void 0:t.current)&&" "===e.key||(Vc.includes(e.key)&&j()," "===e.key&&e.preventDefault())})})})})});Od.displayName=Td;var Id="SelectItemText",$d=He.forwardRef((t,r)=>{const{__scopeSelect:a,className:n,style:i,...o}=t,l=rd(Id,a),c=xd(Id,a),d=Rd(Id,a),u=nd(Id,a),[h,m]=He.useState(null),p=g(r,e=>m(e),d.onItemTextChange,e=>{var t;return null==(t=c.itemTextRefCallback)?void 0:t.call(c,e,d.value,d.disabled)}),f=null==h?void 0:h.textContent,x=He.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:f},d.value),[d.disabled,d.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=u;return ee(()=>(v(x),()=>b(x)),[v,b,x]),e.jsxs(e.Fragment,{children:[e.jsx(s.span,{id:d.textId,...o,ref:p}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ge.createPortal(o.children,l.valueNode):null]})});$d.displayName=Id;var Dd="SelectItemIndicator",Ld=He.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t;return Rd(Dd,a).isSelected?e.jsx(s.span,{"aria-hidden":!0,...n,ref:r}):null});Ld.displayName=Dd;var Ud="SelectScrollUpButton",Md=He.forwardRef((t,s)=>{const r=xd(Ud,t.__scopeSelect),a=Nd(Ud,t.__scopeSelect),[n,i]=He.useState(!1),o=g(s,a.onScrollButtonChange);return ee(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?e.jsx(Fd,{...t,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});Md.displayName=Ud;var zd="SelectScrollDownButton",Bd=He.forwardRef((t,s)=>{const r=xd(zd,t.__scopeSelect),a=Nd(zd,t.__scopeSelect),[n,i]=He.useState(!1),o=g(s,a.onScrollButtonChange);return ee(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;i(s)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?e.jsx(Fd,{...t,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Bd.displayName=zd;var Fd=He.forwardRef((t,r)=>{const{__scopeSelect:a,onAutoScroll:n,...i}=t,o=xd("SelectScrollButton",a),l=He.useRef(null),c=Xc(a),d=He.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return He.useEffect(()=>()=>d(),[d]),ee(()=>{var e;const t=c().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[c]),e.jsx(s.div,{"aria-hidden":!0,...i,ref:r,style:{flexShrink:0,...i.style},onPointerDown:v(i.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(n,50))}),onPointerMove:v(i.onPointerMove,()=>{var e;null==(e=o.onItemLeave)||e.call(o),null===l.current&&(l.current=window.setInterval(n,50))}),onPointerLeave:v(i.onPointerLeave,()=>{d()})})});He.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t;return e.jsx(s.div,{"aria-hidden":!0,...n,ref:r})}).displayName="SelectSeparator";var Wd="SelectArrow";He.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=td(r),i=rd(Wd,r),o=xd(Wd,r);return i.open&&"popper"===o.position?e.jsx(w,{...n,...a,ref:s}):null}).displayName=Wd;var qd=He.forwardRef(({__scopeSelect:t,value:r,...a},n)=>{const i=He.useRef(null),o=g(n,i),l=Hc(r);return He.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==r&&s){const t=new Event("change",{bubbles:!0});s.call(e,r),e.dispatchEvent(t)}},[l,r]),e.jsx(s.select,{...a,style:{...Dr,...a.style},ref:o,defaultValue:r})});function Gd(e){return""===e||void 0===e}function Hd(e){const t=te(e),s=He.useRef(""),r=He.useRef(0),a=He.useCallback(e=>{const a=s.current+e;t(a),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),n=He.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return He.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,n]}function Kd(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let n=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(n=n.filter(e=>e!==s));const l=n.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}qd.displayName="SelectBubbleInput";var Vd=id,Jd=ld,Yd=dd,Xd=ud,Qd=hd,Zd=pd,eu=_d,tu=Od,su=$d,ru=Ld,au=Md,nu=Bd;function iu({...t}){return e.jsx(Vd,{"data-slot":"select",...t})}function ou({...t}){return e.jsx(Yd,{"data-slot":"select-value",...t})}function lu({className:t,size:s="default",children:r,...a}){return e.jsxs(Jd,{"data-slot":"select-trigger","data-size":s,className:yr("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[r,e.jsx(Xd,{asChild:!0,children:e.jsx(oe,{className:"size-4 opacity-50"})})]})}function cu({className:t,children:s,position:r="popper",...a}){return e.jsx(Qd,{children:e.jsxs(Zd,{"data-slot":"select-content",className:yr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(uu,{}),e.jsx(eu,{className:yr("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(hu,{})]})})}function du({className:t,children:s,...r}){return e.jsxs(tu,{"data-slot":"select-item",className:yr("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ru,{children:e.jsx(le,{className:"size-4"})})}),e.jsx(su,{children:s})]})}function uu({className:t,...s}){return e.jsx(au,{"data-slot":"select-scroll-up-button",className:yr("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ce,{className:"size-4"})})}function hu({className:t,...s}){return e.jsx(nu,{"data-slot":"select-scroll-down-button",className:yr("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(oe,{className:"size-4"})})}function mu({...t}){return e.jsx(r,{"data-slot":"dialog",...t})}function pu({...t}){return e.jsx(de,{"data-slot":"dialog-trigger",...t})}function fu({...t}){return e.jsx(c,{"data-slot":"dialog-portal",...t})}function gu({className:t,...s}){return e.jsx(d,{"data-slot":"dialog-overlay",className:yr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function xu({className:t,children:s,...r}){return e.jsxs(fu,{"data-slot":"dialog-portal",children:[e.jsx(gu,{}),e.jsxs(a,{"data-slot":"dialog-content",className:yr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[s,e.jsxs(n,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(i,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function vu({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:yr("flex flex-col gap-2 text-center sm:text-left",t),...s})}function bu({className:t,...s}){return e.jsx(o,{"data-slot":"dialog-title",className:yr("text-lg leading-none font-semibold",t),...s})}function yu({className:t,...s}){return e.jsx(l,{"data-slot":"dialog-description",className:yr("text-muted-foreground text-sm",t),...s})}const wu=He.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:yr("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));wu.displayName="Textarea";var ju=He.forwardRef((t,r)=>e.jsx(s.label,{...t,ref:r,onMouseDown:e=>{var s;e.target.closest("button, input, select, textarea")||(null==(s=t.onMouseDown)||s.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));ju.displayName="Label";var Nu=ju;function ku({className:t,...s}){return e.jsx(Nu,{"data-slot":"label",className:yr("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function _u(t){const[s,r]=He.useState(!1),{src:a,alt:n,style:i,className:o,...l}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${o??""}`,style:i,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...l,"data-original-url":a})})}):e.jsx("img",{src:a,alt:n,className:o,style:i,...l,onError:()=>{r(!0)}})}function Su(){const{properties:t,loadProperties:s,deleteProperty:r,updateProperty:a}=$l(),[n,i]=He.useState(""),[o,l]=He.useState("all"),[c,d]=He.useState(null),[u,h]=He.useState(!1),[m,p]=He.useState(!1),[f,g]=He.useState({});He.useEffect(()=>{s()},[]);const x=t.filter(e=>{const t=e.title.toLowerCase().includes(n.toLowerCase())||e.city.toLowerCase().includes(n.toLowerCase())||e.state.toLowerCase().includes(n.toLowerCase()),s="all"===o||e.status===o;return t&&s}),v=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Properties"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental properties and track their performance."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Nr,{placeholder:"Search properties...",value:n,onChange:e=>i(e.target.value),className:"pl-10"})]}),e.jsxs(iu,{value:o,onValueChange:l,children:[e.jsxs(lu,{className:"w-[180px]",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),e.jsx(ou,{placeholder:"Filter by status"})]}),e.jsxs(cu,{children:[e.jsx(du,{value:"all",children:"All Status"}),e.jsx(du,{value:"active",children:"Active"}),e.jsx(du,{value:"draft",children:"Draft"}),e.jsx(du,{value:"inactive",children:"Inactive"}),e.jsx(du,{value:"suspended",children:"Suspended"})]})]})]}),e.jsx("div",{className:"space-y-4",children:x.map(t=>e.jsx(Dl,{className:"p-6 krib-card krib-glow-hover",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"w-32 h-24 relative flex-shrink-0",children:[e.jsx(_u,{src:t.images&&t.images.length>0&&!t.images[0].startsWith("blob:")?t.images[0]:"/placeholder-property.jpg",alt:t.title,className:"object-cover w-full h-full rounded-lg"}),t.images&&t.images[0]&&t.images[0].startsWith("blob:")&&e.jsx("div",{className:"absolute bottom-1 left-1 bg-yellow-100 text-yellow-800 text-xs px-1 py-0.5 rounded text-[10px]",children:"Image Issue"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:t.title}),e.jsx(Wc,{className:v(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:[t.city,", ",t.state]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.jsxs("span",{children:[t.bedrooms," bed"]}),e.jsxs("span",{children:[t.bathrooms," bath"]}),e.jsxs("span",{children:[t.max_guests," guests"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsxs("span",{className:"font-bold text-lg text-green-600",children:["$",t.price_per_night]}),e.jsx("span",{className:"text-muted-foreground text-sm ml-1",children:"/night"})]}),t.rating&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"ml-1 text-sm font-medium",children:t.rating})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs(jr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),h(!0)})(t),className:"h-8",children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(jr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),g({title:e.title,description:e.description,price_per_night:e.price_per_night,bedrooms:e.bedrooms,bathrooms:e.bathrooms,max_guests:e.max_guests,status:e.status}),p(!0)})(t),className:"h-8",children:[e.jsx(pe,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(jr,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this property?"))try{await r(e)}catch(t){console.error("Failed to delete property:",t)}})(t.id),className:"h-8 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})})]})},t.id))}),0===x.length&&e.jsx(Dl,{className:"p-12 krib-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"h-16 w-16 mx-auto text-muted-foreground mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:0===t.length?"You haven't created any properties yet. Get started by adding your first property to begin managing your rentals!":"Try adjusting your search terms or filter criteria to find the properties you're looking for."}),0===t.length&&e.jsxs(jr,{size:"lg",className:"bg-primary hover:bg-primary/90",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"Add Your First Property"]})]})}),e.jsx(mu,{open:u,onOpenChange:h,children:e.jsxs(xu,{className:"max-w-2xl bg-white border shadow-lg",children:[e.jsx(vu,{className:"pb-4 border-b",children:e.jsx(bu,{className:"text-xl font-semibold text-gray-900",children:"Property Details"})}),c&&e.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Title"}),e.jsx("p",{className:"text-gray-900 mt-1",children:c.title})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(Wc,{className:v(c.status),children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900 mt-2 leading-relaxed",children:c.description||"No description provided"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Price per night"}),e.jsxs("p",{className:"text-green-600 font-bold text-lg mt-1",children:["$",c.price_per_night]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Bedrooms"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.bedrooms})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Bathrooms"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.bathrooms})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Max Guests"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.max_guests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Location"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:[c.city,", ",c.state]})]})]}),c.amenities&&c.amenities.length>0&&e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{className:"font-semibold text-gray-700",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.amenities.map((t,s)=>e.jsx(Wc,{variant:"secondary",className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:t},s))})]})]})]})}),e.jsx(mu,{open:m,onOpenChange:p,children:e.jsxs(xu,{className:"max-w-2xl bg-white border shadow-lg",children:[e.jsx(vu,{className:"pb-4 border-b",children:e.jsx(bu,{className:"text-xl font-semibold text-gray-900",children:"Edit Property"})}),e.jsxs("div",{className:"space-y-4 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-title",className:"font-semibold text-gray-700",children:"Title"}),e.jsx(Nr,{id:"edit-title",value:f.title||"",onChange:e=>g(t=>({...t,title:e.target.value})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-description",className:"font-semibold text-gray-700",children:"Description"}),e.jsx(wu,{id:"edit-description",value:f.description||"",onChange:e=>g(t=>({...t,description:e.target.value})),rows:3,className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-price",className:"font-semibold text-gray-700",children:"Price per night ($)"}),e.jsx(Nr,{id:"edit-price",type:"number",value:f.price_per_night||"",onChange:e=>g(t=>({...t,price_per_night:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-status",className:"font-semibold text-gray-700",children:"Status"}),e.jsxs(iu,{value:f.status||"",onValueChange:e=>g(t=>({...t,status:e})),children:[e.jsx(lu,{className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(ou,{placeholder:"Select status"})}),e.jsxs(cu,{className:"bg-white border shadow-lg",children:[e.jsx(du,{value:"draft",children:"Draft"}),e.jsx(du,{value:"active",children:"Active"}),e.jsx(du,{value:"inactive",children:"Inactive"}),e.jsx(du,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-bedrooms",className:"font-semibold text-gray-700",children:"Bedrooms"}),e.jsx(Nr,{id:"edit-bedrooms",type:"number",min:"1",value:f.bedrooms||"",onChange:e=>g(t=>({...t,bedrooms:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-bathrooms",className:"font-semibold text-gray-700",children:"Bathrooms"}),e.jsx(Nr,{id:"edit-bathrooms",type:"number",min:"1",value:f.bathrooms||"",onChange:e=>g(t=>({...t,bathrooms:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(ku,{htmlFor:"edit-max-guests",className:"font-semibold text-gray-700",children:"Max Guests"}),e.jsx(Nr,{id:"edit-max-guests",type:"number",min:"1",value:f.max_guests||"",onChange:e=>g(t=>({...t,max_guests:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t bg-white p-4 rounded-md",children:[e.jsx(jr,{variant:"outline",onClick:()=>p(!1),className:"px-6",children:"Cancel"}),e.jsx(jr,{onClick:async()=>{if(c)try{await a(c.id,f),p(!1),d(null),g({})}catch(e){console.error("Failed to update property:",e)}},className:"px-6 krib-button-primary",children:"Save Changes"})]})]})]})})]})}var Cu="Checkbox",[Eu,Pu]=u(Cu),[Tu,Au]=Eu(Cu);function Ru(t){const{__scopeCheckbox:s,checked:r,children:a,defaultChecked:n,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=t,[m,f]=p({prop:r,defaultProp:n??!1,onChange:c,caller:Cu}),[g,x]=He.useState(null),[v,b]=He.useState(null),y=He.useRef(!1),w=!g||(!!o||!!g.closest("form")),j={checked:m,disabled:i,setChecked:f,control:g,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:!Bu(n)&&n,isFormControl:w,bubbleInput:v,setBubbleInput:b};return e.jsx(Tu,{scope:s,...j,children:zu(h)?h(j):a})}var Ou="CheckboxTrigger",Iu=He.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:a,...n},i)=>{const{control:o,value:l,disabled:c,checked:d,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:x}=Au(Ou,t),b=g(i,h),y=He.useRef(d);return He.useEffect(()=>{const e=null==o?void 0:o.form;if(e){const t=()=>m(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,m]),e.jsx(s.button,{type:"button",role:"checkbox","aria-checked":Bu(d)?"mixed":d,"aria-required":u,"data-state":Fu(d),"data-disabled":c?"":void 0,disabled:c,value:l,...n,ref:b,onKeyDown:v(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:v(a,e=>{m(e=>!!Bu(e)||!e),x&&f&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});Iu.displayName=Ou;var $u=He.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=t;return e.jsx(Ru,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:a,form:u,value:c,internal_do_not_use_render:({isFormControl:t})=>e.jsxs(e.Fragment,{children:[e.jsx(Iu,{...h,ref:s,__scopeCheckbox:r}),t&&e.jsx(Mu,{__scopeCheckbox:r})]})})});$u.displayName=Cu;var Du="CheckboxIndicator",Lu=He.forwardRef((t,r)=>{const{__scopeCheckbox:a,forceMount:n,...i}=t,o=Au(Du,a);return e.jsx(b,{present:n||Bu(o.checked)||!0===o.checked,children:e.jsx(s.span,{"data-state":Fu(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...t.style}})})});Lu.displayName=Du;var Uu="CheckboxBubbleInput",Mu=He.forwardRef(({__scopeCheckbox:t,...r},a)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:l,required:c,disabled:d,name:u,value:h,form:m,bubbleInput:p,setBubbleInput:f}=Au(Uu,t),x=g(a,f),v=Hc(o),b=ge(n);He.useEffect(()=>{const e=p;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(v!==o&&s){const t=new Event("click",{bubbles:r});e.indeterminate=Bu(o),s.call(e,!Bu(o)&&o),e.dispatchEvent(t)}},[p,v,o,i]);const y=He.useRef(!Bu(o)&&o);return e.jsx(s.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??y.current,required:c,disabled:d,name:u,value:h,form:m,...r,tabIndex:-1,ref:x,style:{...r.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function zu(e){return"function"==typeof e}function Bu(e){return"indeterminate"===e}function Fu(e){return Bu(e)?"indeterminate":e?"checked":"unchecked"}function Wu({className:t,...s}){return e.jsx($u,{"data-slot":"checkbox",className:yr("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Lu,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(le,{className:"size-3.5"})})})}Mu.displayName=Uu;const qu=Cs("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Gu({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:yr(qu({variant:s}),t),...r})}function Hu({className:t,...s}){return e.jsx("div",{"data-slot":"alert-title",className:yr("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function Ku({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:yr("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}async function Vu(e,t="properties"){const s=Array.from(e),r=s.map(e=>async function(e,t="properties"){try{const s=e.name.split(".").pop(),r=`${t}/${Math.random().toString(36).substring(2)}-${Date.now()}.${s}`;console.log("Uploading file:",e.name,"to path:",r);const{data:a,error:n}=await El.storage.from("krib_host").upload(r,e,{cacheControl:"3600",upsert:!1});if(n)return console.error("Upload error:",n),{success:!1,error:n.message};console.log("Upload successful:",a);const{data:i}=El.storage.from("krib_host").getPublicUrl(r);return i.publicUrl?(console.log("Generated public URL:",i.publicUrl),{success:!0,url:i.publicUrl}):{success:!1,error:"Failed to generate public URL"}}catch(s){return console.error("Unexpected upload error:",s),{success:!1,error:s.message||"Upload failed"}}}(e,t));try{return await Promise.all(r)}catch(a){return console.error("Multiple upload error:",a),s.map(()=>({success:!1,error:a.message||"Upload failed"}))}}function Ju(){var t;const{createProperty:s,generateAIDescription:r,getUAEEmirates:a,getEmirateAreas:n,getUAEPropertyTypes:o,getUAEAmenities:l}=$l(),c=ns(),[d,u]=He.useState("basic-info"),[h,m]=He.useState(!1),[p,f]=He.useState(!1),[g,x]=He.useState(!1),[v,b]=He.useState({}),[y,w]=He.useState([]),[j,N]=He.useState([]),[k,_]=He.useState({}),[S,C]=He.useState([]),[E,P]=He.useState(!1),[T,A]=He.useState({title:"",address:"",city:"",state:"",country:"UAE",property_type:"",bedrooms:1,bathrooms:1,max_guests:2,price_per_night:500,description:"",images:[],amenities:[]}),R=[{id:"basic-info",title:"Basic Info",icon:xe,description:"Property basics"},{id:"details",title:"Details",icon:U,description:"Size & capacity"},{id:"images",title:"Photos",icon:ve,description:"Upload images"},{id:"amenities",title:"Amenities",icon:be,description:"Features & perks"},{id:"pricing",title:"Pricing",icon:W,description:"Set your rate"},{id:"preview",title:"Preview",icon:le,description:"Review & publish"}];He.useEffect(()=>{O()},[]),He.useEffect(()=>{T.state&&I(T.state)},[T.state]);const O=async()=>{try{const[e,t,s]=await Promise.all([a(),o(),l()]);w(e),_(t),C(s)}catch(e){console.error("Failed to load UAE data from API, using fallback data:",e),w([{value:"Dubai",label:"Dubai"},{value:"Abu Dhabi",label:"Abu Dhabi"},{value:"Sharjah",label:"Sharjah"},{value:"Ajman",label:"Ajman"},{value:"Ras Al Khaimah",label:"Ras Al Khaimah"},{value:"Fujairah",label:"Fujairah"},{value:"Umm Al Quwain",label:"Umm Al Quwain"}]),_({apartment:"Apartment",villa:"Villa",townhouse:"Townhouse",penthouse:"Penthouse",studio:"Studio",duplex:"Duplex",loft:"Loft",compound:"Compound",hotel_apartment:"Hotel Apartment",office:"Office",retail:"Retail Space"}),C(["Central Air Conditioning","Maid's Room","Driver's Room","Built-in Wardrobes","Covered Parking","24/7 Security","Swimming Pool","Gym","Children's Play Area","WiFi","Kitchen","Washing Machine","TV","Balcony","Sea View","City View"])}},I=async e=>{P(!0);try{const t=await n(e);N(t)}catch(t){console.error("Failed to load emirate areas from API, using fallback data:",t);N({Dubai:["Downtown Dubai","Dubai Marina","Jumeirah Beach Residence (JBR)","Business Bay","Palm Jumeirah","Jumeirah","Arabian Ranches","Dubai Hills Estate","City Walk","DIFC","Al Barsha","The Greens"],"Abu Dhabi":["Abu Dhabi City","Yas Island","Saadiyat Island","Al Reem Island","Khalifa City","Al Raha","Masdar City","Corniche","Al Maryah Island"],Sharjah:["Sharjah City","Al Majaz","Al Nahda","Al Khan","Al Qasba"],Ajman:["Ajman City","Al Nuaimiya","Al Rashidiya","Corniche Road"],"Ras Al Khaimah":["Ras Al Khaimah City","Al Hamra","Al Marjan Island","Al Rams"],Fujairah:["Fujairah City","Dibba","Kalba","Khor Fakkan"],"Umm Al Quwain":["Umm Al Quwain City","Al Salam City","Falaj Al Mualla"]}[e]||[])}finally{P(!1)}},$=e=>{A(t=>({...t,state:e,city:""})),b(e=>({...e,state:"",city:""}))},L=R.findIndex(e=>e.id===d),M=async()=>{const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/*",e.onchange=async e=>{var t;const s=e.target.files;if(s&&s.length>0){x(!0),b(e=>({...e,images:""}));try{console.log("Starting upload of",s.length,"files");const e=await Vu(s,"properties"),r=e.filter(e=>e.success&&e.url).map(e=>e.url),a=e.filter(e=>!e.success);if(r.length>0&&(A(e=>({...e,images:[...e.images,...r].slice(0,10)})),console.log("Successfully uploaded",r.length,"images")),a.length>0){const e=`Failed to upload ${a.length} image(s). ${(null==(t=a[0])?void 0:t.error)||"Unknown error"}`;b(t=>({...t,images:e})),console.error("Upload failures:",a)}}catch(r){console.error("Upload error:",r),b(e=>({...e,images:"Failed to upload images. Please try again."}))}finally{x(!1)}}},e.click()},z=async()=>{f(!0);try{console.log("Generating AI description with data:",T);const e=await r({property_type:T.property_type,city:T.city,state:T.state,bedrooms:T.bedrooms,bathrooms:T.bathrooms,max_guests:T.max_guests,amenities:T.amenities,address:T.address});console.log("Generated description:",e),A(t=>({...t,description:e}))}catch(e){console.error("Failed to generate description:",e),console.error("Error details:",e.message,e.status);const t=`Beautiful ${T.property_type.toLowerCase()} in ${T.city}, ${T.state}. This ${T.bedrooms}-bedroom property can accommodate up to ${T.max_guests} guests. Perfect for your next getaway!`;A(e=>({...e,description:t}))}finally{f(!1)}},B=()=>{switch(d){case"basic-info":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Let's start with the basics"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your property"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ku,{htmlFor:"title",children:"Property Title *"}),e.jsx(Nr,{id:"title",placeholder:"e.g., Cozy Downtown Apartment",value:T.title,onChange:e=>A(t=>({...t,title:e.target.value})),className:"input-enhanced "+(v.title?"border-red-500":"")}),v.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.title})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(ku,{htmlFor:"address",children:"Address *"}),e.jsx(Nr,{id:"address",placeholder:"123 Main Street",value:T.address,onChange:e=>A(t=>({...t,address:e.target.value})),className:v.address?"border-red-500":""}),v.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.address})]}),e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"state",children:"Emirate *"}),e.jsxs(iu,{value:T.state,onValueChange:$,children:[e.jsx(lu,{className:v.state?"border-red-500":"",children:e.jsx(ou,{placeholder:"Select Emirate"})}),e.jsx(cu,{children:y.map(t=>e.jsx(du,{value:t.value,children:t.label},t.value))})]}),v.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.state})]}),e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"city",children:"Area/City *"}),e.jsxs(iu,{value:T.city,onValueChange:e=>A(t=>({...t,city:e})),disabled:!T.state||E,children:[e.jsx(lu,{className:v.city?"border-red-500":"",children:e.jsx(ou,{placeholder:T.state?E?"Loading areas...":"Select Area/City":"Select Emirate first"})}),e.jsx(cu,{children:j.map(t=>e.jsx(du,{value:t,children:t},t))})]}),v.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.city})]}),e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"country",children:"Country"}),e.jsxs(iu,{value:T.country,onValueChange:e=>A(t=>({...t,country:e})),children:[e.jsx(lu,{children:e.jsx(ou,{})}),e.jsx(cu,{children:e.jsx(du,{value:"UAE",children:"United Arab Emirates "})})]})]}),e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"property_type",children:"Property Type *"}),e.jsxs(iu,{value:T.property_type,onValueChange:e=>A(t=>({...t,property_type:e})),children:[e.jsx(lu,{className:v.property_type?"border-red-500":"",children:e.jsx(ou,{placeholder:"Select type"})}),e.jsx(cu,{children:Object.entries(k).map(([t,s])=>e.jsx(du,{value:t,children:s},t))})]}),v.property_type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.property_type})]})]})]});case"details":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Property Details"}),e.jsx("p",{className:"text-gray-600",children:"Help guests understand your space"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(Nr,{id:"bedrooms",type:"number",min:"0",value:T.bedrooms,onChange:e=>A(t=>({...t,bedrooms:parseInt(e.target.value)||0})),className:v.bedrooms?"border-red-500":""}),v.bedrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.bedrooms})]}),e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(Nr,{id:"bathrooms",type:"number",min:"0",step:"0.5",value:T.bathrooms,onChange:e=>A(t=>({...t,bathrooms:parseFloat(e.target.value)||0})),className:v.bathrooms?"border-red-500":""}),v.bathrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.bathrooms})]}),e.jsxs("div",{children:[e.jsx(ku,{htmlFor:"max_guests",children:"Max Guests"}),e.jsx(Nr,{id:"max_guests",type:"number",min:"1",value:T.max_guests,onChange:e=>A(t=>({...t,max_guests:parseInt(e.target.value)||1})),className:v.max_guests?"border-red-500":""}),v.max_guests&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.max_guests})]})]})]});case"images":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add Photos"}),e.jsx("p",{className:"text-gray-600",children:"Show off your space with beautiful photos"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(ve,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Photos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add up to 10 high-quality photos of your property"}),e.jsxs(jr,{onClick:M,size:"lg",disabled:g,className:"krib-button-primary",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),g?"Uploading...":"Choose Photos"]}),v.images&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:v.images})]}),T.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:T.images.map((t,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:`Property ${s+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>(e=>{A(t=>({...t,images:t.images.filter((t,s)=>s!==e)}))})(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(i,{className:"h-4 w-4"})})]},s))})]});case"amenities":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Amenities"}),e.jsx("p",{className:"text-gray-600",children:"What does your property offer?"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(t=>e.jsx("div",{onClick:()=>(e=>{A(t=>({...t,amenities:t.amenities.includes(e)?t.amenities.filter(t=>t!==e):[...t.amenities,e]}))})(t),className:"p-3 border rounded-lg cursor-pointer transition-all "+(T.amenities.includes(t)?"border-krib-lime bg-krib-lime-soft text-krib-black":"border-gray-300 hover:border-gray-400"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wu,{checked:T.amenities.includes(t),onChange:()=>{}}),e.jsx("span",{className:"text-sm font-medium",children:t})]})},t))})]});case"pricing":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set Your Price"}),e.jsx("p",{className:"text-gray-600",children:"How much do you want to charge per night?"})]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(ku,{htmlFor:"price_per_night",children:"Price per Night (AED)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"AED"}),e.jsx(Nr,{id:"price_per_night",type:"number",min:"1",value:T.price_per_night,onChange:e=>A(t=>({...t,price_per_night:parseInt(e.target.value)||1})),className:"pl-14 text-lg "+(v.price_per_night?"border-red-500":"")})]}),v.price_per_night&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.price_per_night})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ku,{htmlFor:"description",children:"Description"}),e.jsx(jr,{variant:"outline",size:"sm",onClick:z,disabled:p,className:"h-10 px-4 rounded-xl border-2 border-krib-lime text-krib-lime hover:bg-krib-lime hover:text-krib-black transition-all duration-200 font-medium shadow-sm hover:shadow-md group",children:p?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-krib-lime border-t-transparent rounded-full mr-2"}),"Generating..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-2 group-hover:scale-110 transition-transform duration-200"})," AI Generate"]})})]}),e.jsx(wu,{id:"description",placeholder:"Describe your property...",value:T.description,onChange:e=>A(t=>({...t,description:e.target.value})),rows:6,className:v.description?"border-red-500":""}),v.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.description})]})]});case"preview":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Listing"}),e.jsx("p",{className:"text-gray-600",children:"Make sure everything looks perfect"})]}),v.general&&e.jsxs(Gu,{className:"mb-4",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx(Ku,{children:v.general})]}),e.jsx(Dl,{className:"krib-card",children:e.jsx(zl,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:T.title}),e.jsxs("p",{className:"text-gray-600",children:[T.address,", ",T.city,", ",T.state]})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[T.bedrooms," bed"]}),e.jsxs("span",{children:[T.bathrooms," bath"]}),e.jsxs("span",{children:[T.max_guests," guests"]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["AED ",T.price_per_night,"/night"]})]}),T.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2",children:T.images.slice(0,3).map((t,s)=>e.jsx("img",{src:t,alt:`Property ${s+1}`,className:"w-full h-24 object-cover rounded"},s))}),e.jsx("p",{className:"text-gray-700",children:T.description}),T.amenities.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.amenities.map(t=>e.jsx(Wc,{variant:"secondary",children:t},t))})]})]})})})]});case"published":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(le,{className:"h-10 w-10 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" Property Published!"}),e.jsx("p",{className:"text-gray-600",children:"Your property is now live and ready to receive bookings."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(jr,{onClick:()=>u("basic-info"),variant:"outline",className:"w-full h-12 rounded-xl border-2 hover:bg-gray-50",children:"Add Another Property"}),e.jsx(jr,{onClick:()=>c("/properties"),className:"w-full h-12 rounded-xl krib-button-primary",children:"View My Properties"})]})]});default:return null}};return"published"===d?e.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:B()}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add New Property"}),e.jsx("p",{className:"text-gray-600",children:"Create a stunning listing for your rental property"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:R.map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(s<=L?"bg-krib-lime text-krib-black":"bg-gray-200 text-gray-500"),children:e.jsx(t.icon,{className:"h-5 w-5"})}),s<R.length-1&&e.jsx("div",{className:"w-16 h-1 mx-2 "+(s<L?"bg-krib-lime":"bg-gray-200")})]},t.id))}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",L+1," of ",R.length,": ",null==(t=R[L])?void 0:t.description]})})]}),e.jsx(Dl,{className:"mb-8 card-elevated",children:e.jsx(zl,{className:"p-8 form-section",children:B()})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(jr,{variant:"outline",onClick:()=>{const e=L-1;e>=0&&u(R[e].id)},disabled:0===L,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex gap-2",children:L===R.length-1?e.jsx(jr,{onClick:async()=>{m(!0),b({});try{console.log("Publishing property with data:",T);const e={title:T.title,address:T.address,city:T.city,state:T.state,country:T.country,property_type:T.property_type,bedrooms:T.bedrooms,bathrooms:T.bathrooms,max_guests:T.max_guests,price_per_night:T.price_per_night,description:T.description,images:T.images,amenities:T.amenities,status:"active"};console.log("Sending payload to backend:",e);const t=await s(e);console.log("Property created successfully:",t),t?u("published"):b({general:"Failed to create property. Please try again."})}catch(e){console.error("Error creating property:",e),b({general:e.message||"Failed to create property. Please check your connection and try again."})}finally{m(!1)}},disabled:h,size:"lg",className:"px-8 krib-button-primary",children:h?"Publishing...":"Publish Property"}):e.jsxs(jr,{onClick:()=>{if((e=>{const t={};switch(e){case"basic-info":T.title.trim()||(t.title="Property title is required"),T.address.trim()||(t.address="Address is required"),T.city.trim()||(t.city="City is required"),T.state.trim()||(t.state="State is required"),T.property_type||(t.property_type="Property type is required");break;case"details":T.bedrooms<0&&(t.bedrooms="Bedrooms cannot be negative"),T.bathrooms<0&&(t.bathrooms="Bathrooms cannot be negative"),T.max_guests<1&&(t.max_guests="Must accommodate at least 1 guest");break;case"pricing":T.price_per_night<1&&(t.price_per_night="Price must be at least $1"),T.description.trim()||(t.description="Description is required")}return b(t),0===Object.keys(t).length})(d)){const e=L+1;e<R.length&&u(R[e].id)}},size:"lg",className:"px-8 krib-button-primary",children:["Next",e.jsx(D,{className:"h-4 w-4 ml-2"})]})})]})]})}function Yu(){var t,s,r,a,n,i;const{getAnalytics:o}=$l(),[l,c]=He.useState(null),[d,u]=He.useState("12months"),[h,m]=He.useState(!0),[p,f]=He.useState(null),[g,x]=He.useState(null),[v,b]=He.useState("revenue");He.useEffect(()=>{(async()=>{m(!0);try{console.log("Loading analytics data...");const e=await o();console.log("Analytics data received:",e),c(e),e.market_insights&&f(e.market_insights),e.forecast&&x(e.forecast)}catch(e){console.error("Failed to load analytics:",e),console.error("Error details:",e.message,e.status),c({totalRevenue:0,totalBookings:0,totalProperties:0,occupancyRate:0,monthlyData:[],propertyPerformance:[]})}finally{m(!1)}})()},[d]);if(h)return e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-64"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-24 bg-muted rounded"},s))}),e.jsx("div",{className:"h-96 bg-muted rounded"})]})});const y=(null==l?void 0:l.monthlyData)||[];null==l||l.propertyPerformance;const w=[{title:"Total Revenue",value:`$${(null==(t=null==l?void 0:l.totalRevenue)?void 0:t.toLocaleString())||"0"}`,change:(null==l?void 0:l.monthly_growth)?`${l.monthly_growth>0?"+":""}${l.monthly_growth.toFixed(1)}%`:"0%",trend:"up",icon:W,color:"text-green-600"},{title:"Total Bookings",value:(null==(s=null==l?void 0:l.totalBookings)?void 0:s.toString())||"0",change:(null==l?void 0:l.booking_growth)?`${l.booking_growth>0?"+":""}${l.booking_growth.toFixed(1)}%`:"0%",trend:"up",icon:F,color:"text-krib-lime"},{title:"Average Rating",value:l?(l.average_rating||0).toFixed(1):"0.0",change:(null==l?void 0:l.rating_change)?`${l.rating_change>0?"+":""}${l.rating_change.toFixed(1)}`:"0",trend:"up",icon:H,color:"text-yellow-600"},{title:"Occupancy Rate",value:`${(null==l?void 0:l.occupancyRate)||0}%`,change:"-2.1%",trend:"down",icon:ke,color:"text-purple-600"}],j=[{name:"Occupied",value:(null==l?void 0:l.occupancyRate)||0,color:"#22c55e"},{name:"Available",value:100-((null==l?void 0:l.occupancyRate)||0),color:"#e5e7eb"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered insights and market intelligence for your rental business."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(jr,{onClick:()=>{const e={period:d,revenue:(null==l?void 0:l.totalRevenue)||0,bookings:(null==l?void 0:l.totalBookings)||0,properties:(null==l?void 0:l.totalProperties)||0,occupancyRate:(null==l?void 0:l.occupancyRate)||0,forecast:g,marketComparison:(null==l?void 0:l.marketComparison)||null,generatedAt:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`analytics-report-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},variant:"outline",size:"sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(iu,{value:d,onValueChange:u,children:[e.jsx(lu,{className:"w-[180px]",children:e.jsx(ou,{placeholder:"Select period"})}),e.jsxs(cu,{children:[e.jsx(du,{value:"7days",children:"Last 7 days"}),e.jsx(du,{value:"30days",children:"Last 30 days"}),e.jsx(du,{value:"3months",children:"Last 3 months"}),e.jsx(du,{value:"12months",children:"Last 12 months"})]})]})]})]}),e.jsxs(Gu,{children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx(Hu,{children:"AI Insights"}),e.jsx(Ku,{children:"Based on market analysis, you could increase revenue by 18% by optimizing pricing for the next 30 days."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:w.map(t=>e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:["up"===t.trend?e.jsx(Y,{className:"h-3 w-3 text-green-600 mr-1"}):e.jsx(Ce,{className:"h-3 w-3 text-red-600 mr-1"}),t.change," from last period"]})]})]},t.title))}),e.jsxs(lc,{value:v,onValueChange:b,className:"space-y-4",children:[e.jsxs(cc,{className:"grid w-full grid-cols-7",children:[e.jsx(dc,{value:"revenue",children:"Revenue"}),e.jsx(dc,{value:"forecast",children:"Forecast"}),e.jsx(dc,{value:"market",children:"Market"}),e.jsx(dc,{value:"pricing",children:"Pricing"}),e.jsx(dc,{value:"competition",children:"Competition"}),e.jsx(dc,{value:"insights",children:"Insights"}),e.jsx(dc,{value:"occupancy",children:"Occupancy"})]}),e.jsx(uc,{value:"revenue",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-7",children:[e.jsxs(Dl,{className:"md:col-span-4 krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Revenue Trend Analysis"}),e.jsx(Ml,{children:"Revenue performance with trend analysis and predictions"})]}),e.jsx(zl,{children:e.jsx(Ze,{width:"100%",height:300,children:e.jsxs(et,{data:y,children:[e.jsx(tt,{strokeDasharray:"3 3"}),e.jsx(st,{dataKey:"month"}),e.jsx(rt,{}),e.jsx(at,{formatter:e=>[`$${e}`,"Revenue"]}),e.jsx(nt,{type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb"}})]})})})]}),e.jsxs(Dl,{className:"md:col-span-3 krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Performance Metrics"}),e.jsx(Ml,{children:"Key performance indicators"})]}),e.jsxs(zl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"This Month"}),e.jsxs("span",{className:"font-medium",children:["$",(null==(r=null==l?void 0:l.current_month_revenue)?void 0:r.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Last Month"}),e.jsxs("span",{className:"font-medium",children:["$",(null==(a=null==l?void 0:l.last_month_revenue)?void 0:a.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{className:"text-sm",children:"Growth"}),e.jsx("span",{className:"font-medium",children:(null==l?void 0:l.monthly_growth)?`${l.monthly_growth>0?"+":""}${l.monthly_growth.toFixed(1)}%`:"0%"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Revenue Quality Score"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Diversification"}),e.jsxs("span",{children:[(null==l?void 0:l.diversification_score)||0,"%"]})]}),e.jsx(Bc,{value:(null==l?void 0:l.diversification_score)||0,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Stability"}),e.jsxs("span",{children:[(null==l?void 0:l.stability_score)||0,"%"]})]}),e.jsx(Bc,{value:(null==l?void 0:l.stability_score)||0,className:"h-2"})]})]})]})]})]})}),e.jsx(uc,{value:"forecast",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Dl,{className:"md:col-span-2 krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"UAE Market Forecast"}),e.jsx(Ml,{children:"Real UAE seasonal patterns and revenue predictions"})]}),e.jsx(zl,{children:(null==g?void 0:g.forecast_data)?e.jsx(Ze,{width:"100%",height:300,children:e.jsxs(it,{data:g.forecast_data,children:[e.jsx(tt,{strokeDasharray:"3 3"}),e.jsx(st,{dataKey:"month"}),e.jsx(rt,{}),e.jsx(at,{formatter:(e,t)=>[`AED ${e}`,"Forecasted Revenue"]}),e.jsx(ot,{type:"monotone",dataKey:"forecasted_revenue",stroke:"#10b981",fill:"#10b981",fillOpacity:.3})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading forecast data..."})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Dubai Market Insights"}),e.jsx(Ml,{children:"Real market predictions and seasonal trends"})]}),e.jsxs(zl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Next Quarter Forecast"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["AED ",(null==(n=null==g?void 0:g.next_quarter_revenue)?void 0:n.toLocaleString())||"0"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Based on UAE seasonality"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Confidence Level"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bc,{value:(null==g?void 0:g.confidence)||0,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[(null==g?void 0:g.confidence)||0,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Peak Period"}),e.jsx("div",{className:"text-sm",children:e.jsx("strong",{children:(null==g?void 0:g.peak_period)||"Winter Season"})})]}),(null==g?void 0:g.insights)&&e.jsxs(Gu,{children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx(Ku,{children:g.insights.seasonal_impact})]})]})]})]})}),e.jsx(uc,{value:"market",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"UAE Market Performance"}),e.jsx(Ml,{children:"Your performance vs UAE market standards"})]}),e.jsx(zl,{children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Market Position"}),e.jsxs(Wc,{variant:p.competitive_position<=3?"default":"secondary",children:["#",p.competitive_position," in area"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Your Performance: ",p.performance_vs_market,"%"]}),e.jsx("span",{className:"text-muted-foreground",children:"vs Market Average"})]})]}),p.area_insights&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Area: ",p.area_insights.area]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Tier: ",p.area_insights.tier]}),e.jsxs("p",{children:["Primary Demand: ",p.area_insights.primary_demand]})]})]})]}):e.jsx("div",{className:"text-muted-foreground",children:"Loading market data..."})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"UAE Seasonal Trends"}),e.jsx(Ml,{children:"Real UAE seasonal demand patterns"})]}),e.jsxs(zl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Market Health Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==p?void 0:p.market_health_score)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"/ 100"})]}),e.jsx(Bc,{value:(null==p?void 0:p.market_health_score)||0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Dubai Seasonal Demand"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Winter Peak (Dec-Feb)"}),e.jsx("span",{className:"font-medium text-green-600",children:"+50%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Winter High (Mar, Nov)"}),e.jsx("span",{className:"font-medium text-blue-600",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shoulder (Apr, Oct)"}),e.jsx("span",{className:"font-medium",children:"Normal"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Summer Low (May-Sep)"}),e.jsx("span",{className:"font-medium text-red-600",children:"-30%"})]})]})]}),e.jsxs(Gu,{children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx(Ku,{children:"UAE winter season (Dec-Mar) offers premium pricing opportunities with 40-50% higher demand."})]})]})]})]})}),e.jsx(uc,{value:"pricing",className:"space-y-4",children:e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"UAE Dynamic Pricing"}),e.jsx(Ml,{children:"Real-time pricing optimization based on UAE events, seasons, and demand"})]}),e.jsx(zl,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Gu,{children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Dynamic pricing is now available per property. View individual property pricing recommendations in the Properties section."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"UAE Seasonal Pricing Strategy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Winter Peak (Dec-Feb)"}),e.jsx("p",{className:"text-sm text-green-600",children:"European winter escape season"})]}),e.jsx(Wc,{className:"bg-green-100 text-green-800",children:"+50%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Winter High (Mar, Nov)"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Pleasant weather months"})]}),e.jsx(Wc,{className:"bg-blue-100 text-blue-800",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Shoulder (Apr, Oct)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Moderate demand periods"})]}),e.jsx(Wc,{variant:"secondary",children:"Base Rate"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-800",children:"Summer Low (May-Sep)"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Hot weather discount needed"})]}),e.jsx(Wc,{className:"bg-orange-100 text-orange-800",children:"-30%"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Major Event Opportunities"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"F1 Grand Prix"}),e.jsx("p",{className:"text-sm text-red-600",children:"March weekend"})]}),e.jsx(Wc,{className:"bg-red-100 text-red-800",children:"+300%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Shopping Festival"}),e.jsx("p",{className:"text-sm text-purple-600",children:"January month-long"})]}),e.jsx(Wc,{className:"bg-purple-100 text-purple-800",children:"+80%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"GITEX Technology"}),e.jsx("p",{className:"text-sm text-blue-600",children:"October week"})]}),e.jsx(Wc,{className:"bg-blue-100 text-blue-800",children:"+60%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"New Year's Eve"}),e.jsx("p",{className:"text-sm text-green-600",children:"Dec 31 - Jan 2"})]}),e.jsx(Wc,{className:"bg-green-100 text-green-800",children:"+200%"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pricing Recommendations"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Weekend Premium"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add 20% for Friday-Saturday nights"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Area Multipliers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Marina: +60%, Downtown: +50%, JLT: Base"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Ramadan Adjustment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reduce rates 20% during Ramadan period"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Last-Minute Bookings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dynamic discounts for 3-day advance bookings"})]})]})]})]})})]})}),e.jsx(uc,{value:"competition",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"UAE Market Competition"}),e.jsx(Ml,{children:"Competitive analysis is being developed for UAE market"})]}),e.jsxs(zl,{children:[e.jsxs(Gu,{children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Competitor tracking system is in development. Currently integrating with UAE property listings to provide real competitive analysis."})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx("h4",{className:"font-medium",children:"Market Areas Analysis"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Marina"}),e.jsx("span",{className:"text-sm text-green-600",children:"Premium Tier (+60%)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Waterfront luxury properties"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Downtown"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Premium Tier (+50%)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Business district and attractions"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"JLT"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Standard Tier"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Modern towers with metro access"})]})]})]})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Market Positioning"}),e.jsx(Ml,{children:"Your competitive advantage in UAE"})]}),e.jsx(zl,{className:"space-y-4",children:(null==p?void 0:p.area_insights)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Your Area: ",p.area_insights.area]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.area_insights.tier}),e.jsx("div",{className:"text-sm text-muted-foreground",children:p.area_insights.primary_demand})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Market Performance"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"vs Market Average"}),e.jsxs("span",{className:"font-medium text-green-600",children:[p.performance_vs_market,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Position in Area"}),e.jsxs("span",{className:"font-medium",children:["#",p.competitive_position]})]})]})]}),e.jsxs(Gu,{children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx(Ku,{children:(null==(i=p.area_recommendations)?void 0:i[0])||"Optimize pricing based on UAE seasonal patterns"})]})]})})]})]})}),e.jsx(uc,{value:"insights",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsx(Dl,{children:e.jsx(zl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-green-100 text-green-600",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Dubai Winter Season Opportunity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Wc,{variant:"outline",children:"Impact: High"}),e.jsx(Wc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Increase rates by 40-50% during UAE's peak winter season (December-February) when European tourists seek warm weather escapes."})]})]})})}),e.jsx(Dl,{children:e.jsx(zl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Event-Based Surge Pricing"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Wc,{variant:"outline",children:"Impact: Very High"}),e.jsx(Wc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Implement automatic surge pricing for major UAE events: F1 Grand Prix (+300%), Shopping Festival (+80%), GITEX (+60%)."})]})]})})}),e.jsx(Dl,{children:e.jsx(zl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 text-yellow-600",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Summer Season Strategy"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Wc,{variant:"outline",children:"Impact: Medium"}),e.jsx(Wc,{variant:"outline",children:"Effort: Medium"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"UAE summer (May-September) requires 20-30% discount and focus on longer stays, business travelers, and local residents."})]})]})})}),(null==p?void 0:p.area_recommendations)&&e.jsx(Dl,{children:e.jsx(zl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-100 text-purple-600",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Area-Specific Recommendations"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Wc,{variant:"outline",children:"Impact: High"}),e.jsx(Wc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("div",{className:"space-y-2",children:p.area_recommendations.map((t,s)=>e.jsxs("p",{className:"text-muted-foreground text-sm",children:[" ",t]},s))})]})]})})}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"UAE Demand Patterns"}),e.jsx(Ml,{children:"Real UAE seasonal and daily booking patterns"})]}),e.jsx(zl,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Peak Booking Times"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Evening (6-9 PM)"}),e.jsx("span",{className:"font-medium",children:"45%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Lunch (12-2 PM)"}),e.jsx("span",{className:"font-medium",children:"25%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Morning (9-11 AM)"}),e.jsx("span",{className:"font-medium",children:"20%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Late Night"}),e.jsx("span",{className:"font-medium",children:"10%"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Weekly Patterns"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Friday-Saturday"}),e.jsx("span",{className:"font-medium text-green-600",children:"Premium (+20%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Thursday"}),e.jsx("span",{className:"font-medium",children:"Standard"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday-Tuesday"}),e.jsx("span",{className:"font-medium text-blue-600",children:"Business Focus"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Wednesday"}),e.jsx("span",{className:"font-medium text-orange-600",children:"Lowest"})]})]})]})]})})})]})]})}),e.jsx(uc,{value:"occupancy",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Overall Occupancy"}),e.jsx(Ml,{children:"Current occupancy rate across all properties"})]}),e.jsxs(zl,{children:[e.jsx(Ze,{width:"100%",height:200,children:e.jsxs(lt,{children:[e.jsx(ct,{data:j,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"value",children:j.map((t,s)=>e.jsx(dt,{fill:t.color},`cell-${s}`))}),e.jsx(at,{formatter:e=>[`${e}%`,""]})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[(null==l?void 0:l.occupancyRate)||0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Occupied"})]})})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Occupancy Insights"}),e.jsx(Ml,{children:"Performance metrics and optimization recommendations"})]}),e.jsxs(zl,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Peak Season"}),e.jsx("span",{className:"font-medium",children:"Jun - Aug (89%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Low Season"}),e.jsx("span",{className:"font-medium",children:"Jan - Mar (62%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Stay"}),e.jsx("span",{className:"font-medium",children:"3.2 nights"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Booking Lead Time"}),e.jsx("span",{className:"font-medium",children:"28 days"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Recommendations"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Implement dynamic pricing to increase low-season occupancy"}),e.jsx("li",{children:" Offer 7+ day discounts to increase average stay"}),e.jsx("li",{children:" Target last-minute bookings with flash sales"}),e.jsx("li",{children:" Consider corporate partnerships for midweek bookings"})]})]})]})]})]})})]})]})}function Xu({...t}){return e.jsx(Te,{"data-slot":"dropdown-menu",...t})}function Qu({...t}){return e.jsx(Ae,{"data-slot":"dropdown-menu-trigger",...t})}function Zu({className:t,sideOffset:s=4,...r}){return e.jsx(Re,{children:e.jsx(Oe,{"data-slot":"dropdown-menu-content",sideOffset:s,className:yr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function eh({className:t,inset:s,variant:r="default",...a}){return e.jsx(Ie,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:yr("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}const th=e=>{switch(e){case"confirmed":return"default";case"pending":default:return"secondary";case"cancelled":case"no_show":return"destructive";case"completed":return"outline"}};function sh(){const{bookings:t,loadBookings:s,properties:r,loadProperties:a}=$l(),[n,i]=He.useState(""),[o,l]=He.useState("all"),[c,d]=He.useState("all"),[u,h]=He.useState(!0);He.useEffect(()=>{!async function(){try{h(!0),await Promise.all([s(),a()])}catch(e){console.error("Failed to load booking data:",e)}finally{h(!1)}}()},[]);const m=t.map(e=>{var t;return{...e,property_title:(null==(t=r.find(t=>t.id===e.property_id))?void 0:t.title)||"Unknown Property"}}),p=m.filter(e=>{var t;const s=e.guest_name.toLowerCase().includes(n.toLowerCase())||(null==(t=e.property_title)?void 0:t.toLowerCase().includes(n.toLowerCase()))||e.id.toLowerCase().includes(n.toLowerCase()),r="all"===o||e.status===o,a="all"===c||e.status===c;return s&&r&&a}),f=m.filter(e=>"confirmed"===e.status&&new Date(e.check_in)>new Date),g=m.filter(e=>{const t=(new Date).toISOString().split("T")[0];return e.check_in===t&&"confirmed"===e.status}),x=m.filter(e=>{const t=(new Date).toISOString().split("T")[0];return e.check_out===t&&"confirmed"===e.status});async function v(e,t){try{console.log("Updating booking",e,"to status",t)}catch(s){console.error("Failed to update booking:",s)}}return u?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[...Array(3)].map((t,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Booking Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage reservations and guest communications for all your properties."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm",children:"Upcoming Bookings"}),e.jsx(F,{className:"h-4 w-4 text-krib-lime"})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm",children:"Check-ins Today"}),e.jsx(L,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests arriving"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm",children:"Check-outs Today"}),e.jsx(L,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests departing"})]})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Nr,{placeholder:"Search bookings...",className:"pl-10",value:n,onChange:e=>i(e.target.value)})]}),e.jsxs(iu,{value:o,onValueChange:l,children:[e.jsx(lu,{className:"w-[180px]",children:e.jsx(ou,{placeholder:"Filter by status"})}),e.jsxs(cu,{children:[e.jsx(du,{value:"all",children:"All Statuses"}),e.jsx(du,{value:"confirmed",children:"Confirmed"}),e.jsx(du,{value:"pending",children:"Pending"}),e.jsx(du,{value:"completed",children:"Completed"}),e.jsx(du,{value:"cancelled",children:"Cancelled"}),e.jsx(du,{value:"no_show",children:"No Show"})]})]}),e.jsxs(jr,{variant:"outline",size:"sm",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),e.jsxs(lc,{value:c,onValueChange:d,children:[e.jsxs(cc,{children:[e.jsx(dc,{value:"all",children:"All Bookings"}),e.jsx(dc,{value:"confirmed",children:"Confirmed"}),e.jsx(dc,{value:"pending",children:"Pending"}),e.jsx(dc,{value:"completed",children:"Completed"})]}),e.jsx(uc,{value:c,className:"space-y-4",children:0===p.length?e.jsx(Dl,{children:e.jsxs(zl,{className:"p-8 text-center",children:[e.jsx(F,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-muted-foreground",children:0===t.length?"You don't have any bookings yet. Create some properties to start receiving bookings!":"Try adjusting your search or filter criteria."})]})}):e.jsx("div",{className:"space-y-4",children:p.map(t=>{const s=(e=>{switch(e){case"confirmed":case"completed":return Ue;case"pending":default:return C;case"cancelled":case"no_show":return Le}})(t.status);return e.jsx(Dl,{children:e.jsx(zl,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(me,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.property_title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Booking #",t.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Wc,{variant:th(t.status),children:[e.jsx(s,{className:"h-3 w-3 mr-1"}),t.status]}),e.jsxs(Xu,{children:[e.jsx(Qu,{asChild:!0,children:e.jsx(jr,{variant:"ghost",size:"sm",children:e.jsx($e,{className:"h-4 w-4"})})}),e.jsxs(Zu,{align:"end",children:[e.jsx(eh,{children:"View Details"}),e.jsx(eh,{children:"Contact Guest"}),e.jsx(eh,{children:"Modify Booking"}),"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(eh,{onClick:()=>v(t.id,"confirmed"),children:"Confirm Booking"}),e.jsx(eh,{onClick:()=>v(t.id,"cancelled"),children:"Decline Booking"})]}),"confirmed"===t.status&&e.jsx(eh,{onClick:()=>v(t.id,"cancelled"),className:"text-destructive",children:"Cancel Booking"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Guest Information"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_email})]}),t.guest_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Stay Details"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:["Check-in: ",new Date(t.check_in).toLocaleDateString()]}),e.jsxs("div",{children:["Check-out: ",new Date(t.check_out).toLocaleDateString()]}),e.jsxs("div",{children:[t.nights," nights  ",t.guests," guests"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:["Total: $",t.total_amount]}),e.jsxs("div",{children:["Booked: ",new Date(t.created_at).toLocaleDateString()]}),t.special_requests&&e.jsxs("div",{className:"text-xs",children:["Special: ",t.special_requests]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(jr,{variant:"outline",size:"sm",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Message Guest"]}),e.jsx(jr,{variant:"outline",size:"sm",children:"View Property"}),"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(jr,{size:"sm",onClick:()=>v(t.id,"confirmed"),children:"Confirm"}),e.jsx(jr,{variant:"outline",size:"sm",onClick:()=>v(t.id,"cancelled"),children:"Decline"})]})]})]})]})})},t.id)})})})]})]})}function rh(){var t;const{createStripeAccount:s,getStripeOnboardingLink:r,getStripeAccountStatus:a,getStripeDashboardLink:n}=$l(),[i,o]=He.useState(null),[l,c]=He.useState(!0),[d,u]=He.useState(!1);async function h(){try{u(!0),(null==i?void 0:i.stripe_account_id)||await s();const{url:e}=await r();window.location.href=e}catch(e){console.error("Setup payouts error:",e),alert("Failed to start payout setup. Please try again."),u(!1)}}if(He.useEffect(()=>{!async function(){var e,t;try{c(!0);const e=await a();o(e)}catch(s){((null==(e=s.message)?void 0:e.includes("not found"))||(null==(t=s.message)?void 0:t.includes("404")))&&o({status:"not_connected",charges_enabled:!1,payouts_enabled:!1,details_submitted:!1,onboarding_completed:!1})}finally{c(!1)}}()},[]),l)return e.jsxs(Dl,{children:[e.jsx(Ll,{children:e.jsx(Ul,{children:"Payout Setup"})}),e.jsx(zl,{children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]});const m=(null==i?void 0:i.requirements)&&(i.requirements.currently_due.length>0||i.requirements.past_due.length>0);return e.jsxs(Dl,{children:[e.jsxs(Ll,{children:[e.jsxs(Ul,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Payout Account"}),i?i.payouts_enabled?e.jsxs(Wc,{className:"bg-green-100 text-green-800",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"})," Active"]}):i.details_submitted?e.jsxs(Wc,{className:"bg-blue-100 text-blue-800",children:[e.jsx(C,{className:"h-3 w-3 mr-1"})," Pending Verification"]}):e.jsxs(Wc,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(we,{className:"h-3 w-3 mr-1"})," Setup Required"]}):null]}),e.jsx(Ml,{children:"Powered by Stripe - Secure bank account setup for receiving payouts"})]}),e.jsx(zl,{className:"space-y-4",children:"not_connected"===(null==i?void 0:i.status)?e.jsxs(e.Fragment,{children:[e.jsxs(Gu,{children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Set up your bank account to receive payouts from bookings. Stripe handles all KYC verification and bank details securely."})]}),e.jsxs(jr,{onClick:h,disabled:d,className:"w-full",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),d?"Redirecting...":"Set Up Payouts"]})]}):(null==i?void 0:i.payouts_enabled)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"Payouts Enabled"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Your account is fully verified and ready to receive payouts."}),i.bank_account_last4&&e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Bank account ending in ****",i.bank_account_last4]})]}),e.jsxs(jr,{variant:"outline",onClick:async function(){try{u(!0);const{url:e}=await n();window.open(e,"_blank")}catch(e){console.error("Open dashboard error:",e),alert("Failed to open Stripe dashboard")}finally{u(!1)}},disabled:d,className:"w-full",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Open Stripe Dashboard"]})]}):e.jsxs(e.Fragment,{children:[m&&e.jsxs(Gu,{children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs(Ku,{children:["Additional information required to activate payouts.",(null==(t=null==i?void 0:i.requirements)?void 0:t.past_due)&&i.requirements.past_due.length>0&&e.jsx("span",{className:"text-red-600 font-medium",children:" Action required!"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[(null==i?void 0:i.details_submitted)?e.jsx(Ue,{className:"h-4 w-4 text-green-600"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Information submitted"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[(null==i?void 0:i.charges_enabled)?e.jsx(Ue,{className:"h-4 w-4 text-green-600"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Charges enabled"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[(null==i?void 0:i.payouts_enabled)?e.jsx(Ue,{className:"h-4 w-4 text-green-600"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Payouts enabled"})]})]}),e.jsx(jr,{onClick:h,disabled:d,className:"w-full",children:d?"Redirecting...":"Continue Setup"})]})})]})}function ah(){const{getFinancialSummary:t,getHostPayouts:s}=$l(),[r,a]=He.useState(null),[n,i]=He.useState(null),[o,l]=He.useState(!0);He.useEffect(()=>{!async function(){try{l(!0);const[e,r]=await Promise.all([t().catch(()=>({total_balance:0,pending_earnings:0,total_earnings:0,total_payouts:0,platform_fees:0,recent_transactions:[]})),s().catch(()=>({payouts:[],total_paid:0,total_pending:0,total_in_transit:0}))]);a(e),i(r)}catch(e){console.error("Failed to load financial data:",e)}finally{l(!1)}}()},[]);const c=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=t=>{switch(t){case"completed":return e.jsx(Ue,{className:"h-4 w-4"});case"processing":default:return e.jsx(C,{className:"h-4 w-4"});case"pending":case"failed":return e.jsx(we,{className:"h-4 w-4"})}};return o?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Financial Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your earnings, payouts, and financial settings"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Pending Earnings"}),e.jsx(W,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(zl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==n?void 0:n.total_pending.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting payout"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsx(Y,{className:"h-4 w-4 text-krib-lime"})]}),e.jsxs(zl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==r?void 0:r.total_earnings.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time earnings"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Total Payouts"}),e.jsx(ze,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(zl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==n?void 0:n.total_paid.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Money transferred"})]})]}),e.jsxs(Dl,{className:"krib-card krib-glow-hover",children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Platform Fees"}),e.jsx(Q,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(zl,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==r?void 0:r.platform_fees.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fees paid"})]})]})]}),e.jsxs(lc,{defaultValue:"payouts",className:"w-full",children:[e.jsxs(cc,{className:"grid w-full grid-cols-3",children:[e.jsx(dc,{value:"payouts",children:"Payouts"}),e.jsx(dc,{value:"transactions",children:"Transactions"}),e.jsx(dc,{value:"settings",children:"Settings"})]}),e.jsxs(uc,{value:"payouts",className:"space-y-4",children:[e.jsxs(Gu,{children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx(Ku,{children:"Payouts are automatically processed 1 day after guest checkout. Platform fee: 15%"})]}),e.jsxs(Dl,{children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Payout History"}),e.jsx(Ml,{children:"Your recent payouts and transfers"})]}),e.jsx(zl,{children:e.jsx("div",{className:"space-y-4",children:(null==n?void 0:n.payouts)&&n.payouts.length>0?n.payouts.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(t.status),e.jsxs("span",{className:"font-medium",children:["$",t.amount.toFixed(2)," AED"]}),e.jsx(Wc,{className:c(t.status),children:t.status})]}),e.jsx("p",{className:"text-sm font-medium",children:t.property_title||"Property payout"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(t.initiated_at).toLocaleDateString(),t.completed_at&&`  Completed ${new Date(t.completed_at).toLocaleDateString()}`]}),t.failure_message&&e.jsx("p",{className:"text-sm text-red-600",children:t.failure_message})]}),e.jsx("div",{className:"text-right text-sm",children:t.platform_fee&&e.jsxs("p",{className:"text-muted-foreground",children:["Platform fee: $",t.platform_fee.toFixed(2)]})})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No payouts yet"})})})]})]}),e.jsx(uc,{value:"transactions",className:"space-y-4",children:e.jsxs(Dl,{children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Recent Transactions"}),e.jsx(Ml,{children:"Your earning transactions from bookings"})]}),e.jsx(zl,{children:e.jsx("div",{className:"space-y-4",children:(null==r?void 0:r.recent_transactions.length)?r.recent_transactions.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:t.property_title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.guest_name,"  ",new Date(t.date).toLocaleDateString()]}),e.jsx(Wc,{variant:"completed"===t.status?"default":"secondary",children:t.status})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-green-600",children:["+$",t.amount.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.type})]})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No transactions yet"})})})]})}),e.jsx(uc,{value:"settings",className:"space-y-4",children:e.jsx(rh,{})})]})]})}var nh="Switch",[ih,oh]=u(nh),[lh,ch]=ih(nh),dh=He.forwardRef((t,r)=>{const{__scopeSwitch:a,name:n,checked:i,defaultChecked:o,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...m}=t,[f,x]=He.useState(null),b=g(r,e=>x(e)),y=He.useRef(!1),w=!f||(h||!!f.closest("form")),[j,N]=p({prop:i,defaultProp:o??!1,onChange:u,caller:nh});return e.jsxs(lh,{scope:a,checked:j,disabled:c,children:[e.jsx(s.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":ph(j),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:b,onClick:v(t.onClick,e=>{N(e=>!e),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&e.jsx(mh,{control:f,bubbles:!y.current,name:n,value:d,checked:j,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});dh.displayName=nh;var uh="SwitchThumb",hh=He.forwardRef((t,r)=>{const{__scopeSwitch:a,...n}=t,i=ch(uh,a);return e.jsx(s.span,{"data-state":ph(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r})});hh.displayName=uh;var mh=He.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:a=!0,...n},i)=>{const o=He.useRef(null),l=g(o,i),c=Hc(r),d=ge(s);return He.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==r&&s){const t=new Event("click",{bubbles:a});s.call(e,r),e.dispatchEvent(t)}},[c,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ph(e){return e?"checked":"unchecked"}mh.displayName="SwitchBubbleInput";var fh=dh,gh=hh;function xh({className:t,...s}){return e.jsx(fh,{"data-slot":"switch",className:yr("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(gh,{"data-slot":"switch-thumb",className:yr("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function vh(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>({...t,...s(e)[`__scope${r}`]}),{});return He.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var bh=Symbol.for("react.lazy"),yh=Ke[" use ".trim().toString()];function wh(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===bh&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function jh(t){const s=Nh(t),r=He.forwardRef((t,r)=>{let{children:a,...n}=t;wh(a)&&"function"==typeof yh&&(a=yh(a._payload));const i=He.Children.toArray(a),o=i.find(_h);if(o){const t=o.props.children,a=i.map(e=>e===o?He.Children.count(t)>1?He.Children.only(null):He.isValidElement(t)?t.props.children:null:e);return e.jsx(s,{...n,ref:r,children:He.isValidElement(t)?He.cloneElement(t,void 0,a):null})}return e.jsx(s,{...n,ref:r,children:a})});return r.displayName=`${t}.Slot`,r}function Nh(e){const t=He.forwardRef((e,t)=>{let{children:s,...r}=e;if(wh(s)&&"function"==typeof yh&&(s=yh(s._payload)),He.isValidElement(s)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(s),a=function(e,t){const s={...t};for(const r in t){const a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{const t=n(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==He.Fragment&&(a.ref=t?J(t,e):e),He.cloneElement(s,a)}return He.Children.count(s)>1?He.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kh=Symbol("radix.slottable");function _h(e){return He.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===kh}var Sh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t,s)=>{const r=jh(`Primitive.${s}`),a=He.forwardRef((t,a)=>{const{asChild:n,...i}=t,o=n?r:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...i,ref:a})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{}),Ch={exports:{}},Eh={},Ph=He;var Th="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ah=Ph.useState,Rh=Ph.useEffect,Oh=Ph.useLayoutEffect,Ih=Ph.useDebugValue;function $h(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Th(e,s)}catch(r){return!0}}var Dh="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),r=Ah({inst:{value:s,getSnapshot:t}}),a=r[0].inst,n=r[1];return Oh(function(){a.value=s,a.getSnapshot=t,$h(a)&&n({inst:a})},[e,s,t]),Rh(function(){return $h(a)&&n({inst:a}),e(function(){$h(a)&&n({inst:a})})},[e]),Ih(s),s};Eh.useSyncExternalStore=void 0!==Ph.useSyncExternalStore?Ph.useSyncExternalStore:Dh,Ch.exports=Eh;var Lh=Ch.exports;function Uh(){return()=>{}}var Mh="Avatar",[zh,Bh]=function(t,s=[]){let r=[];const a=()=>{const e=r.map(e=>He.createContext(e));return function(s){const r=(null==s?void 0:s[t])||e;return He.useMemo(()=>({[`__scope${t}`]:{...s,[t]:r}}),[s,r])}};return a.scopeName=t,[function(s,a){const n=He.createContext(a);n.displayName=s+"Context";const i=r.length;r=[...r,a];const o=s=>{var r;const{scope:a,children:o,...l}=s,c=(null==(r=null==a?void 0:a[t])?void 0:r[i])||n,d=He.useMemo(()=>l,Object.values(l));return e.jsx(c.Provider,{value:d,children:o})};return o.displayName=s+"Provider",[o,function(e,r){var o;const l=(null==(o=null==r?void 0:r[t])?void 0:o[i])||n,c=He.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${e}\` must be used within \`${s}\``)}]},vh(a,...s)]}(Mh),[Fh,Wh]=zh(Mh),qh=He.forwardRef((t,s)=>{const{__scopeAvatar:r,...a}=t,[n,i]=He.useState("idle");return e.jsx(Fh,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(Sh.span,{...a,ref:s})})});qh.displayName=Mh;var Gh="AvatarImage",Hh=He.forwardRef((t,s)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...i}=t,o=Wh(Gh,r),l=function(e,{referrerPolicy:t,crossOrigin:s}){const r=Lh.useSyncExternalStore(Uh,()=>!0,()=>!1),a=He.useRef(null),n=r?(a.current||(a.current=new window.Image),a.current):null,[i,o]=He.useState(()=>Jh(n,e));return ee(()=>{o(Jh(n,e))},[n,e]),ee(()=>{const e=e=>()=>{o(e)};if(!n)return;const r=e("loaded"),a=e("error");return n.addEventListener("load",r),n.addEventListener("error",a),t&&(n.referrerPolicy=t),"string"==typeof s&&(n.crossOrigin=s),()=>{n.removeEventListener("load",r),n.removeEventListener("error",a)}},[n,s,t]),i}(a,i),c=te(e=>{n(e),o.onImageLoadingStatusChange(e)});return ee(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?e.jsx(Sh.img,{...i,ref:s,src:a}):null});Hh.displayName=Gh;var Kh="AvatarFallback",Vh=He.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:a,...n}=t,i=Wh(Kh,r),[o,l]=He.useState(void 0===a);return He.useEffect(()=>{if(void 0!==a){const e=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(e)}},[a]),o&&"loaded"!==i.imageLoadingStatus?e.jsx(Sh.span,{...n,ref:s}):null});function Jh(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Vh.displayName=Kh;var Yh=qh,Xh=Hh,Qh=Vh;const Zh=He.forwardRef(({className:t,...s},r)=>e.jsx(Yh,{ref:r,className:yr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Zh.displayName=Yh.displayName;const em=He.forwardRef(({className:t,...s},r)=>e.jsx(Xh,{ref:r,className:yr("aspect-square h-full w-full",t),...s}));em.displayName=Xh.displayName;const tm=He.forwardRef(({className:t,...s},r)=>e.jsx(Qh,{ref:r,className:yr("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));tm.displayName=Qh.displayName;var sm=Array(12).fill(0),rm=({visible:e,className:t})=>Ye.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ye.createElement("div",{className:"sonner-spinner"},sm.map((e,t)=>Ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),am=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),nm=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),im=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),om=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),lm=Ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),cm=1,dm=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:cm++,n=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),n?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:s}),{...t,...e,id:a,dismissible:i,title:s}):t):this.addToast({title:s,...r,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r,a=e instanceof Promise?e:e(),n=void 0!==s,i=a.then(async e=>{if(r=["resolve",e],Ye.isValidElement(e))n=!1,this.create({id:s,type:"default",message:e});else if(um(e)&&!e.ok){n=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:r,description:a})}else if(void 0!==t.success){n=!1;let r="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"success",message:r,description:a})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){n=!1;let r="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"error",message:r,description:a})}}).finally(()=>{var e;n&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:o}:Object.assign(s,{unwrap:o})},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||cm++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},um=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,hm=(e,t)=>{let s=(null==t?void 0:t.id)||cm++;return dm.addToast({title:e,...t,id:s}),s},mm=Object.assign(hm,{success:dm.success,info:dm.info,warning:dm.warning,error:dm.error,custom:dm.custom,message:dm.message,promise:dm.promise,dismiss:dm.dismiss,loading:dm.loading},{getHistory:()=>dm.toasts,getToasts:()=>dm.getActiveToasts()});function pm(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var fm=3,gm=14;function xm(...e){return e.filter(Boolean).join(" ")}var vm=e=>{var t,s,r,a,n,i,o,l,c,d,u;let{invert:h,toast:m,unstyled:p,interacting:f,setHeights:g,visibleToasts:x,heights:v,index:b,toasts:y,expanded:w,removeToast:j,defaultRichColors:N,closeButton:k,style:_,cancelButtonStyle:S,actionButtonStyle:C,className:E="",descriptionClassName:P="",duration:T,position:A,gap:R,loadingIcon:O,expandByDefault:I,classNames:$,icons:D,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:U}=e,[M,z]=Ye.useState(null),[B,F]=Ye.useState(null),[W,q]=Ye.useState(!1),[G,H]=Ye.useState(!1),[K,V]=Ye.useState(!1),[J,Y]=Ye.useState(!1),[X,Q]=Ye.useState(!1),[Z,ee]=Ye.useState(0),[te,se]=Ye.useState(0),re=Ye.useRef(m.duration||T||4e3),ae=Ye.useRef(null),ne=Ye.useRef(null),ie=0===b,oe=b+1<=x,le=m.type,ce=!1!==m.dismissible,de=m.className||"",ue=m.descriptionClassName||"",he=Ye.useMemo(()=>v.findIndex(e=>e.toastId===m.id)||0,[v,m.id]),me=Ye.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:k},[m.closeButton,k]),pe=Ye.useMemo(()=>m.duration||T||4e3,[m.duration,T]),fe=Ye.useRef(0),ge=Ye.useRef(0),xe=Ye.useRef(0),ve=Ye.useRef(null),[be,ye]=A.split("-"),we=Ye.useMemo(()=>v.reduce((e,t,s)=>s>=he?e:e+t.height,0),[v,he]),je=(()=>{let[e,t]=Ye.useState(document.hidden);return Ye.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=m.invert||h,ke="loading"===le;ge.current=Ye.useMemo(()=>he*R+we,[he,we]),Ye.useEffect(()=>{re.current=pe},[pe]),Ye.useEffect(()=>{q(!0)},[]),Ye.useEffect(()=>{let e=ne.current;if(e){let t=e.getBoundingClientRect().height;return se(t),g(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==m.id))}},[g,m.id]),Ye.useLayoutEffect(()=>{if(!W)return;let e=ne.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,se(s),g(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?{...e,height:s}:e):[{toastId:m.id,height:s,position:m.position},...e])},[W,m.title,m.description,g,m.id]);let _e=Ye.useCallback(()=>{H(!0),ee(ge.current),g(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{j(m)},200)},[m,j,g,ge]);return Ye.useEffect(()=>{if(m.promise&&"loading"===le||m.duration===1/0||"loading"===m.type)return;let e;return w||f||U&&je?(()=>{if(xe.current<fe.current){let e=(new Date).getTime()-fe.current;re.current=re.current-e}xe.current=(new Date).getTime()})():re.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),_e()},re.current)),()=>clearTimeout(e)},[w,f,m,le,U,je,_e]),Ye.useEffect(()=>{m.delete&&_e()},[_e,m.delete]),Ye.createElement("li",{tabIndex:0,ref:ne,className:xm(E,de,null==$?void 0:$.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==$?void 0:$.default,null==$?void 0:$[le],null==(s=null==m?void 0:m.classNames)?void 0:s[le]),"data-sonner-toast":"","data-rich-colors":null!=(r=m.richColors)?r:N,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":X,"data-removed":G,"data-visible":oe,"data-y-position":be,"data-x-position":ye,"data-index":b,"data-front":ie,"data-swiping":K,"data-dismissible":ce,"data-type":le,"data-invert":Ne,"data-swipe-out":J,"data-swipe-direction":B,"data-expanded":!!(w||I&&W),style:{"--index":b,"--toasts-before":b,"--z-index":y.length-b,"--offset":`${G?Z:ge.current}px`,"--initial-height":I?"auto":`${te}px`,..._,...m.style},onDragEnd:()=>{V(!1),z(null),ve.current=null},onPointerDown:e=>{ke||!ce||(ae.current=new Date,ee(ge.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(V(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,r;if(J||!ce)return;ve.current=null;let a=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),n=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(s=ae.current)?void 0:s.getTime()),o="x"===M?a:n,l=Math.abs(o)/i;if(Math.abs(o)>=20||l>.11)return ee(ge.current),null==(r=m.onDismiss)||r.call(m,m),F("x"===M?a>0?"right":"left":n>0?"down":"up"),_e(),Y(!0),void Q(!1);V(!1),z(null)},onPointerMove:t=>{var s,r,a,n;if(!ve.current||!ce||(null==(s=window.getSelection())?void 0:s.toString().length)>0)return;let i=t.clientY-ve.current.y,o=t.clientX-ve.current.x,l=null!=(r=e.swipeDirections)?r:function(e){let[t,s]=e.split("-"),r=[];return t&&r.push(t),s&&r.push(s),r}(A);!M&&(Math.abs(o)>1||Math.abs(i)>1)&&z(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};"y"===M?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&i<0||l.includes("bottom")&&i>0)&&(c.y=i):"x"===M&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Q(!0),null==(a=ne.current)||a.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(n=ne.current)||n.style.setProperty("--swipe-amount-y",`${c.y}px`)}},me&&!m.jsx?Ye.createElement("button",{"aria-label":L,"data-disabled":ke,"data-close-button":!0,onClick:ke||!ce?()=>{}:()=>{var e;_e(),null==(e=m.onDismiss)||e.call(m,m)},className:xm(null==$?void 0:$.closeButton,null==(a=null==m?void 0:m.classNames)?void 0:a.closeButton)},null!=(n=null==D?void 0:D.close)?n:lm):null,m.jsx||He.isValidElement(m.title)?m.jsx?m.jsx:"function"==typeof m.title?m.title():m.title:Ye.createElement(Ye.Fragment,null,le||m.icon||m.promise?Ye.createElement("div",{"data-icon":"",className:xm(null==$?void 0:$.icon,null==(i=null==m?void 0:m.classNames)?void 0:i.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=D&&D.loading?Ye.createElement("div",{className:xm(null==$?void 0:$.loader,null==(Se=null==m?void 0:m.classNames)?void 0:Se.loader,"sonner-loader"),"data-visible":"loading"===le},D.loading):O?Ye.createElement("div",{className:xm(null==$?void 0:$.loader,null==(Ce=null==m?void 0:m.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===le},O):Ye.createElement(rm,{className:xm(null==$?void 0:$.loader,null==(Ee=null==m?void 0:m.classNames)?void 0:Ee.loader),visible:"loading"===le})):null,"loading"!==m.type?m.icon||(null==D?void 0:D[le])||(e=>{switch(e){case"success":return am;case"info":return im;case"warning":return nm;case"error":return om;default:return null}})(le):null):null,Ye.createElement("div",{"data-content":"",className:xm(null==$?void 0:$.content,null==(o=null==m?void 0:m.classNames)?void 0:o.content)},Ye.createElement("div",{"data-title":"",className:xm(null==$?void 0:$.title,null==(l=null==m?void 0:m.classNames)?void 0:l.title)},"function"==typeof m.title?m.title():m.title),m.description?Ye.createElement("div",{"data-description":"",className:xm(P,ue,null==$?void 0:$.description,null==(c=null==m?void 0:m.classNames)?void 0:c.description)},"function"==typeof m.description?m.description():m.description):null),He.isValidElement(m.cancel)?m.cancel:m.cancel&&pm(m.cancel)?Ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||S,onClick:e=>{var t,s;pm(m.cancel)&&ce&&(null==(s=(t=m.cancel).onClick)||s.call(t,e),_e())},className:xm(null==$?void 0:$.cancelButton,null==(d=null==m?void 0:m.classNames)?void 0:d.cancelButton)},m.cancel.label):null,He.isValidElement(m.action)?m.action:m.action&&pm(m.action)?Ye.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:e=>{var t,s;pm(m.action)&&(null==(s=(t=m.action).onClick)||s.call(t,e),!e.defaultPrevented&&_e())},className:xm(null==$?void 0:$.actionButton,null==(u=null==m?void 0:m.classNames)?void 0:u.actionButton)},m.action.label):null));var Se,Ce,Ee};function bm(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function ym(e,t){let s={};return[e,t].forEach((e,t)=>{let r=1===t,a=r?"--mobile-offset":"--offset",n=r?"16px":"32px";function i(e){["top","right","bottom","left"].forEach(t=>{s[`${a}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s[`${a}-${t}`]=n:s[`${a}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(n)}),s}var wm=He.forwardRef(function(e,t){let{invert:s,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:n,closeButton:i,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:m,visibleToasts:p=fm,toastOptions:f,dir:g=bm(),gap:x=gm,loadingIcon:v,icons:b,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w}=e,[j,N]=Ye.useState([]),k=Ye.useMemo(()=>Array.from(new Set([r].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,r]),[_,S]=Ye.useState([]),[C,E]=Ye.useState(!1),[P,T]=Ye.useState(!1),[A,R]=Ye.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=Ye.useRef(null),I=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=Ye.useRef(null),D=Ye.useRef(!1),L=Ye.useCallback(e=>{N(t=>{var s;return null!=(s=t.find(t=>t.id===e.id))&&s.delete||dm.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return Ye.useEffect(()=>dm.subscribe(e=>{e.dismiss?N(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Xe.flushSync(()=>{N(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[]),Ye.useEffect(()=>{if("system"!==d)return void R(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{R(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{R(e?"dark":"light")}catch(t){console.error(t)}})}},[d]),Ye.useEffect(()=>{j.length<=1&&E(!1)},[j]),Ye.useEffect(()=>{let e=e=>{var t,s;a.every(t=>e[t]||e.code===t)&&(E(!0),null==(t=O.current)||t.focus()),"Escape"===e.code&&(document.activeElement===O.current||null!=(s=O.current)&&s.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),Ye.useEffect(()=>{if(O.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,D.current=!1)}},[O.current]),Ye.createElement("section",{ref:t,"aria-label":`${y} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,r)=>{var a;let[d,y]=t.split("-");return j.length?Ye.createElement("ol",{key:t,dir:"auto"===g?bm():g,tabIndex:-1,ref:O,className:o,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":d,"data-lifted":C&&j.length>1&&!n,"data-x-position":y,style:{"--front-toast-height":`${(null==(a=_[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${x}px`,...m,...ym(l,c)},onBlur:e=>{D.current&&!e.currentTarget.contains(e.relatedTarget)&&(D.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D.current||(D.current=!0,$.current=e.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{P||E(!1)},onDragEnd:()=>E(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||T(!0)},onPointerUp:()=>T(!1)},j.filter(e=>!e.position&&0===r||e.position===t).map((r,a)=>{var o,l;return Ye.createElement(vm,{key:r.id,icons:b,index:a,toast:r,defaultRichColors:u,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:s,visibleToasts:p,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:i,interacting:P,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:L,toasts:j.filter(e=>e.position==r.position),heights:_.filter(e=>e.position==r.position),setHeights:S,expandByDefault:n,gap:x,loadingIcon:v,expanded:C,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});function jm(){var t;const{user:s,signOut:r,updateUserProfile:a,updateUserSettings:n,changePassword:i,getUserNotifications:o,updateUserNotifications:l}=$l(),[c,d]=He.useState(!1),[u,h]=He.useState(!1),[m,p]=He.useState({current:"",new:"",confirm:""}),[f,g]=He.useState((null==s?void 0:s.avatar_url)||""),[x,v]=He.useState(!1),b=He.useRef(null),[y,w]=He.useState({displayName:(null==s?void 0:s.name)||"",email:(null==s?void 0:s.email)||"",phoneNumber:(null==s?void 0:s.phone)||"",notifications:{bookings:!0,marketing:!1,systemUpdates:!0},preferences:{currency:"AED",timezone:"Asia/Dubai",language:"English"}});He.useEffect(()=>{j()},[s]);const j=async()=>{if(s)try{const e=await o();w(t=>({...t,displayName:s.name||"",email:s.email||"",phoneNumber:(null==s?void 0:s.phone)||"",notifications:e.notifications||t.notifications}))}catch(e){console.error("Failed to load user settings:",e)}},N=(null==s?void 0:s.email)&&"email"!==(null==(t=null==s?void 0:s.app_metadata)?void 0:t.provider);return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Profile Information"}),e.jsx(Ml,{children:"Update your personal information and contact details"})]}),e.jsxs(zl,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(Zh,{className:"h-24 w-24",children:[e.jsx(em,{src:f,alt:y.displayName}),e.jsx(tm,{className:"text-2xl",children:y.displayName.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{children:"Profile Picture"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(jr,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},disabled:x,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),x?"Uploading...":"Upload Photo"]}),f&&e.jsx(jr,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{await a({avatar_url:""}),g(""),mm.success("Profile picture removed")}catch(e){mm.error("Failed to remove picture")}},children:"Remove"})]}),e.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s)if(s.size>5242880)mm.error("Image must be less than 5MB");else{v(!0);try{const e=new FileReader;e.onloadend=async()=>{const t=e.result;await a({avatar_url:t}),g(t),mm.success("Profile picture updated")},e.readAsDataURL(s)}catch(r){mm.error("Failed to upload picture")}finally{v(!1)}}}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG or GIF. Max size 5MB."})]})]}),e.jsx(Er,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"displayName",children:"Display Name"}),e.jsx(Nr,{id:"displayName",value:y.displayName,onChange:e=>w({...y,displayName:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"email",children:"Email Address"}),e.jsx(Nr,{id:"email",type:"email",value:y.email,onChange:e=>w({...y,email:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"phone",children:"Phone Number"}),e.jsx(Nr,{id:"phone",type:"tel",value:y.phoneNumber,onChange:e=>w({...y,phoneNumber:e.target.value})})]})]})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Notifications"}),e.jsx(Ml,{children:"Choose what notifications you'd like to receive"})]}),e.jsxs(zl,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ku,{children:"Booking Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new bookings, cancellations, and updates"})]}),e.jsx(xh,{checked:y.notifications.bookings,onCheckedChange:e=>w({...y,notifications:{...y.notifications,bookings:e}})})]}),e.jsx(Er,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ku,{children:"Marketing Communications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive tips, product updates, and promotional content"})]}),e.jsx(xh,{checked:y.notifications.marketing,onCheckedChange:e=>w({...y,notifications:{...y.notifications,marketing:e}})})]}),e.jsx(Er,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ku,{children:"System Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about system maintenance and important updates"})]}),e.jsx(xh,{checked:y.notifications.systemUpdates,onCheckedChange:e=>w({...y,notifications:{...y.notifications,systemUpdates:e}})})]})]})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Preferences"}),e.jsx(Ml,{children:"Customize your dashboard experience"})]}),e.jsx(zl,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"currency",children:"Currency"}),e.jsxs("select",{id:"currency",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:y.preferences.currency,onChange:e=>w({...y,preferences:{...y.preferences,currency:e.target.value}}),children:[e.jsx("option",{value:"AED",children:"AED (.)"}),e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"EUR",children:"EUR ()"}),e.jsx("option",{value:"GBP",children:"GBP ()"}),e.jsx("option",{value:"SAR",children:"SAR ()"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"timezone",children:"Timezone"}),e.jsxs("select",{id:"timezone",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:y.preferences.timezone,onChange:e=>w({...y,preferences:{...y.preferences,timezone:e.target.value}}),children:[e.jsx("option",{value:"Asia/Dubai",children:"UAE / Gulf Standard Time (GST)"}),e.jsx("option",{value:"Asia/Riyadh",children:"Saudi Arabia (AST)"}),e.jsx("option",{value:"Europe/London",children:"London (GMT)"}),e.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),e.jsx("option",{value:"America/New_York",children:"New York (EST)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles (PST)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"language",children:"Language"}),e.jsxs("select",{id:"language",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:y.preferences.language,onChange:e=>w({...y,preferences:{...y.preferences,language:e.target.value}}),children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Spanish",children:"Spanish"}),e.jsx("option",{value:"French",children:"French"}),e.jsx("option",{value:"German",children:"German"})]})]})]})})]}),e.jsxs(Dl,{className:"krib-card",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Account Actions"}),e.jsx(Ml,{children:"Manage your account and security settings"})]}),e.jsx(zl,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(jr,{onClick:async()=>{d(!0);try{await a({name:y.displayName,phone:y.phoneNumber}),await l(y.notifications),await n({notifications:y.notifications,preferences:y.preferences}),mm.success("Settings saved successfully")}catch(e){console.error("Settings save error:",e),mm.error(e.message||"Failed to save settings")}finally{d(!1)}},disabled:c,className:"krib-button-primary",children:c?"Saving...":"Save Changes"}),e.jsxs(mu,{open:u,onOpenChange:h,children:[e.jsx(pu,{asChild:!0,children:e.jsx(jr,{variant:"outline",children:"Change Password"})}),e.jsxs(xu,{className:"krib-card",children:[e.jsxs(vu,{children:[e.jsx(bu,{children:N?"Set Password":"Change Password"}),e.jsx(yu,{children:N?"Set a password for your account to enable email/password sign-in.":"Enter your current password and choose a new one."})]}),e.jsxs("div",{className:"space-y-4",children:[!N&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"current-password",className:"text-sm font-medium text-gray-700",children:"Current Password"}),e.jsx(Nr,{id:"current-password",type:"password",placeholder:"Enter current password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:m.current,onChange:e=>p(t=>({...t,current:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"new-password",className:"text-sm font-medium text-gray-700",children:"New Password"}),e.jsx(Nr,{id:"new-password",type:"password",placeholder:"Enter new password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:m.new,onChange:e=>p(t=>({...t,new:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ku,{htmlFor:"confirm-password",className:"text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx(Nr,{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:m.confirm,onChange:e=>p(t=>({...t,confirm:e.target.value}))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(jr,{onClick:async()=>{if(m.new!==m.confirm)return void mm.error("New passwords do not match");if(m.new.length<6)return void mm.error("Password must be at least 6 characters long");const e=(null==s?void 0:s.email)&&!m.current;try{await i(m.current||"",m.new,m.confirm),mm.success(e?"Password set successfully":"Password changed successfully"),h(!1),p({current:"",new:"",confirm:""})}catch(t){console.error("Password change error:",t),mm.error(t.message||"Failed to change password")}},className:"flex-1 krib-button-primary",disabled:!N&&!m.current||!m.new||!m.confirm,children:N?"Set Password":"Change Password"}),e.jsx(jr,{variant:"outline",onClick:()=>h(!1),className:"flex-1",children:"Cancel"})]})]})]})]}),e.jsx(jr,{variant:"destructive",onClick:async()=>{try{await r(),mm.success("Signed out successfully")}catch(e){mm.error("Failed to sign out")}},children:"Sign Out"})]})})]})]})]})}function Nm(){var t,s,r,a,n,i;const{checkSuperhostEligibility:o,getSuperhostStatus:l,requestSuperhostVerification:c}=$l(),[d,u]=He.useState(!0),[h,m]=He.useState(null),[p,f]=He.useState(null),[g,x]=He.useState(""),[v,b]=He.useState(!1);He.useEffect(()=>{y()},[]);const y=async()=>{try{u(!0);const[e,t]=await Promise.all([o(),l()]);m(e),f(t)}catch(e){console.error("[Superhost] Error loading data:",e)}finally{u(!1)}};if(d)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-krib-lime border-t-transparent"})})});const w=null==h?void 0:h.metrics;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Superhost Verification"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Become a verified superhost and stand out to guests"})]}),(null==p?void 0:p.is_superhost)&&e.jsxs(Wc,{className:"bg-krib-lime text-krib-dark-teal px-4 py-2 text-lg",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Superhost"]})]}),"pending"===(null==p?void 0:p.status)&&e.jsx(Dl,{className:"p-6 bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(C,{className:"w-8 h-8 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-100",children:"Verification Pending"}),e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 mt-1",children:"Your superhost request is being reviewed by our team. You'll be notified once it's processed."}),(null==(t=p.pending_request)?void 0:t.created_at)&&e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-2",children:["Requested on ",new Date(p.pending_request.created_at).toLocaleDateString()]})]})]})}),"rejected"===(null==p?void 0:p.status)&&(null==(s=p.pending_request)?void 0:s.rejection_reason)&&e.jsx(Dl,{className:"p-6 bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Le,{className:"w-8 h-8 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100",children:"Request Not Approved"}),e.jsx("p",{className:"text-red-800 dark:text-red-200 mt-1",children:p.pending_request.rejection_reason}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-2",children:"Keep improving your metrics and try again later."})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx(Dl,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Ee,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:(null==w?void 0:w.total_properties)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 1"})]})]})}),e.jsx(Dl,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ke,{className:"w-6 h-6 text-green-600 dark:text-green-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bookings"}),e.jsx("p",{className:"text-2xl font-bold",children:(null==w?void 0:w.total_bookings)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 5"})]})]})}),e.jsx(Dl,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(H,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold",children:(null==(r=null==w?void 0:w.average_rating)?void 0:r.toFixed(1))||"0.0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 4.5"})]})]})})]}),e.jsxs(Dl,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Response Rate"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(a=null==w?void 0:w.response_rate)?void 0:a.toFixed(1))||0,"%"]})]}),e.jsx(Bc,{value:(null==w?void 0:w.response_rate)||0,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum: 90%"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Cancellation Rate"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(null==(n=null==w?void 0:w.cancellation_rate)?void 0:n.toFixed(1))||0,"%"]})]}),e.jsx(Bc,{value:100-((null==w?void 0:w.cancellation_rate)||0),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum: 5%"})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Revenue"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["AED ",(null==(i=null==w?void 0:w.total_revenue)?void 0:i.toFixed(2))||"0.00"]})]})})]})]}),!(null==p?void 0:p.is_superhost)&&"pending"!==(null==p?void 0:p.status)&&e.jsxs(Dl,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:(null==h?void 0:h.eligible)?"Request Verification":"Eligibility Requirements"}),(null==h?void 0:h.eligible)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(Be,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:"Congratulations! You're eligible for superhost status"}),e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200 mt-1",children:"Submit your request and our team will review it within 2-3 business days."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message to Admin (Optional)"}),e.jsx(wu,{value:g,onChange:e=>x(e.target.value),placeholder:"Tell us why you'd be a great superhost...",rows:4,maxLength:500}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[g.length,"/500 characters"]})]}),e.jsx(jr,{onClick:async()=>{if(null==h?void 0:h.eligible)try{b(!0),await c(g||void 0),await y(),x("")}catch(e){console.error("[Superhost] Error requesting verification:",e)}finally{b(!1)}},disabled:v,className:"w-full bg-krib-lime text-krib-dark-teal hover:bg-krib-lime/90",children:v?"Submitting...":"Request Superhost Verification"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx(Y,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Keep growing to unlock superhost status"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:"Complete the requirements below to become eligible."})]})]}),(null==h?void 0:h.reasons)&&h.reasons.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"What you need to work on:"}),e.jsx("ul",{className:"space-y-2",children:h.reasons.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(Le,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t})]},s))})]})]})]}),(null==p?void 0:p.is_superhost)&&e.jsx(Dl,{className:"p-6 bg-gradient-to-r from-krib-lime/20 to-krib-lime/10",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(q,{className:"w-12 h-12 text-krib-lime flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"You're a Superhost!"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Your properties are now marked with a superhost badge, helping you stand out to guests."}),p.approved_at&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Verified on ",new Date(p.approved_at).toLocaleDateString()]})]})]})})]})}var km="ScrollArea",[_m,Sm]=u(km),[Cm,Em]=_m(km),Pm=He.forwardRef((t,r)=>{const{__scopeScrollArea:a,type:n="hover",dir:i,scrollHideDelay:o=600,...l}=t,[c,d]=He.useState(null),[u,h]=He.useState(null),[m,p]=He.useState(null),[f,x]=He.useState(null),[v,b]=He.useState(null),[y,w]=He.useState(0),[j,N]=He.useState(0),[k,_]=He.useState(!1),[S,C]=He.useState(!1),P=g(r,e=>d(e)),T=E(i);return e.jsx(Cm,{scope:a,type:n,dir:T,scrollHideDelay:o,scrollArea:c,viewport:u,onViewportChange:h,content:m,onContentChange:p,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:k,onScrollbarXEnabledChange:_,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:w,onCornerHeightChange:N,children:e.jsx(s.div,{dir:T,...l,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});Pm.displayName=km;var Tm="ScrollAreaViewport",Am=He.forwardRef((t,r)=>{const{__scopeScrollArea:a,children:n,nonce:i,...o}=t,l=Em(Tm,a),c=He.useRef(null),d=g(r,c,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(s.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Am.displayName=Tm;var Rm="ScrollAreaScrollbar",Om=He.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Em(Rm,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,l="horizontal"===t.orientation;return He.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),"hover"===n.type?e.jsx(Im,{...a,ref:s,forceMount:r}):"scroll"===n.type?e.jsx($m,{...a,ref:s,forceMount:r}):"auto"===n.type?e.jsx(Dm,{...a,ref:s,forceMount:r}):"always"===n.type?e.jsx(Lm,{...a,ref:s}):null});Om.displayName=Rm;var Im=He.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Em(Rm,t.__scopeScrollArea),[i,o]=He.useState(!1);return He.useEffect(()=>{const e=n.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(b,{present:r||i,children:e.jsx(Dm,{"data-state":i?"visible":"hidden",...a,ref:s})})}),$m=He.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Em(Rm,t.__scopeScrollArea),i="horizontal"===t.orientation,o=sp(()=>c("SCROLL_END"),100),[l,c]=(d="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},He.useReducer((e,t)=>u[e][t]??e,d));var d,u;return He.useEffect(()=>{if("idle"===l){const e=window.setTimeout(()=>c("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(e)}},[l,n.scrollHideDelay,c]),He.useEffect(()=>{const e=n.viewport,t=i?"scrollLeft":"scrollTop";if(e){let s=e[t];const r=()=>{const r=e[t];s!==r&&(c("SCROLL"),o()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[n.viewport,i,c,o]),e.jsx(b,{present:r||"hidden"!==l,children:e.jsx(Lm,{"data-state":"hidden"===l?"hidden":"visible",...a,ref:s,onPointerEnter:v(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:v(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Dm=He.forwardRef((t,s)=>{const r=Em(Rm,t.__scopeScrollArea),{forceMount:a,...n}=t,[i,o]=He.useState(!1),l="horizontal"===t.orientation,c=sp(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?e:t)}},10);return rp(r.viewport,c),rp(r.content,c),e.jsx(b,{present:a||i,children:e.jsx(Lm,{"data-state":i?"visible":"hidden",...n,ref:s})})}),Lm=He.forwardRef((t,s)=>{const{orientation:r="vertical",...a}=t,n=Em(Rm,t.__scopeScrollArea),i=He.useRef(null),o=He.useRef(0),[l,c]=He.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Ym(l.viewport,l.content),u={...a,sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,s,r="ltr"){const a=Xm(s),n=a/2,i=t||n,o=a-i,l=s.scrollbar.paddingStart+i,c=s.scrollbar.size-s.scrollbar.paddingEnd-o,d=s.content-s.viewport,u="ltr"===r?[0,d]:[-1*d,0];return Zm([l,c],u)(e)}(e,o.current,l,t)}return"horizontal"===r?e.jsx(Um,{...u,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=Qm(n.viewport.scrollLeft,l,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===r?e.jsx(Mm,{...u,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=Qm(n.viewport.scrollTop,l);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),Um=He.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,i=Em(Rm,t.__scopeScrollArea),[o,l]=He.useState(),c=He.useRef(null),d=g(s,c,i.onScrollbarXChange);return He.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(Fm,{"data-orientation":"horizontal",...n,ref:d,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xm(r)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.x),onDragScroll:e=>t.onDragScroll(e.x),onWheelScroll:(e,s)=>{if(i.viewport){const r=i.viewport.scrollLeft+e.deltaX;t.onWheelScroll(r),ep(r,s)&&e.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Jm(o.paddingLeft),paddingEnd:Jm(o.paddingRight)}})}})}),Mm=He.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,i=Em(Rm,t.__scopeScrollArea),[o,l]=He.useState(),c=He.useRef(null),d=g(s,c,i.onScrollbarYChange);return He.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(Fm,{"data-orientation":"vertical",...n,ref:d,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xm(r)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.y),onDragScroll:e=>t.onDragScroll(e.y),onWheelScroll:(e,s)=>{if(i.viewport){const r=i.viewport.scrollTop+e.deltaY;t.onWheelScroll(r),ep(r,s)&&e.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Jm(o.paddingTop),paddingEnd:Jm(o.paddingBottom)}})}})}),[zm,Bm]=_m(Rm),Fm=He.forwardRef((t,r)=>{const{__scopeScrollArea:a,sizes:n,hasThumb:i,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:m,...p}=t,f=Em(Rm,a),[x,b]=He.useState(null),y=g(r,e=>b(e)),w=He.useRef(null),j=He.useRef(""),N=f.viewport,k=n.content-n.viewport,_=te(h),S=te(d),C=sp(m,10);function E(e){if(w.current){const t=e.clientX-w.current.left,s=e.clientY-w.current.top;u({x:t,y:s})}}return He.useEffect(()=>{const e=e=>{const t=e.target;(null==x?void 0:x.contains(t))&&_(e,k)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[N,x,k,_]),He.useEffect(S,[n,S]),rp(x,C),rp(f.content,C),e.jsx(zm,{scope:a,scrollbar:x,hasThumb:i,onThumbChange:te(o),onThumbPointerUp:te(l),onThumbPositionChange:S,onThumbPointerDown:te(c),children:e.jsx(s.div,{...p,ref:y,style:{position:"absolute",...p.style},onPointerDown:v(t.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),w.current=x.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),E(e)}}),onPointerMove:v(t.onPointerMove,E),onPointerUp:v(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=j.current,f.viewport&&(f.viewport.style.scrollBehavior=""),w.current=null})})})}),Wm="ScrollAreaThumb",qm=He.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Bm(Wm,t.__scopeScrollArea);return e.jsx(b,{present:r||n.hasThumb,children:e.jsx(Gm,{ref:s,...a})})}),Gm=He.forwardRef((t,r)=>{const{__scopeScrollArea:a,style:n,...i}=t,o=Em(Wm,a),l=Bm(Wm,a),{onThumbPositionChange:c}=l,d=g(r,e=>l.onThumbChange(e)),u=He.useRef(void 0),h=sp(()=>{u.current&&(u.current(),u.current=void 0)},100);return He.useEffect(()=>{const e=o.viewport;if(e){const t=()=>{if(h(),!u.current){const t=tp(e,c);u.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,h,c]),e.jsx(s.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:v(t.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;l.onThumbPointerDown({x:s,y:r})}),onPointerUp:v(t.onPointerUp,l.onThumbPointerUp)})});qm.displayName=Wm;var Hm="ScrollAreaCorner",Km=He.forwardRef((t,s)=>{const r=Em(Hm,t.__scopeScrollArea),a=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&a?e.jsx(Vm,{...t,ref:s}):null});Km.displayName=Hm;var Vm=He.forwardRef((t,r)=>{const{__scopeScrollArea:a,...n}=t,i=Em(Hm,a),[o,l]=He.useState(0),[c,d]=He.useState(0),u=Boolean(o&&c);return rp(i.scrollbarX,()=>{var e;const t=(null==(e=i.scrollbarX)?void 0:e.offsetHeight)||0;i.onCornerHeightChange(t),d(t)}),rp(i.scrollbarY,()=>{var e;const t=(null==(e=i.scrollbarY)?void 0:e.offsetWidth)||0;i.onCornerWidthChange(t),l(t)}),u?e.jsx(s.div,{...n,ref:r,style:{width:o,height:c,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...t.style}}):null});function Jm(e){return e?parseInt(e,10):0}function Ym(e,t){const s=e/t;return isNaN(s)?0:s}function Xm(e){const t=Ym(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function Qm(e,t,s="ltr"){const r=Xm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-a,i=t.content-t.viewport,o=n-r,l=Gc(e,"ltr"===s?[0,i]:[-1*i,0]);return Zm([0,i],[0,o])(l)}function Zm(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function ep(e,t){return e>0&&e<t}var tp=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const n={left:e.scrollLeft,top:e.scrollTop},i=s.left!==n.left,o=s.top!==n.top;(i||o)&&t(),s=n,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function sp(e,t){const s=te(e),r=He.useRef(0);return He.useEffect(()=>()=>window.clearTimeout(r.current),[]),He.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function rp(e,t){const s=te(t);ee(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}var ap=Pm,np=Am,ip=Km;const op=He.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(ap,{ref:a,className:yr("relative overflow-hidden",t),...r,children:[e.jsx(np,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(lp,{}),e.jsx(ip,{})]}));op.displayName=ap.displayName;const lp=He.forwardRef(({className:t,orientation:s="vertical",...r},a)=>e.jsx(Om,{ref:a,orientation:s,className:yr("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(qm,{className:"relative flex-1 rounded-full bg-border"})}));function cp(){const{apiCall:t}=$l(),[s,r]=He.useState([]),[a,n]=He.useState(null),[i,o]=He.useState([]),[l,c]=He.useState(""),[d,u]=He.useState(""),[h,m]=He.useState(!1),[p,f]=He.useState("");async function g(){try{const e=await t("/messages/conversations","GET");r(e||[])}catch(e){console.error("Failed to load conversations:",e)}}async function x(e){try{const s=await t(`/messages/conversations/${e}/messages`,"GET");o(s||[])}catch(s){console.error("Failed to load messages:",s)}}async function v(){if(l.trim()&&a){m(!0);try{await t(`/messages/conversations/${a.id}/messages`,"POST",{content:l}),c(""),u(""),await x(a.id),await g()}catch(e){console.error("Failed to send message:",e)}finally{m(!1)}}}He.useEffect(()=>{g()},[]),He.useEffect(()=>{a&&x(a.id)},[a]);const b=s.filter(e=>e.guest_name.toLowerCase().includes(p.toLowerCase())||e.guest_email.toLowerCase().includes(p.toLowerCase()));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Communicate with your guests"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 h-[calc(100vh-200px)]",children:[e.jsxs(Dl,{className:"col-span-1",children:[e.jsxs(Ll,{children:[e.jsx(Ul,{children:"Conversations"}),e.jsxs(Ml,{children:[s.filter(e=>"active"===e.status).length," active"]}),e.jsxs("div",{className:"relative mt-4",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Nr,{placeholder:"Search conversations...",value:p,onChange:e=>f(e.target.value),className:"pl-10"})]})]}),e.jsx(zl,{className:"p-0",children:e.jsxs(op,{className:"h-[calc(100vh-380px)]",children:[b.map(t=>e.jsxs("div",{onClick:()=>n(t),className:"p-4 border-b cursor-pointer hover:bg-accent transition-colors "+((null==a?void 0:a.id)===t.id?"bg-accent":""),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zh,{children:e.jsx(tm,{children:t.guest_name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.guest_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.guest_email})]})]}),t.unread_count_host>0&&e.jsx(Wc,{variant:"destructive",children:t.unread_count_host})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(t.last_message_at).toLocaleString()})]},t.id)),0===b.length&&e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(G,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No conversations found"})]})]})})]}),e.jsx(Dl,{className:"col-span-2 flex flex-col",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ll,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ul,{children:a.guest_name}),e.jsx(Ml,{children:a.guest_email})]}),e.jsxs(jr,{variant:"outline",size:"sm",onClick:()=>async function(e){try{await t(`/messages/conversations/${e}/archive`,"POST"),await g(),(null==a?void 0:a.id)===e&&(n(null),o([]))}catch(s){console.error("Failed to archive conversation:",s)}}(a.id),children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Archive"]})]})}),e.jsx(op,{className:"flex-1 p-4",children:e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsx("div",{className:"flex "+("host"===t.sender_type?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[70%] rounded-lg p-3 "+("host"===t.sender_type?"bg-primary text-primary-foreground":"bg-muted"),children:[t.is_ai_generated&&e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(be,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs opacity-70",children:"AI Generated"})]}),e.jsx("p",{className:"text-sm",children:t.content}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(t.created_at).toLocaleTimeString()})]})},t.id))})}),d&&e.jsx("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-950 border-t border-b",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-600 mb-1",children:"AI Suggestion"}),e.jsx("p",{className:"text-sm",children:d}),e.jsx(jr,{size:"sm",variant:"link",onClick:()=>c(d),className:"mt-1 p-0 h-auto",children:"Use this response"})]})]})}),e.jsxs("div",{className:"p-4 border-t",children:[e.jsx("div",{className:"flex gap-2 mb-2",children:e.jsxs(jr,{variant:"outline",size:"sm",onClick:async function(){if(!a||0===i.length)return;const e=[...i].reverse().find(e=>"guest"===e.sender_type);if(e){m(!0);try{const s=await t(`/messages/conversations/${a.id}/ai-response`,"POST",{message:e.content});u(s.ai_response)}catch(s){console.error("Failed to generate AI response:",s)}finally{m(!1)}}},disabled:h||0===i.length,children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Generate AI Response"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(wu,{placeholder:"Type your message...",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},className:"resize-none",rows:3}),e.jsx(jr,{onClick:v,disabled:h||!l.trim(),children:e.jsx(We,{className:"h-4 w-4"})})]})]})]}):e.jsx(zl,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(G,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"Select a conversation to start messaging"})]})})})]})]})}lp.displayName=Om.displayName;var dp="Popover",[up,hp]=u(dp,[h]),mp=h(),[pp,fp]=up(dp),gp=t=>{const{__scopePopover:s,children:r,open:a,defaultOpen:n,onOpenChange:i,modal:o=!1}=t,l=mp(s),c=He.useRef(null),[d,u]=He.useState(!1),[h,g]=p({prop:a,defaultProp:n??!1,onChange:i,caller:dp});return e.jsx(f,{...l,children:e.jsx(pp,{scope:s,contentId:m(),triggerRef:c,open:h,onOpenChange:g,onOpenToggle:He.useCallback(()=>g(e=>!e),[g]),hasCustomAnchor:d,onCustomAnchorAdd:He.useCallback(()=>u(!0),[]),onCustomAnchorRemove:He.useCallback(()=>u(!1),[]),modal:o,children:r})})};gp.displayName=dp;var xp="PopoverAnchor";He.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=fp(xp,r),i=mp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=n;return He.useEffect(()=>(o(),()=>l()),[o,l]),e.jsx(x,{...i,...a,ref:s})}).displayName=xp;var vp="PopoverTrigger",bp=He.forwardRef((t,r)=>{const{__scopePopover:a,...n}=t,i=fp(vp,a),o=mp(a),l=g(r,i.triggerRef),c=e.jsx(s.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ap(i.open),...n,ref:l,onClick:v(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:e.jsx(x,{asChild:!0,...o,children:c})});bp.displayName=vp;var yp="PopoverPortal",[wp,jp]=up(yp,{forceMount:void 0}),Np=t=>{const{__scopePopover:s,forceMount:r,children:a,container:n}=t,i=fp(yp,s);return e.jsx(wp,{scope:s,forceMount:r,children:e.jsx(b,{present:r||i.open,children:e.jsx(y,{asChild:!0,container:n,children:a})})})};Np.displayName=yp;var kp="PopoverContent",_p=He.forwardRef((t,s)=>{const r=jp(kp,t.__scopePopover),{forceMount:a=r.forceMount,...n}=t,i=fp(kp,t.__scopePopover);return e.jsx(b,{present:a||i.open,children:i.modal?e.jsx(Cp,{...n,ref:s}):e.jsx(Ep,{...n,ref:s})})});_p.displayName=kp;var Sp=ne("PopoverContent.RemoveScroll"),Cp=He.forwardRef((t,s)=>{const r=fp(kp,t.__scopePopover),a=He.useRef(null),n=g(s,a),i=He.useRef(!1);return He.useEffect(()=>{const e=a.current;if(e)return se(e)},[]),e.jsx(ae,{as:Sp,allowPinchZoom:!0,children:e.jsx(Pp,{...t,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:v(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),i.current||null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:v(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,r=2===t.button||s;i.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:v(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ep=He.forwardRef((t,s)=>{const r=fp(kp,t.__scopePopover),a=He.useRef(!1),n=He.useRef(!1);return e.jsx(Pp,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var s,i;null==(s=t.onCloseAutoFocus)||s.call(t,e),e.defaultPrevented||(a.current||null==(i=r.triggerRef.current)||i.focus(),e.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:e=>{var s,i;null==(s=t.onInteractOutside)||s.call(t,e),e.defaultPrevented||(a.current=!0,"pointerdown"===e.detail.originalEvent.type&&(n.current=!0));const o=e.target;(null==(i=r.triggerRef.current)?void 0:i.contains(o))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&n.current&&e.preventDefault()}})}),Pp=He.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=t,m=fp(kp,r),p=mp(r);return re(),e.jsx(ie,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(j,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:e.jsx(N,{"data-state":Ap(m.open),role:"dialog",id:m.contentId,...p,...h,ref:s,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Tp="PopoverClose";He.forwardRef((t,r)=>{const{__scopePopover:a,...n}=t,i=fp(Tp,a);return e.jsx(s.button,{type:"button",...n,ref:r,onClick:v(t.onClick,()=>i.onOpenChange(!1))})}).displayName=Tp;function Ap(e){return e?"open":"closed"}He.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=mp(r);return e.jsx(w,{...n,...a,ref:s})}).displayName="PopoverArrow";var Rp=gp,Op=bp,Ip=Np,$p=_p;function Dp({...t}){return e.jsx(Rp,{"data-slot":"popover",...t})}function Lp({...t}){return e.jsx(Op,{"data-slot":"popover-trigger",...t})}function Up({className:t,align:s="center",sideOffset:r=4,...a}){return e.jsx(Ip,{children:e.jsx($p,{"data-slot":"popover-content",align:s,sideOffset:r,className:yr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...a})})}function Mp(){const{user:t}=$l(),s=ns(),[r,a]=He.useState([]),[n,i]=He.useState(0),[o,l]=He.useState(!1),[c,d]=He.useState(!1),u=async()=>{if(t)try{d(!0);const e=await fetch(`https://api.host.krib.ae/api/v1/hosts/${t.id}/notifications?limit=20`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();t.success&&t.data.notifications&&(a(t.data.notifications),i(t.data.unread_count||0))}}catch(e){console.error("Failed to load notifications:",e)}finally{d(!1)}},h=async e=>{if(e.is_read||await(async e=>{if(t)try{(await fetch(`https://api.host.krib.ae/api/v1/hosts/${t.id}/notifications/${e}/read`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}})).ok&&(a(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),i(e=>Math.max(0,e-1)))}catch(s){console.error("Failed to mark notification as read:",s)}})(e.id),l(!1),e.action_url)s(e.action_url);else switch(e.type){case"new_booking":case"booking_update":s("/dashboard/bookings");break;case"payment_received":s("/dashboard/financials");break;case"guest_message":s("/dashboard/messages");break;case"urgent":e.message.includes("settings")&&s("/dashboard/settings")}},m=t=>{const s="w-2 h-2 rounded-full";switch(t){case"urgent":return e.jsx("div",{className:`${s} bg-red-500`});case"new_booking":return e.jsx("div",{className:`${s} bg-green-500`});case"payment_received":return e.jsx("div",{className:`${s} bg-blue-500`});case"guest_message":return e.jsx("div",{className:`${s} bg-purple-500`});default:return e.jsx("div",{className:`${s} bg-gray-400`})}},p=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/6e4),a=Math.floor(r/60),n=Math.floor(a/24);return r<1?"Just now":r<60?`${r}m ago`:a<24?`${a}h ago`:n<7?`${n}d ago`:t.toLocaleDateString()};return He.useEffect(()=>{u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[t]),He.useEffect(()=>{o&&u()},[o]),e.jsxs(Dp,{open:o,onOpenChange:l,children:[e.jsx(Lp,{asChild:!0,children:e.jsxs(jr,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(qe,{className:"h-5 w-5"}),n>0&&e.jsx(Wc,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 hover:bg-red-600",variant:"destructive",children:n>9?"9+":n})]})}),e.jsxs(Up,{className:"w-96 p-0",align:"end",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),n>0&&e.jsxs(Wc,{variant:"secondary",children:[n," new"]})]}),e.jsx(op,{className:"h-[400px]",children:c?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Loading notifications..."}):0===r.length?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(qe,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications"})]}):e.jsx("div",{className:"divide-y",children:r.map(t=>e.jsx("button",{onClick:()=>h(t),className:"w-full p-4 text-left hover:bg-accent transition-colors "+(t.is_read?"":"bg-accent/50"),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:m(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium "+(t.is_read?"text-muted-foreground":"text-foreground"),children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:p(t.created_at)})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.message})]})]})},t.id))})})]})]})}function zp(){const{user:t}=$l(),[s,r]=He.useState([]),[a,n]=He.useState(null),[i,o]=He.useState(!1),[l,c]=He.useState("all"),[d,u]=He.useState([]),[h,m]=He.useState(null),[p,f]=He.useState(""),[g,x]=He.useState(1),[v,b]=He.useState(0),y=async()=>{if(t)try{o(!0);const e="all"!==l?`&property_id=${l}`:"",t=await fetch(`https://api.host.krib.ae/api/v1/reviews?page=${g}&page_size=20${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();r(e.reviews||[]),b(e.total||0)}}catch(e){console.error("Failed to load reviews:",e)}finally{o(!1)}},w=async()=>{if(t)try{const e=await fetch("https://api.host.krib.ae/api/v1/reviews/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();n(t)}}catch(e){console.error("Failed to load stats:",e)}};He.useEffect(()=>{(async()=>{try{const e=await fetch("https://api.host.krib.ae/api/properties",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();u(t||[])}}catch(e){console.error("Failed to load properties:",e)}})(),w()},[t]),He.useEffect(()=>{y()},[t,l,g]);const j=t=>e.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(s=>e.jsx(H,{className:"w-4 h-4 "+(s<=t?"fill-yellow-400 text-yellow-400":"text-gray-300")},s))}),N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and respond to guest reviews"})]})}),a&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Dl,{children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Total Reviews"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(zl,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.total_reviews})})]}),e.jsxs(Dl,{children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Average Rating"}),e.jsx(H,{className:"h-4 w-4 text-yellow-400"})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.average_rating.toFixed(1)}),e.jsx("div",{className:"flex mt-2",children:j(a.average_rating)})]})]}),e.jsxs(Dl,{children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Pending Responses"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(zl,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.pending_responses}),a.pending_responses>0&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Needs your attention"})]})]}),e.jsxs(Dl,{children:[e.jsxs(Ll,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ul,{className:"text-sm font-medium",children:"Rating Distribution"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(zl,{children:e.jsx("div",{className:"space-y-1",children:Object.entries(a.ratings_breakdown).reverse().map(([t,s])=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-3",children:t}),e.jsx(H,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),e.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-400",style:{width:(a.total_reviews>0?s/a.total_reviews*100:0)+"%"}})}),e.jsx("span",{className:"text-muted-foreground w-8 text-right",children:s})]},t))})})]})]}),e.jsxs(Dl,{children:[e.jsx(Ll,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ul,{children:"All Reviews"}),e.jsx(Ml,{children:"View and respond to guest feedback"})]}),e.jsxs(iu,{value:l,onValueChange:c,children:[e.jsx(lu,{className:"w-[250px]",children:e.jsx(ou,{placeholder:"Filter by property"})}),e.jsxs(cu,{children:[e.jsx(du,{value:"all",children:"All Properties"}),d.map(t=>e.jsx(du,{value:t.id,children:t.title},t.id))]})]})]})}),e.jsx(zl,{children:i?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading reviews..."}):0===s.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(G,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No reviews yet"}),e.jsx("p",{className:"text-sm",children:"Reviews from guests will appear here"})]}):e.jsxs("div",{className:"space-y-4",children:[s.map(t=>e.jsx(Dl,{children:e.jsx(zl,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold",children:t.guest_name||"Guest"}),t.property_title&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:""}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.property_title})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j(t.rating),e.jsx("span",{className:"text-sm text-muted-foreground",children:N(t.created_at)})]})]}),!t.host_response&&e.jsx(Wc,{variant:"secondary",children:"Pending Response"})]}),t.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.comment}),t.cleanliness_rating&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cleanliness"}),j(t.cleanliness_rating)]}),t.communication_rating&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Communication"}),j(t.communication_rating)]}),t.location_rating&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Location"}),j(t.location_rating)]})]}),t.host_response&&e.jsxs("div",{className:"bg-accent/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Your Response"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.host_response}),t.responded_at&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Responded on ",N(t.responded_at)]})]}),!t.host_response&&e.jsx("div",{children:h===t.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(wu,{placeholder:"Write your response (min 10 characters)...",value:p,onChange:e=>f(e.target.value),rows:4}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(jr,{onClick:()=>(async e=>{if(!p.trim()||p.length<10)alert("Response must be at least 10 characters");else try{(await fetch(`https://api.host.krib.ae/api/v1/reviews/${e}/respond`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify({response:p})})).ok?(m(null),f(""),y(),w()):alert("Failed to submit response")}catch(t){console.error("Failed to submit response:",t),alert("Failed to submit response")}})(t.id),disabled:p.length<10,children:"Submit Response"}),e.jsx(jr,{variant:"outline",onClick:()=>{m(null),f("")},children:"Cancel"})]})]}):e.jsx(jr,{variant:"outline",onClick:()=>m(t.id),children:"Respond to Review"})})]})})},t.id)),v>20&&e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[e.jsx(jr,{variant:"outline",onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===g,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Page ",g," of ",Math.ceil(v/20)]}),e.jsx(jr,{variant:"outline",onClick:()=>x(e=>e+1),disabled:g>=Math.ceil(v/20),children:"Next"})]})]})})]})]})}function Bp(){const{user:t,isLoading:s}=$l(),r=rs(),a=ns(),n=r.pathname.startsWith("/dashboard")||["overview","properties","add-property","analytics","bookings","financials","superhost","messages","settings"].some(e=>r.pathname===`/${e}`),i=e=>{const t=e.replace("/dashboard/","").replace("/","")||"overview";return["overview","properties","add-property","analytics","bookings","financials","superhost","messages","settings"].includes(t)?t:"overview"},[o,l]=He.useState(i(r.pathname));He.useEffect(()=>{l(i(r.pathname))},[r.pathname]);return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})}):"/auth/callback"===r.pathname?e.jsx(mc,{}):t||r.pathname.startsWith("/auth")?r.pathname.startsWith("/auth")&&"/auth/callback"!==r.pathname?e.jsx(hc,{}):t&&"/"===r.pathname?(a("/dashboard"),null):!t&&n?(a("/auth"),null):e.jsx(_a,{children:e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx(fc,{activeSection:o,onSectionChange:e=>{l(e),a("overview"===e?"/dashboard":`/dashboard/${e}`)}}),e.jsxs("main",{className:"flex-1 overflow-auto krib-dashboard-background",style:{marginLeft:"16rem"},children:[e.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:e.jsx("div",{className:"flex items-center justify-end h-16 px-6",children:e.jsx(Mp,{})})}),e.jsxs(xs,{children:[e.jsx(fs,{path:"/dashboard",element:e.jsx(qc,{})}),e.jsx(fs,{path:"/dashboard/overview",element:e.jsx(qc,{})}),e.jsx(fs,{path:"/dashboard/properties",element:e.jsx(Su,{})}),e.jsx(fs,{path:"/dashboard/add-property",element:e.jsx(Ju,{})}),e.jsx(fs,{path:"/dashboard/analytics",element:e.jsx(Yu,{})}),e.jsx(fs,{path:"/dashboard/bookings",element:e.jsx(sh,{})}),e.jsx(fs,{path:"/dashboard/financials",element:e.jsx(ah,{})}),e.jsx(fs,{path:"/dashboard/superhost",element:e.jsx(Nm,{})}),e.jsx(fs,{path:"/dashboard/messages",element:e.jsx(cp,{})}),e.jsx(fs,{path:"/dashboard/reviews",element:e.jsx(zp,{})}),e.jsx(fs,{path:"/dashboard/settings",element:e.jsx(jm,{})})]})]})]})}):e.jsxs(xs,{children:[e.jsx(fs,{path:"/",element:e.jsx(Fl,{})}),e.jsx(fs,{path:"/auth",element:e.jsx(hc,{})}),e.jsx(fs,{path:"/auth/callback",element:e.jsx(mc,{})}),e.jsx(fs,{path:"*",element:e.jsx(Fl,{})})]})}function Fp(){return e.jsx(ys,{children:e.jsx(Bp,{})})}function Wp(){return e.jsx(Il,{children:e.jsx(Fp,{})})}const qp=He.createContext(void 0),Gp={setTheme:e=>{},themes:[]},Hp=({...t})=>{const{theme:s="system"}=null!==(r=He.useContext(qp))&&void 0!==r?r:Gp;var r;return e.jsx(wm,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};mt.createRoot(document.getElementById("root")).render(e.jsx(Ye.StrictMode,{children:e.jsxs(Il,{children:[e.jsx(Wp,{}),e.jsx(Hp,{})]})}));
